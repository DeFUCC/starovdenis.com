import{a as se}from"./_commonjsHelpers.dfee5925.js";import{o as de,b as me,e as ye,f as Te}from"./motion.8d69bf4d.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";var W={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(A,I){(function(T,g){A.exports=g()})(se,function(){return function(P){var T={};function g(e){if(T[e])return T[e].exports;var l=T[e]={i:e,l:!1,exports:{}};return P[e].call(l.exports,l,l.exports,g),l.l=!0,l.exports}return g.m=P,g.c=T,g.d=function(e,l,r){g.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:r})},g.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,l){if(l&1&&(e=g(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(g.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var n in e)g.d(r,n,function(u){return e[u]}.bind(null,n));return r},g.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(l,"a",l),l},g.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},g.p="",g(g.s=21)}([function(P,T){var g={};P.exports=g,function(){g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(l,r){var n,u;typeof r=="boolean"?(n=2,u=r):(n=1,u=!0);for(var o=n;o<arguments.length;o++){var f=arguments[o];if(f)for(var a in f)u&&f[a]&&f[a].constructor===Object&&(!l[a]||l[a].constructor===Object)?(l[a]=l[a]||{},g.extend(l[a],u,f[a])):l[a]=f[a]}return l},g.clone=function(l,r){return g.extend({},r,l)},g.keys=function(l){if(Object.keys)return Object.keys(l);var r=[];for(var n in l)r.push(n);return r},g.values=function(l){var r=[];if(Object.keys){for(var n=Object.keys(l),u=0;u<n.length;u++)r.push(l[n[u]]);return r}for(var o in l)r.push(l[o]);return r},g.get=function(l,r,n,u){r=r.split(".").slice(n,u);for(var o=0;o<r.length;o+=1)l=l[r[o]];return l},g.set=function(l,r,n,u,o){var f=r.split(".").slice(u,o);return g.get(l,r,0,-1)[f[f.length-1]]=n,n},g.shuffle=function(l){for(var r=l.length-1;r>0;r--){var n=Math.floor(g.random()*(r+1)),u=l[r];l[r]=l[n],l[n]=u}return l},g.choose=function(l){return l[Math.floor(g.random()*l.length)]},g.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},g.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},g.isFunction=function(l){return typeof l=="function"},g.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},g.isString=function(l){return toString.call(l)==="[object String]"},g.clamp=function(l,r,n){return l<r?r:l>n?n:l},g.sign=function(l){return l<0?-1:1},g.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(l,r){return l=typeof l!="undefined"?l:0,r=typeof r!="undefined"?r:1,l+e()*(r-l)};var e=function(){return g._seed=(g._seed*9301+49297)%233280,g._seed/233280};g.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[l]||(g.warn(l),g._warnedOnce[l]=!0)},g.deprecated=function(l,r,n){l[r]=g.chain(function(){g.warnOnce("\u{1F505} deprecated \u{1F505}",n)},l[r])},g.nextId=function(){return g._nextId++},g.indexOf=function(l,r){if(l.indexOf)return l.indexOf(r);for(var n=0;n<l.length;n++)if(l[n]===r)return n;return-1},g.map=function(l,r){if(l.map)return l.map(r);for(var n=[],u=0;u<l.length;u+=1)n.push(r(l[u]));return n},g.topologicalSort=function(l){var r=[],n=[],u=[];for(var o in l)!n[o]&&!u[o]&&g._topologicalSort(o,n,u,l,r);return r},g._topologicalSort=function(l,r,n,u,o){var f=u[l]||[];n[l]=!0;for(var a=0;a<f.length;a+=1){var t=f[a];n[t]||r[t]||g._topologicalSort(t,r,n,u,o)}n[l]=!1,r[l]=!0,o.push(l)},g.chain=function(){for(var l=[],r=0;r<arguments.length;r+=1){var n=arguments[r];n._chained?l.push.apply(l,n._chained):l.push(n)}var u=function(){for(var o,f=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)f[a]=arguments[a];for(a=0;a<l.length;a+=1){var i=l[a].apply(o,f);typeof i!="undefined"&&(o=i)}return o};return u._chained=l,u},g.chainPathBefore=function(l,r,n){return g.set(l,r,g.chain(n,g.get(l,r)))},g.chainPathAfter=function(l,r,n){return g.set(l,r,g.chain(g.get(l,r),n))},g.setDecomp=function(l){g._decomp=l},g.getDecomp=function(){var l=g._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof se!="undefined"&&(l=se.decomp)}catch{l=null}return l}}()},function(P,T){var g={};P.exports=g,function(){g.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(l,e),l},g.update=function(e,l,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<l.length;n++){var u=l[n];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},g.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},g.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},g.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},g.shift=function(e,l){var r=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+r,e.min.y=l.y,e.max.y=l.y+n}}()},function(P,T){var g={};P.exports=g,function(){g.create=function(e,l){return{x:e||0,y:l||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,l,r){var n=Math.cos(l),u=Math.sin(l);r||(r={});var o=e.x*n-e.y*u;return r.y=e.x*u+e.y*n,r.x=o,r},g.rotateAbout=function(e,l,r,n){var u=Math.cos(l),o=Math.sin(l);n||(n={});var f=r.x+((e.x-r.x)*u-(e.y-r.y)*o);return n.y=r.y+((e.x-r.x)*o+(e.y-r.y)*u),n.x=f,n},g.normalise=function(e){var l=g.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},g.dot=function(e,l){return e.x*l.x+e.y*l.y},g.cross=function(e,l){return e.x*l.y-e.y*l.x},g.cross3=function(e,l,r){return(l.x-e.x)*(r.y-e.y)-(l.y-e.y)*(r.x-e.x)},g.add=function(e,l,r){return r||(r={}),r.x=e.x+l.x,r.y=e.y+l.y,r},g.sub=function(e,l,r){return r||(r={}),r.x=e.x-l.x,r.y=e.y-l.y,r},g.mult=function(e,l){return{x:e.x*l,y:e.y*l}},g.div=function(e,l){return{x:e.x/l,y:e.y/l}},g.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},function(P,T,g){var e={};P.exports=e;var l=g(2),r=g(0);(function(){e.create=function(n,u){for(var o=[],f=0;f<n.length;f++){var a=n[f],t={x:a.x,y:a.y,index:f,body:u,isInternal:!1};o.push(t)}return o},e.fromPath=function(n,u){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(o,function(a,t,i){f.push({x:parseFloat(t),y:parseFloat(i)})}),e.create(f,u)},e.centre=function(n){for(var u=e.area(n,!0),o={x:0,y:0},f,a,t,i=0;i<n.length;i++)t=(i+1)%n.length,f=l.cross(n[i],n[t]),a=l.mult(l.add(n[i],n[t]),f),o=l.add(o,a);return l.div(o,6*u)},e.mean=function(n){for(var u={x:0,y:0},o=0;o<n.length;o++)u.x+=n[o].x,u.y+=n[o].y;return l.div(u,n.length)},e.area=function(n,u){for(var o=0,f=n.length-1,a=0;a<n.length;a++)o+=(n[f].x-n[a].x)*(n[f].y+n[a].y),f=a;return u?o/2:Math.abs(o)/2},e.inertia=function(n,u){for(var o=0,f=0,a=n,t,i,s=0;s<a.length;s++)i=(s+1)%a.length,t=Math.abs(l.cross(a[i],a[s])),o+=t*(l.dot(a[i],a[i])+l.dot(a[i],a[s])+l.dot(a[s],a[s])),f+=t;return u/6*(o/f)},e.translate=function(n,u,o){o=typeof o!="undefined"?o:1;var f=n.length,a=u.x*o,t=u.y*o,i;for(i=0;i<f;i++)n[i].x+=a,n[i].y+=t;return n},e.rotate=function(n,u,o){if(u!==0){var f=Math.cos(u),a=Math.sin(u),t=o.x,i=o.y,s=n.length,v,d,C,m;for(m=0;m<s;m++)v=n[m],d=v.x-t,C=v.y-i,v.x=t+(d*f-C*a),v.y=i+(d*a+C*f);return n}},e.contains=function(n,u){for(var o=u.x,f=u.y,a=n.length,t=n[a-1],i,s=0;s<a;s++){if(i=n[s],(o-t.x)*(i.y-t.y)+(f-t.y)*(t.x-i.x)>0)return!1;t=i}return!0},e.scale=function(n,u,o,f){if(u===1&&o===1)return n;f=f||e.centre(n);for(var a,t,i=0;i<n.length;i++)a=n[i],t=l.sub(a,f),n[i].x=f.x+t.x*u,n[i].y=f.y+t.y*o;return n},e.chamfer=function(n,u,o,f,a){typeof u=="number"?u=[u]:u=u||[8],o=typeof o!="undefined"?o:-1,f=f||2,a=a||14;for(var t=[],i=0;i<n.length;i++){var s=n[i-1>=0?i-1:n.length-1],v=n[i],d=n[(i+1)%n.length],C=u[i<u.length?i:u.length-1];if(C===0){t.push(v);continue}var m=l.normalise({x:v.y-s.y,y:s.x-v.x}),c=l.normalise({x:d.y-v.y,y:v.x-d.x}),h=Math.sqrt(2*Math.pow(C,2)),p=l.mult(r.clone(m),C),x=l.normalise(l.mult(l.add(m,c),.5)),y=l.sub(v,l.mult(x,h)),w=o;o===-1&&(w=Math.pow(C,.32)*1.75),w=r.clamp(w,f,a),w%2==1&&(w+=1);for(var M=Math.acos(l.dot(m,c)),S=M/w,B=0;B<w;B++)t.push(l.add(l.rotate(p,S*B),y))}return t},e.clockwiseSort=function(n){var u=e.mean(n);return n.sort(function(o,f){return l.angle(u,o)-l.angle(u,f)}),n},e.isConvex=function(n){var u=0,o=n.length,f,a,t,i;if(o<3)return null;for(f=0;f<o;f++)if(a=(f+1)%o,t=(f+2)%o,i=(n[a].x-n[f].x)*(n[t].y-n[a].y),i-=(n[a].y-n[f].y)*(n[t].x-n[a].x),i<0?u|=1:i>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(n){var u=[],o=[],f,a;for(n=n.slice(0),n.sort(function(t,i){var s=t.x-i.x;return s!==0?s:t.y-i.y}),a=0;a<n.length;a+=1){for(f=n[a];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],f)<=0;)o.pop();o.push(f)}for(a=n.length-1;a>=0;a-=1){for(f=n[a];u.length>=2&&l.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),o.pop(),u.concat(o)}})()},function(P,T,g){var e={};P.exports=e;var l=g(0);(function(){e.on=function(r,n,u){for(var o=n.split(" "),f,a=0;a<o.length;a++)f=o[a],r.events=r.events||{},r.events[f]=r.events[f]||[],r.events[f].push(u);return u},e.off=function(r,n,u){if(!n){r.events={};return}typeof n=="function"&&(u=n,n=l.keys(r.events).join(" "));for(var o=n.split(" "),f=0;f<o.length;f++){var a=r.events[o[f]],t=[];if(u&&a)for(var i=0;i<a.length;i++)a[i]!==u&&t.push(a[i]);r.events[o[f]]=t}},e.trigger=function(r,n,u){var o,f,a,t,i=r.events;if(i&&l.keys(i).length>0){u||(u={}),o=n.split(" ");for(var s=0;s<o.length;s++)if(f=o[s],a=i[f],a){t=l.clone(u,!1),t.name=f,t.source=r;for(var v=0;v<a.length;v++)a[v].apply(r,[t])}}}})()},function(P,T,g){var e={};P.exports=e;var l=g(4),r=g(0),n=g(1),u=g(6);(function(){e.create=function(o){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,f,a,t){if(o.isModified=f,f&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),a&&o.parent&&e.setModified(o.parent,f,a,t),t)for(var i=0;i<o.composites.length;i++){var s=o.composites[i];e.setModified(s,f,a,t)}},e.add=function(o,f){var a=[].concat(f);l.trigger(o,"beforeAdd",{object:f});for(var t=0;t<a.length;t++){var i=a[t];switch(i.type){case"body":if(i.parent!==i){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,i);break;case"constraint":e.addConstraint(o,i);break;case"composite":e.addComposite(o,i);break;case"mouseConstraint":e.addConstraint(o,i.constraint);break}}return l.trigger(o,"afterAdd",{object:f}),o},e.remove=function(o,f,a){var t=[].concat(f);l.trigger(o,"beforeRemove",{object:f});for(var i=0;i<t.length;i++){var s=t[i];switch(s.type){case"body":e.removeBody(o,s,a);break;case"constraint":e.removeConstraint(o,s,a);break;case"composite":e.removeComposite(o,s,a);break;case"mouseConstraint":e.removeConstraint(o,s.constraint);break}}return l.trigger(o,"afterRemove",{object:f}),o},e.addComposite=function(o,f){return o.composites.push(f),f.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,f,a){var t=r.indexOf(o.composites,f);if(t!==-1&&e.removeCompositeAt(o,t),a)for(var i=0;i<o.composites.length;i++)e.removeComposite(o.composites[i],f,!0);return o},e.removeCompositeAt=function(o,f){return o.composites.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,f){return o.bodies.push(f),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,f,a){var t=r.indexOf(o.bodies,f);if(t!==-1&&e.removeBodyAt(o,t),a)for(var i=0;i<o.composites.length;i++)e.removeBody(o.composites[i],f,!0);return o},e.removeBodyAt=function(o,f){return o.bodies.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,f){return o.constraints.push(f),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,f,a){var t=r.indexOf(o.constraints,f);if(t!==-1&&e.removeConstraintAt(o,t),a)for(var i=0;i<o.composites.length;i++)e.removeConstraint(o.composites[i],f,!0);return o},e.removeConstraintAt=function(o,f){return o.constraints.splice(f,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,f,a){if(a)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],f,!0);return f?o.bodies=o.bodies.filter(function(i){return i.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var f=[].concat(o.bodies),a=0;a<o.composites.length;a++)f=f.concat(e.allBodies(o.composites[a]));return o.cache&&(o.cache.allBodies=f),f},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var f=[].concat(o.constraints),a=0;a<o.composites.length;a++)f=f.concat(e.allConstraints(o.composites[a]));return o.cache&&(o.cache.allConstraints=f),f},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var f=[].concat(o.composites),a=0;a<o.composites.length;a++)f=f.concat(e.allComposites(o.composites[a]));return o.cache&&(o.cache.allComposites=f),f},e.get=function(o,f,a){var t,i;switch(a){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(i=t.filter(function(s){return s.id.toString()===f.toString()}),i.length===0?null:i[0]):null},e.move=function(o,f,a){return e.remove(o,f),e.add(a,f),o},e.rebase=function(o){for(var f=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),a=0;a<f.length;a++)f[a].id=r.nextId();return o},e.translate=function(o,f,a){for(var t=a?e.allBodies(o):o.bodies,i=0;i<t.length;i++)u.translate(t[i],f);return o},e.rotate=function(o,f,a,t){for(var i=Math.cos(f),s=Math.sin(f),v=t?e.allBodies(o):o.bodies,d=0;d<v.length;d++){var C=v[d],m=C.position.x-a.x,c=C.position.y-a.y;u.setPosition(C,{x:a.x+(m*i-c*s),y:a.y+(m*s+c*i)}),u.rotate(C,f)}return o},e.scale=function(o,f,a,t,i){for(var s=i?e.allBodies(o):o.bodies,v=0;v<s.length;v++){var d=s[v],C=d.position.x-t.x,m=d.position.y-t.y;u.setPosition(d,{x:t.x+C*f,y:t.y+m*a}),u.scale(d,f,a)}return o},e.bounds=function(o){for(var f=e.allBodies(o),a=[],t=0;t<f.length;t+=1){var i=f[t];a.push(i.bounds.min,i.bounds.max)}return n.create(a)}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(2),n=g(7);g(16);var u=g(0),o=g(1),f=g(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var i={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=u.extend(i,t);return a(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,i){i=i||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||r.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var s=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,i,s){var v;typeof i=="string"&&(v=i,i={},i[v]=s);for(v in i)if(!!Object.prototype.hasOwnProperty.call(i,v))switch(s=i[v],v){case"isStatic":e.setStatic(t,s);break;case"isSleeping":n.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[v]=s}},e.setStatic=function(t,i){for(var s=0;s<t.parts.length;s++){var v=t.parts[s];v.isStatic=i,i?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,i){var s=t.inertia/(t.mass/6);t.inertia=s*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=l.create(i,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,s){var v;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<i.length;v++){var d=i[v];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var C=[];for(v=0;v<i.length;v++)C=C.concat(i[v].vertices);l.clockwiseSort(C);var m=l.hull(C),c=l.centre(m);e.setVertices(t,m),l.translate(t.vertices,c)}var h=e._totalProperties(t);t.area=h.area,t.parent=t,t.position.x=h.centre.x,t.position.y=h.centre.y,t.positionPrev.x=h.centre.x,t.positionPrev.y=h.centre.y,e.setMass(t,h.mass),e.setInertia(t,h.inertia),e.setPosition(t,h.centre)}},e.setCentre=function(t,i,s){s?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},e.setPosition=function(t,i){var s=r.sub(i,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var v=0;v<t.parts.length;v++){var d=t.parts[v];d.position.x+=s.x,d.position.y+=s.y,l.translate(d.vertices,s),o.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,i){var s=i-t.angle;t.anglePrev+=s;for(var v=0;v<t.parts.length;v++){var d=t.parts[v];d.angle+=s,l.rotate(d.vertices,s,t.position),f.rotate(d.axes,s),o.update(d.bounds,d.vertices,t.velocity),v>0&&r.rotateAbout(d.position,s,t.position,d.position)}},e.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=r.magnitude(t.velocity)},e.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,i){e.setPosition(t,r.add(t.position,i))},e.rotate=function(t,i,s){if(!s)e.setAngle(t,t.angle+i);else{var v=Math.cos(i),d=Math.sin(i),C=t.position.x-s.x,m=t.position.y-s.y;e.setPosition(t,{x:s.x+(C*v-m*d),y:s.y+(C*d+m*v)}),e.setAngle(t,t.angle+i)}},e.scale=function(t,i,s,v){var d=0,C=0;v=v||t.position;for(var m=0;m<t.parts.length;m++){var c=t.parts[m];l.scale(c.vertices,i,s,v),c.axes=f.fromVertices(c.vertices),c.area=l.area(c.vertices),e.setMass(c,t.density*c.area),l.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),e.setInertia(c,e._inertiaScale*l.inertia(c.vertices,c.mass)),l.translate(c.vertices,{x:c.position.x,y:c.position.y}),m>0&&(d+=c.area,C+=c.inertia),c.position.x=v.x+(c.position.x-v.x)*i,c.position.y=v.y+(c.position.y-v.y)*s,o.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,C))),t.circleRadius&&(i===s?t.circleRadius*=i:t.circleRadius=null)},e.update=function(t,i,s,v){var d=Math.pow(i*s*t.timeScale,2),C=1-t.frictionAir*s*t.timeScale,m=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=m*C*v+t.force.x/t.mass*d,t.velocity.y=c*C*v+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*v+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=r.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var h=0;h<t.parts.length;h++){var p=t.parts[h];l.translate(p.vertices,t.velocity),h>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(p.vertices,t.angularVelocity,t.position),f.rotate(p.axes,t.angularVelocity),h>0&&r.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),o.update(p.bounds,p.vertices,t.velocity)}},e.applyForce=function(t,i,s){t.force.x+=s.x,t.force.y+=s.y;var v={x:i.x-t.position.x,y:i.y-t.position.y};t.torque+=v.x*s.y-v.y*s.x},e._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var v=t.parts[s],d=v.mass!==1/0?v.mass:1;i.mass+=d,i.area+=v.area,i.inertia+=v.inertia,i.centre=r.add(i.centre,r.mult(v.position,d))}return i.centre=r.div(i.centre,i.mass),i}})()},function(P,T,g){var e={};P.exports=e;var l=g(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(r,n){for(var u=n*n*n,o=0;o<r.length;o++){var f=r[o],a=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,a),i=Math.max(f.motion,a);f.motion=e._minBias*t+(1-e._minBias)*i,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(r,n){for(var u=n*n*n,o=0;o<r.length;o++){var f=r[o];if(!!f.isActive){var a=f.collision,t=a.bodyA.parent,i=a.bodyB.parent;if(!(t.isSleeping&&i.isSleeping||t.isStatic||i.isStatic)&&(t.isSleeping||i.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:i,v=s===t?i:t;!s.isStatic&&v.motion>e._motionWakeThreshold*u&&e.set(s,!1)}}}},e.set=function(r,n){var u=r.isSleeping;n?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,u||l.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,u&&l.trigger(r,"sleepEnd"))}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(9);(function(){var n=[],u={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(f,a){return{pair:null,collided:!1,bodyA:f,bodyB:a,parentA:f.parent,parentB:a.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,a,t){if(e._overlapAxes(u,f.vertices,a.vertices,f.axes),u.overlap<=0||(e._overlapAxes(o,a.vertices,f.vertices,a.axes),o.overlap<=0))return null;var i=t&&t.table[r.id(f,a)],s;i?s=i.collision:(s=e.create(f,a),s.collided=!0,s.bodyA=f.id<a.id?f:a,s.bodyB=f.id<a.id?a:f,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),f=s.bodyA,a=s.bodyB;var v;u.overlap<o.overlap?v=u:v=o;var d=s.normal,C=s.supports,m=v.axis,c=m.x,h=m.y;c*(a.position.x-f.position.x)+h*(a.position.y-f.position.y)<0?(d.x=c,d.y=h):(d.x=-c,d.y=-h),s.tangent.x=-d.y,s.tangent.y=d.x,s.depth=v.overlap,s.penetration.x=d.x*s.depth,s.penetration.y=d.y*s.depth;var p=e._findSupports(f,a,d,1),x=0;if(l.contains(f.vertices,p[0])&&(C[x++]=p[0]),l.contains(f.vertices,p[1])&&(C[x++]=p[1]),x<2){var y=e._findSupports(a,f,d,-1);l.contains(a.vertices,y[0])&&(C[x++]=y[0]),x<2&&l.contains(a.vertices,y[1])&&(C[x++]=y[1])}return x===0&&(C[x++]=p[0]),C.length=x,s},e._overlapAxes=function(f,a,t,i){var s=a.length,v=t.length,d=a[0].x,C=a[0].y,m=t[0].x,c=t[0].y,h=i.length,p=Number.MAX_VALUE,x=0,y,w,M,S,B,E;for(B=0;B<h;B++){var R=i[B],F=R.x,D=R.y,k=d*F+C*D,O=m*F+c*D,V=k,H=O;for(E=1;E<s;E+=1)S=a[E].x*F+a[E].y*D,S>V?V=S:S<k&&(k=S);for(E=1;E<v;E+=1)S=t[E].x*F+t[E].y*D,S>H?H=S:S<O&&(O=S);if(w=V-O,M=H-k,y=w<M?w:M,y<p&&(p=y,x=B,y<=0))break}f.axis=i[x],f.overlap=p},e._projectToAxis=function(f,a,t){for(var i=a[0].x*t.x+a[0].y*t.y,s=i,v=1;v<a.length;v+=1){var d=a[v].x*t.x+a[v].y*t.y;d>s?s=d:d<i&&(i=d)}f.min=i,f.max=s},e._findSupports=function(f,a,t,i){var s=a.vertices,v=s.length,d=f.position.x,C=f.position.y,m=t.x*i,c=t.y*i,h=Number.MAX_VALUE,p,x,y,w,M;for(M=0;M<v;M+=1)x=s[M],w=m*(d-x.x)+c*(C-x.y),w<h&&(h=w,p=x);return y=s[(v+p.index-1)%v],h=m*(d-y.x)+c*(C-y.y),x=s[(p.index+1)%v],m*(d-x.x)+c*(C-x.y)<h?(n[0]=p,n[1]=x,n):(n[0]=p,n[1]=y,n)}})()},function(P,T,g){var e={};P.exports=e;var l=g(17);(function(){e.create=function(r,n){var u=r.bodyA,o=r.bodyB,f={id:e.id(u,o),bodyA:u,bodyB:o,collision:r,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||o.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,r,n),f},e.update=function(r,n,u){var o=r.contacts,f=n.supports,a=r.activeContacts,t=n.parentA,i=n.parentB,s=t.vertices.length;r.isActive=!0,r.timeUpdated=u,r.collision=n,r.separation=n.depth,r.inverseMass=t.inverseMass+i.inverseMass,r.friction=t.friction<i.friction?t.friction:i.friction,r.frictionStatic=t.frictionStatic>i.frictionStatic?t.frictionStatic:i.frictionStatic,r.restitution=t.restitution>i.restitution?t.restitution:i.restitution,r.slop=t.slop>i.slop?t.slop:i.slop,n.pair=r,a.length=0;for(var v=0;v<f.length;v++){var d=f[v],C=d.body===t?d.index:s+d.index,m=o[C];m?a.push(m):a.push(o[C]=l.create(d))}},e.setActive=function(r,n,u){n?(r.isActive=!0,r.timeUpdated=u):(r.isActive=!1,r.activeContacts.length=0)},e.id=function(r,n){return r.id<n.id?"A"+r.id+"B"+n.id:"A"+n.id+"B"+r.id}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(2),n=g(7),u=g(1),o=g(11),f=g(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,v=r.magnitude(r.sub(i,s));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=f.extend(d,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var i=a[t],s=i.constraintImpulse;i.isStatic||s.x===0&&s.y===0&&s.angle===0||(i.position.x+=s.x,i.position.y+=s.y,i.angle+=s.angle)}},e.solveAll=function(a,t){for(var i=0;i<a.length;i+=1){var s=a[i],v=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(v||d)&&e.solve(a[i],t)}for(i=0;i<a.length;i+=1)s=a[i],v=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!v&&!d&&e.solve(a[i],t)},e.solve=function(a,t){var i=a.bodyA,s=a.bodyB,v=a.pointA,d=a.pointB;if(!(!i&&!s)){i&&!i.isStatic&&(r.rotate(v,i.angle-a.angleA,v),a.angleA=i.angle),s&&!s.isStatic&&(r.rotate(d,s.angle-a.angleB,d),a.angleB=s.angle);var C=v,m=d;if(i&&(C=r.add(i.position,v)),s&&(m=r.add(s.position,d)),!(!C||!m)){var c=r.sub(C,m),h=r.magnitude(c);h<e._minLength&&(h=e._minLength);var p=(h-a.length)/h,x=a.stiffness<1?a.stiffness*t:a.stiffness,y=r.mult(c,p*x),w=(i?i.inverseMass:0)+(s?s.inverseMass:0),M=(i?i.inverseInertia:0)+(s?s.inverseInertia:0),S=w+M,B,E,R,F,D;if(a.damping){var k=r.create();R=r.div(c,h),D=r.sub(s&&r.sub(s.position,s.positionPrev)||k,i&&r.sub(i.position,i.positionPrev)||k),F=r.dot(R,D)}i&&!i.isStatic&&(E=i.inverseMass/w,i.constraintImpulse.x-=y.x*E,i.constraintImpulse.y-=y.y*E,i.position.x-=y.x*E,i.position.y-=y.y*E,a.damping&&(i.positionPrev.x-=a.damping*R.x*F*E,i.positionPrev.y-=a.damping*R.y*F*E),B=r.cross(v,y)/S*e._torqueDampen*i.inverseInertia*(1-a.angularStiffness),i.constraintImpulse.angle-=B,i.angle-=B),s&&!s.isStatic&&(E=s.inverseMass/w,s.constraintImpulse.x+=y.x*E,s.constraintImpulse.y+=y.y*E,s.position.x+=y.x*E,s.position.y+=y.y*E,a.damping&&(s.positionPrev.x+=a.damping*R.x*F*E,s.positionPrev.y+=a.damping*R.y*F*E),B=r.cross(d,y)/S*e._torqueDampen*s.inverseInertia*(1-a.angularStiffness),s.constraintImpulse.angle+=B,s.angle+=B)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var i=a[t],s=i.constraintImpulse;if(!(i.isStatic||s.x===0&&s.y===0&&s.angle===0)){n.set(i,!1);for(var v=0;v<i.parts.length;v++){var d=i.parts[v];l.translate(d.vertices,s),v>0&&(d.position.x+=s.x,d.position.y+=s.y),s.angle!==0&&(l.rotate(d.vertices,s.angle,i.position),o.rotate(d.axes,s.angle),v>0&&r.rotateAbout(d.position,s.angle,i.position,d.position)),u.update(d.bounds,d.vertices,i.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(P,T,g){var e={};P.exports=e;var l=g(2),r=g(0);(function(){e.fromVertices=function(n){for(var u={},o=0;o<n.length;o++){var f=(o+1)%n.length,a=l.normalise({x:n[f].y-n[o].y,y:n[o].x-n[f].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),u[t]=a}return r.values(u)},e.rotate=function(n,u){if(u!==0)for(var o=Math.cos(u),f=Math.sin(u),a=0;a<n.length;a++){var t=n[a],i;i=t.x*o-t.y*f,t.y=t.x*f+t.y*o,t.x=i}}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(0),n=g(6),u=g(1),o=g(2);(function(){e.rectangle=function(f,a,t,i,s){s=s||{};var v={label:"Rectangle Body",position:{x:f,y:a},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(s.chamfer){var d=s.chamfer;v.vertices=l.chamfer(v.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete s.chamfer}return n.create(r.extend({},v,s))},e.trapezoid=function(f,a,t,i,s,v){v=v||{},s*=.5;var d=(1-s*2)*t,C=t*s,m=C+d,c=m+C,h;s<.5?h="L 0 0 L "+C+" "+-i+" L "+m+" "+-i+" L "+c+" 0":h="L 0 0 L "+m+" "+-i+" L "+c+" 0";var p={label:"Trapezoid Body",position:{x:f,y:a},vertices:l.fromPath(h)};if(v.chamfer){var x=v.chamfer;p.vertices=l.chamfer(p.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete v.chamfer}return n.create(r.extend({},p,v))},e.circle=function(f,a,t,i,s){i=i||{};var v={label:"Circle Body",circleRadius:t};s=s||25;var d=Math.ceil(Math.max(10,Math.min(s,t)));return d%2==1&&(d+=1),e.polygon(f,a,d,t,r.extend({},v,i))},e.polygon=function(f,a,t,i,s){if(s=s||{},t<3)return e.circle(f,a,i,s);for(var v=2*Math.PI/t,d="",C=v*.5,m=0;m<t;m+=1){var c=C+m*v,h=Math.cos(c)*i,p=Math.sin(c)*i;d+="L "+h.toFixed(3)+" "+p.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:f,y:a},vertices:l.fromPath(d)};if(s.chamfer){var y=s.chamfer;x.vertices=l.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete s.chamfer}return n.create(r.extend({},x,s))},e.fromVertices=function(f,a,t,i,s,v,d,C){var m=r.getDecomp(),c,h,p,x,y,w,M,S,B,E,R;for(c=Boolean(m&&m.quickDecomp),i=i||{},p=[],s=typeof s!="undefined"?s:!1,v=typeof v!="undefined"?v:.01,d=typeof d!="undefined"?d:10,C=typeof C!="undefined"?C:.01,r.isArray(t[0])||(t=[t]),E=0;E<t.length;E+=1)if(w=t[E],x=l.isConvex(w),y=!x,y&&!c&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!c)x?w=l.clockwiseSort(w):w=l.hull(w),p.push({position:{x:f,y:a},vertices:w});else{var F=w.map(function(z){return[z.x,z.y]});m.makeCCW(F),v!==!1&&m.removeCollinearPoints(F,v),C!==!1&&m.removeDuplicatePoints&&m.removeDuplicatePoints(F,C);var D=m.quickDecomp(F);for(M=0;M<D.length;M++){var k=D[M],O=k.map(function(z){return{x:z[0],y:z[1]}});d>0&&l.area(O)<d||p.push({position:l.centre(O),vertices:O})}}for(M=0;M<p.length;M++)p[M]=n.create(r.extend(p[M],i));if(s){var V=5;for(M=0;M<p.length;M++){var H=p[M];for(S=M+1;S<p.length;S++){var U=p[S];if(u.overlaps(H.bounds,U.bounds)){var N=H.vertices,G=U.vertices;for(B=0;B<H.vertices.length;B++)for(R=0;R<U.vertices.length;R++){var K=o.magnitudeSquared(o.sub(N[(B+1)%N.length],G[R])),$=o.magnitudeSquared(o.sub(N[B],G[(R+1)%G.length]));K<V&&$<V&&(N[B].isInternal=!0,G[R].isInternal=!0)}}}}}return p.length>1?(h=n.create(r.extend({parts:p.slice(0)},i)),n.setPosition(h,{x:f,y:a}),h):p[0]}})()},function(P,T,g){var e={};P.exports=e;var l=g(0);(function(){e.create=function(r){var n={};return r||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=r||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f&&(n.button=0,u.preventDefault()),n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=u},n.mousedown=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f?(n.button=0,u.preventDefault()):n.button=u.button,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=u},n.mouseup=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),n.button=-1,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=u},n.mousewheel=function(u){n.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(r,n){r.element=n,n.addEventListener("mousemove",r.mousemove),n.addEventListener("mousedown",r.mousedown),n.addEventListener("mouseup",r.mouseup),n.addEventListener("mousewheel",r.mousewheel),n.addEventListener("DOMMouseScroll",r.mousewheel),n.addEventListener("touchmove",r.mousemove),n.addEventListener("touchstart",r.mousedown),n.addEventListener("touchend",r.mouseup)},e.clearSourceEvents=function(r){r.sourceEvents.mousemove=null,r.sourceEvents.mousedown=null,r.sourceEvents.mouseup=null,r.sourceEvents.mousewheel=null,r.wheelDelta=0},e.setOffset=function(r,n){r.offset.x=n.x,r.offset.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e.setScale=function(r,n){r.scale.x=n.x,r.scale.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e._getRelativeMousePosition=function(r,n,u){var o=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,i=r.changedTouches,s,v;return i?(s=i[0].pageX-o.left-a,v=i[0].pageY-o.top-t):(s=r.pageX-o.left-a,v=r.pageY-o.top-t),{x:s/(n.clientWidth/(n.width||n.clientWidth)*u),y:v/(n.clientHeight/(n.height||n.clientHeight)*u)}}})()},function(P,T,g){var e={};P.exports=e;var l=g(0),r=g(8);(function(){e.create=function(n){var u={bodies:[],pairs:null};return l.extend(u,n)},e.setBodies=function(n,u){n.bodies=u.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var u=[],o=n.pairs,f=n.bodies,a=f.length,t=e.canCollide,i=r.collides,s,v;for(f.sort(e._compareBoundsX),s=0;s<a;s++){var d=f[s],C=d.bounds,m=d.bounds.max.x,c=d.bounds.max.y,h=d.bounds.min.y,p=d.isStatic||d.isSleeping,x=d.parts.length,y=x===1;for(v=s+1;v<a;v++){var w=f[v],M=w.bounds;if(M.min.x>m)break;if(!(c<M.min.y||h>M.max.y)&&!(p&&(w.isStatic||w.isSleeping))&&!!t(d.collisionFilter,w.collisionFilter)){var S=w.parts.length;if(y&&S===1){var B=i(d,w,o);B&&u.push(B)}else for(var E=x>1?1:0,R=S>1?1:0,F=E;F<x;F++)for(var D=d.parts[F],C=D.bounds,k=R;k<S;k++){var O=w.parts[k],M=O.bounds;if(!(C.min.x>M.max.x||C.max.x<M.min.x||C.max.y<M.min.y||C.min.y>M.max.y)){var B=i(D,O,o);B&&u.push(B)}}}}}return u},e.canCollide=function(n,u){return n.group===u.group&&n.group!==0?n.group>0:(n.mask&u.category)!=0&&(u.mask&n.category)!=0},e._compareBoundsX=function(n,u){return n.bounds.min.x-u.bounds.min.x}})()},function(P,T,g){var e={};P.exports=e;var l=g(0);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||l.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var n=e._registry[r.name],u=e.versionParse(r.version).number,o=e.versionParse(n.version).number;u>o?(l.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(r)),e._registry[r.name]=r):u<o?l.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(r)):r!==n&&l.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,n){return r.used.indexOf(n)>-1},e.isFor=function(r,n){var u=r.for&&e.dependencyParse(r.for);return!r.for||n.name===u.name&&e.versionSatisfies(n.version,u.range)},e.use=function(r,n){if(r.uses=(r.uses||[]).concat(n||[]),r.uses.length===0){l.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var u=e.dependencies(r),o=l.topologicalSort(u),f=[],a=0;a<o.length;a+=1)if(o[a]!==r.name){var t=e.resolve(o[a]);if(!t){f.push("\u274C "+o[a]);continue}e.isUsed(r,t.name)||(e.isFor(t,r)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(r)+"."),t._warned=!0),t.install?t.install(r):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),r.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(r,n){var u=e.dependencyParse(r),o=u.name;if(n=n||{},!(o in n)){r=e.resolve(r)||r,n[o]=l.map(r.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),i=e.resolve(a);return i&&!e.versionSatisfies(i.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(i),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),i._warned=!0,r._warned=!0):i||(l.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(u),"could not be resolved."),r._warned=!0),t.name});for(var f=0;f<n[o].length;f+=1)e.dependencies(n[o][f],n);return n}},e.dependencyParse=function(r){if(l.isString(r)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(r)||l.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(r)||l.warn("Plugin.versionParse:",r,"is not a valid version or range.");var u=n.exec(r),o=Number(u[4]),f=Number(u[5]),a=Number(u[6]);return{isRange:Boolean(u[1]||u[2]),version:u[3],range:r,operator:u[1]||u[2]||"",major:o,minor:f,patch:a,parts:[o,f,a],prerelease:u[7],number:o*1e8+f*1e4+a}},e.versionSatisfies=function(r,n){n=n||"*";var u=e.versionParse(n),o=e.versionParse(r);if(u.isRange){if(u.operator==="*"||r==="*")return!0;if(u.operator===">")return o.number>u.number;if(u.operator===">=")return o.number>=u.number;if(u.operator==="~")return o.major===u.major&&o.minor===u.minor&&o.patch>=u.patch;if(u.operator==="^")return u.major>0?o.major===u.major&&o.number>=u.number:u.minor>0?o.minor===u.minor&&o.patch>=u.patch:o.patch===u.patch}return r===n||r==="*"}})()},function(P,T,g){var e={};P.exports=e;var l=g(0),r=g(5),n=g(1),u=g(4),o=g(2),f=g(13);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var h={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},p=l.extend(h,c);return p.canvas&&(p.canvas.width=p.options.width||p.canvas.width,p.canvas.height=p.options.height||p.canvas.height),p.mouse=c.mouse,p.engine=c.engine,p.canvas=p.canvas||v(p.options.width,p.options.height),p.context=p.canvas.getContext("2d"),p.textures={},p.bounds=p.bounds||{min:{x:0,y:0},max:{x:p.canvas.width,y:p.canvas.height}},p.options.showBroadphase=!1,p.options.pixelRatio!==1&&e.setPixelRatio(p,p.options.pixelRatio),l.isElement(p.element)?p.element.appendChild(p.canvas):p.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),p},e.run=function(c){(function h(p){c.frameRequestId=a(h),i(c,p),e.world(c,p),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,p),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,p)})()},e.stop=function(c){t(c.frameRequestId)},e.setPixelRatio=function(c,h){var p=c.options,x=c.canvas;h==="auto"&&(h=d(x)),p.pixelRatio=h,x.setAttribute("data-pixel-ratio",h),x.width=p.width*h,x.height=p.height*h,x.style.width=p.width+"px",x.style.height=p.height+"px"},e.lookAt=function(c,h,p,x){x=typeof x!="undefined"?x:!0,h=l.isArray(h)?h:[h],p=p||{x:0,y:0};for(var y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<h.length;w+=1){var M=h[w],S=M.bounds?M.bounds.min:M.min||M.position||M,B=M.bounds?M.bounds.max:M.max||M.position||M;S&&B&&(S.x<y.min.x&&(y.min.x=S.x),B.x>y.max.x&&(y.max.x=B.x),S.y<y.min.y&&(y.min.y=S.y),B.y>y.max.y&&(y.max.y=B.y))}var E=y.max.x-y.min.x+2*p.x,R=y.max.y-y.min.y+2*p.y,F=c.canvas.height,D=c.canvas.width,k=D/F,O=E/R,V=1,H=1;O>k?H=O/k:V=k/O,c.options.hasBounds=!0,c.bounds.min.x=y.min.x,c.bounds.max.x=y.min.x+E*V,c.bounds.min.y=y.min.y,c.bounds.max.y=y.min.y+R*H,x&&(c.bounds.min.x+=E*.5-E*V*.5,c.bounds.max.x+=E*.5-E*V*.5,c.bounds.min.y+=R*.5-R*H*.5,c.bounds.max.y+=R*.5-R*H*.5),c.bounds.min.x-=p.x,c.bounds.max.x-=p.x,c.bounds.min.y-=p.y,c.bounds.max.y-=p.y,c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),f.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var h=c.bounds.max.x-c.bounds.min.x,p=c.bounds.max.y-c.bounds.min.y,x=h/c.options.width,y=p/c.options.height;c.context.setTransform(c.options.pixelRatio/x,0,0,c.options.pixelRatio/y,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,h){var p=l.now(),x=c.engine,y=x.world,w=c.canvas,M=c.context,S=c.options,B=c.timing,E=r.allBodies(y),R=r.allConstraints(y),F=S.wireframes?S.wireframeBackground:S.background,D=[],k=[],O,V={timestamp:x.timing.timestamp};if(u.trigger(c,"beforeRender",V),c.currentBackground!==F&&m(c,F),M.globalCompositeOperation="source-in",M.fillStyle="transparent",M.fillRect(0,0,w.width,w.height),M.globalCompositeOperation="source-over",S.hasBounds){for(O=0;O<E.length;O++){var H=E[O];n.overlaps(H.bounds,c.bounds)&&D.push(H)}for(O=0;O<R.length;O++){var U=R[O],N=U.bodyA,G=U.bodyB,K=U.pointA,$=U.pointB;N&&(K=o.add(N.position,U.pointA)),G&&($=o.add(G.position,U.pointB)),!(!K||!$)&&(n.contains(c.bounds,K)||n.contains(c.bounds,$))&&k.push(U)}e.startViewTransform(c),c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),f.setOffset(c.mouse,c.bounds.min))}else k=R,D=E,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!S.wireframes||x.enableSleeping&&S.showSleeping?e.bodies(c,D,M):(S.showConvexHulls&&e.bodyConvexHulls(c,D,M),e.bodyWireframes(c,D,M)),S.showBounds&&e.bodyBounds(c,D,M),(S.showAxes||S.showAngleIndicator)&&e.bodyAxes(c,D,M),S.showPositions&&e.bodyPositions(c,D,M),S.showVelocity&&e.bodyVelocity(c,D,M),S.showIds&&e.bodyIds(c,D,M),S.showSeparations&&e.separations(c,x.pairs.list,M),S.showCollisions&&e.collisions(c,x.pairs.list,M),S.showVertexNumbers&&e.vertexNumbers(c,D,M),S.showMousePosition&&e.mousePosition(c,c.mouse,M),e.constraints(k,M),S.hasBounds&&e.endViewTransform(c),u.trigger(c,"afterRender",V),B.lastElapsed=l.now()-p},e.stats=function(c,h,p){for(var x=c.engine,y=x.world,w=r.allBodies(y),M=0,S=55,B=44,E=0,R=0,F=0;F<w.length;F+=1)M+=w[F].parts.length;var D={Part:M,Body:w.length,Cons:r.allConstraints(y).length,Comp:r.allComposites(y).length,Pair:x.pairs.list.length};h.fillStyle="#0e0f19",h.fillRect(E,R,S*5.5,B),h.font="12px Arial",h.textBaseline="top",h.textAlign="right";for(var k in D){var O=D[k];h.fillStyle="#aaa",h.fillText(k,E+S,R+8),h.fillStyle="#eee",h.fillText(O,E+S,R+26),E+=S}},e.performance=function(c,h){var p=c.engine,x=c.timing,y=x.deltaHistory,w=x.elapsedHistory,M=x.timestampElapsedHistory,S=x.engineDeltaHistory,B=x.engineElapsedHistory,E=p.timing.lastDelta,R=s(y),F=s(w),D=s(S),k=s(B),O=s(M),V=O/R||0,H=1e3/R||0,U=4,N=12,G=60,K=34,$=10,z=69;h.fillStyle="#0e0f19",h.fillRect(0,50,N*4+G*5+22,K),e.status(h,$,z,G,U,y.length,Math.round(H)+" fps",H/e._goodFps,function(Q){return y[Q]/R-1}),e.status(h,$+N+G,z,G,U,S.length,E.toFixed(2)+" dt",e._goodDelta/E,function(Q){return S[Q]/D-1}),e.status(h,$+(N+G)*2,z,G,U,B.length,k.toFixed(2)+" ut",1-k/e._goodFps,function(Q){return B[Q]/k-1}),e.status(h,$+(N+G)*3,z,G,U,w.length,F.toFixed(2)+" rt",1-F/e._goodFps,function(Q){return w[Q]/F-1}),e.status(h,$+(N+G)*4,z,G,U,M.length,V.toFixed(2)+" x",V*V*V,function(Q){return(M[Q]/y[Q]/V||0)-1})},e.status=function(c,h,p,x,y,w,M,S,B){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(h,p+7,x,1),c.beginPath(),c.moveTo(h,p+7-y*l.clamp(.4*B(0),-2,2));for(var E=0;E<x;E+=1)c.lineTo(h+E,p+7-(E<w?y*l.clamp(.4*B(E),-2,2):0));c.stroke(),c.fillStyle="hsl("+l.clamp(25+95*S,0,120)+",100%,60%)",c.fillRect(h,p-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(M,h+x,p-5)},e.constraints=function(c,h){for(var p=h,x=0;x<c.length;x++){var y=c[x];if(!(!y.render.visible||!y.pointA||!y.pointB)){var w=y.bodyA,M=y.bodyB,S,B;if(w?S=o.add(w.position,y.pointA):S=y.pointA,y.render.type==="pin")p.beginPath(),p.arc(S.x,S.y,3,0,2*Math.PI),p.closePath();else{if(M?B=o.add(M.position,y.pointB):B=y.pointB,p.beginPath(),p.moveTo(S.x,S.y),y.render.type==="spring")for(var E=o.sub(B,S),R=o.perp(o.normalise(E)),F=Math.ceil(l.clamp(y.length/5,12,20)),D,k=1;k<F;k+=1)D=k%2==0?1:-1,p.lineTo(S.x+E.x*(k/F)+R.x*D*4,S.y+E.y*(k/F)+R.y*D*4);p.lineTo(B.x,B.y)}y.render.lineWidth&&(p.lineWidth=y.render.lineWidth,p.strokeStyle=y.render.strokeStyle,p.stroke()),y.render.anchors&&(p.fillStyle=y.render.strokeStyle,p.beginPath(),p.arc(S.x,S.y,3,0,2*Math.PI),p.arc(B.x,B.y,3,0,2*Math.PI),p.closePath(),p.fill())}}},e.bodies=function(c,h,p){var x=p;c.engine;var y=c.options,w=y.showInternalEdges||!y.wireframes,M,S,B,E;for(B=0;B<h.length;B++)if(M=h[B],!!M.render.visible){for(E=M.parts.length>1?1:0;E<M.parts.length;E++)if(S=M.parts[E],!!S.render.visible){if(y.showSleeping&&M.isSleeping?x.globalAlpha=.5*S.render.opacity:S.render.opacity!==1&&(x.globalAlpha=S.render.opacity),S.render.sprite&&S.render.sprite.texture&&!y.wireframes){var R=S.render.sprite,F=C(c,R.texture);x.translate(S.position.x,S.position.y),x.rotate(S.angle),x.drawImage(F,F.width*-R.xOffset*R.xScale,F.height*-R.yOffset*R.yScale,F.width*R.xScale,F.height*R.yScale),x.rotate(-S.angle),x.translate(-S.position.x,-S.position.y)}else{if(S.circleRadius)x.beginPath(),x.arc(S.position.x,S.position.y,S.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(S.vertices[0].x,S.vertices[0].y);for(var D=1;D<S.vertices.length;D++)!S.vertices[D-1].isInternal||w?x.lineTo(S.vertices[D].x,S.vertices[D].y):x.moveTo(S.vertices[D].x,S.vertices[D].y),S.vertices[D].isInternal&&!w&&x.moveTo(S.vertices[(D+1)%S.vertices.length].x,S.vertices[(D+1)%S.vertices.length].y);x.lineTo(S.vertices[0].x,S.vertices[0].y),x.closePath()}y.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=S.render.fillStyle,S.render.lineWidth&&(x.lineWidth=S.render.lineWidth,x.strokeStyle=S.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},e.bodyWireframes=function(c,h,p){var x=p,y=c.options.showInternalEdges,w,M,S,B,E;for(x.beginPath(),S=0;S<h.length;S++)if(w=h[S],!!w.render.visible)for(E=w.parts.length>1?1:0;E<w.parts.length;E++){for(M=w.parts[E],x.moveTo(M.vertices[0].x,M.vertices[0].y),B=1;B<M.vertices.length;B++)!M.vertices[B-1].isInternal||y?x.lineTo(M.vertices[B].x,M.vertices[B].y):x.moveTo(M.vertices[B].x,M.vertices[B].y),M.vertices[B].isInternal&&!y&&x.moveTo(M.vertices[(B+1)%M.vertices.length].x,M.vertices[(B+1)%M.vertices.length].y);x.lineTo(M.vertices[0].x,M.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},e.bodyConvexHulls=function(c,h,p){var x=p,y,w,M;for(x.beginPath(),w=0;w<h.length;w++)if(y=h[w],!(!y.render.visible||y.parts.length===1)){for(x.moveTo(y.vertices[0].x,y.vertices[0].y),M=1;M<y.vertices.length;M++)x.lineTo(y.vertices[M].x,y.vertices[M].y);x.lineTo(y.vertices[0].x,y.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},e.vertexNumbers=function(c,h,p){var x=p,y,w,M;for(y=0;y<h.length;y++){var S=h[y].parts;for(M=S.length>1?1:0;M<S.length;M++){var B=S[M];for(w=0;w<B.vertices.length;w++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(y+"_"+w,B.position.x+(B.vertices[w].x-B.position.x)*.8,B.position.y+(B.vertices[w].y-B.position.y)*.8)}}},e.mousePosition=function(c,h,p){var x=p;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(h.position.x+"  "+h.position.y,h.position.x+5,h.position.y-5)},e.bodyBounds=function(c,h,p){var x=p;c.engine;var y=c.options;x.beginPath();for(var w=0;w<h.length;w++){var M=h[w];if(M.render.visible)for(var S=h[w].parts,B=S.length>1?1:0;B<S.length;B++){var E=S[B];x.rect(E.bounds.min.x,E.bounds.min.y,E.bounds.max.x-E.bounds.min.x,E.bounds.max.y-E.bounds.min.y)}}y.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},e.bodyAxes=function(c,h,p){var x=p;c.engine;var y=c.options,w,M,S,B;for(x.beginPath(),M=0;M<h.length;M++){var E=h[M],R=E.parts;if(!!E.render.visible)if(y.showAxes)for(S=R.length>1?1:0;S<R.length;S++)for(w=R[S],B=0;B<w.axes.length;B++){var F=w.axes[B];x.moveTo(w.position.x,w.position.y),x.lineTo(w.position.x+F.x*20,w.position.y+F.y*20)}else for(S=R.length>1?1:0;S<R.length;S++)for(w=R[S],B=0;B<w.axes.length;B++)x.moveTo(w.position.x,w.position.y),x.lineTo((w.vertices[0].x+w.vertices[w.vertices.length-1].x)/2,(w.vertices[0].y+w.vertices[w.vertices.length-1].y)/2)}y.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},e.bodyPositions=function(c,h,p){var x=p;c.engine;var y=c.options,w,M,S,B;for(x.beginPath(),S=0;S<h.length;S++)if(w=h[S],!!w.render.visible)for(B=0;B<w.parts.length;B++)M=w.parts[B],x.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),x.closePath();for(y.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),S=0;S<h.length;S++)w=h[S],w.render.visible&&(x.arc(w.positionPrev.x,w.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},e.bodyVelocity=function(c,h,p){var x=p;x.beginPath();for(var y=0;y<h.length;y++){var w=h[y];!w.render.visible||(x.moveTo(w.position.x,w.position.y),x.lineTo(w.position.x+(w.position.x-w.positionPrev.x)*2,w.position.y+(w.position.y-w.positionPrev.y)*2))}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},e.bodyIds=function(c,h,p){var x=p,y,w;for(y=0;y<h.length;y++)if(!!h[y].render.visible){var M=h[y].parts;for(w=M.length>1?1:0;w<M.length;w++){var S=M[w];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(S.id,S.position.x+10,S.position.y-10)}}},e.collisions=function(c,h,p){var x=p,y=c.options,w,M,S,B;for(x.beginPath(),S=0;S<h.length;S++)if(w=h[S],!!w.isActive)for(M=w.collision,B=0;B<w.activeContacts.length;B++){var E=w.activeContacts[B],R=E.vertex;x.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(y.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),S=0;S<h.length;S++)if(w=h[S],!!w.isActive&&(M=w.collision,w.activeContacts.length>0)){var F=w.activeContacts[0].vertex.x,D=w.activeContacts[0].vertex.y;w.activeContacts.length===2&&(F=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,D=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic===!0?x.moveTo(F-M.normal.x*8,D-M.normal.y*8):x.moveTo(F+M.normal.x*8,D+M.normal.y*8),x.lineTo(F,D)}y.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},e.separations=function(c,h,p){var x=p,y=c.options,w,M,S,B,E;for(x.beginPath(),E=0;E<h.length;E++)if(w=h[E],!!w.isActive){M=w.collision,S=M.bodyA,B=M.bodyB;var R=1;!B.isStatic&&!S.isStatic&&(R=.5),B.isStatic&&(R=0),x.moveTo(B.position.x,B.position.y),x.lineTo(B.position.x-M.penetration.x*R,B.position.y-M.penetration.y*R),R=1,!B.isStatic&&!S.isStatic&&(R=.5),S.isStatic&&(R=0),x.moveTo(S.position.x,S.position.y),x.lineTo(S.position.x+M.penetration.x*R,S.position.y+M.penetration.y*R)}y.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},e.inspector=function(c,h){c.engine;var p=c.selected,x=c.render,y=x.options,w;if(y.hasBounds){var M=x.bounds.max.x-x.bounds.min.x,S=x.bounds.max.y-x.bounds.min.y,B=M/x.options.width,E=S/x.options.height;h.scale(1/B,1/E),h.translate(-x.bounds.min.x,-x.bounds.min.y)}for(var R=0;R<p.length;R++){var F=p[R].data;switch(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.9)",h.setLineDash([1,2]),F.type){case"body":w=F.bounds,h.beginPath(),h.rect(Math.floor(w.min.x-3),Math.floor(w.min.y-3),Math.floor(w.max.x-w.min.x+6),Math.floor(w.max.y-w.min.y+6)),h.closePath(),h.stroke();break;case"constraint":var D=F.pointA;F.bodyA&&(D=F.pointB),h.beginPath(),h.arc(D.x,D.y,10,0,2*Math.PI),h.closePath(),h.stroke();break}h.setLineDash([]),h.translate(-.5,-.5)}c.selectStart!==null&&(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.6)",h.fillStyle="rgba(255,165,0,0.1)",w=c.selectBounds,h.beginPath(),h.rect(Math.floor(w.min.x),Math.floor(w.min.y),Math.floor(w.max.x-w.min.x),Math.floor(w.max.y-w.min.y)),h.closePath(),h.stroke(),h.fill(),h.translate(-.5,-.5)),y.hasBounds&&h.setTransform(1,0,0,1,0,0)};var i=function(c,h){var p=c.engine,x=c.timing,y=x.historySize,w=p.timing.timestamp;x.delta=h-x.lastTime||e._goodDelta,x.lastTime=h,x.timestampElapsed=w-x.lastTimestamp||0,x.lastTimestamp=w,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,y),x.engineDeltaHistory.unshift(p.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,y),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,y),x.engineElapsedHistory.unshift(p.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,y),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,y)},s=function(c){for(var h=0,p=0;p<c.length;p+=1)h+=c[p];return h/c.length||0},v=function(c,h){var p=document.createElement("canvas");return p.width=c,p.height=h,p.oncontextmenu=function(){return!1},p.onselectstart=function(){return!1},p},d=function(c){var h=c.getContext("2d"),p=window.devicePixelRatio||1,x=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return p/x},C=function(c,h){var p=c.textures[h];return p||(p=c.textures[h]=new Image,p.src=h,p)},m=function(c,h){var p=h;/(jpg|gif|png)$/.test(h)&&(p="url("+h+")"),c.canvas.style.background=p,c.canvas.style.backgroundSize="contain",c.currentBackground=h}})()},function(P,T){var g={};P.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(P,T,g){var e={};P.exports=e;var l=g(7),r=g(19),n=g(14),u=g(20),o=g(4),f=g(5),a=g(10),t=g(0),i=g(6);(function(){e.create=function(s){s=s||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(v,s);return d.world=s.world||f.create({label:"World"}),d.pairs=s.pairs||u.create(),d.detector=s.detector||n.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(s,v,d){var C=t.now();v=v||1e3/60,d=d||1;var m=s.world,c=s.detector,h=s.pairs,p=s.timing,x=p.timestamp,y;p.timestamp+=v*p.timeScale,p.lastDelta=v*p.timeScale;var w={timestamp:p.timestamp};o.trigger(s,"beforeUpdate",w);var M=f.allBodies(m),S=f.allConstraints(m);for(m.isModified&&n.setBodies(c,M),m.isModified&&f.setModified(m,!1,!1,!0),s.enableSleeping&&l.update(M,p.timeScale),e._bodiesApplyGravity(M,s.gravity),e._bodiesUpdate(M,v,p.timeScale,d,m.bounds),a.preSolveAll(M),y=0;y<s.constraintIterations;y++)a.solveAll(S,p.timeScale);a.postSolveAll(M),c.pairs=s.pairs;var B=n.collisions(c);for(u.update(h,B,x),s.enableSleeping&&l.afterCollisions(h.list,p.timeScale),h.collisionStart.length>0&&o.trigger(s,"collisionStart",{pairs:h.collisionStart}),r.preSolvePosition(h.list),y=0;y<s.positionIterations;y++)r.solvePosition(h.list,p.timeScale);for(r.postSolvePosition(M),a.preSolveAll(M),y=0;y<s.constraintIterations;y++)a.solveAll(S,p.timeScale);for(a.postSolveAll(M),r.preSolveVelocity(h.list),y=0;y<s.velocityIterations;y++)r.solveVelocity(h.list,p.timeScale);return h.collisionActive.length>0&&o.trigger(s,"collisionActive",{pairs:h.collisionActive}),h.collisionEnd.length>0&&o.trigger(s,"collisionEnd",{pairs:h.collisionEnd}),e._bodiesClearForces(M),o.trigger(s,"afterUpdate",w),s.timing.lastElapsed=t.now()-C,s},e.merge=function(s,v){if(t.extend(s,v),v.world){s.world=v.world,e.clear(s);for(var d=f.allBodies(s.world),C=0;C<d.length;C++){var m=d[C];l.set(m,!1),m.id=t.nextId()}}},e.clear=function(s){u.clear(s.pairs),n.clear(s.detector)},e._bodiesClearForces=function(s){for(var v=0;v<s.length;v++){var d=s[v];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(s,v){var d=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||d===0))for(var C=0;C<s.length;C++){var m=s[C];m.isStatic||m.isSleeping||(m.force.y+=m.mass*v.y*d,m.force.x+=m.mass*v.x*d)}},e._bodiesUpdate=function(s,v,d,C,m){for(var c=0;c<s.length;c++){var h=s[c];h.isStatic||h.isSleeping||i.update(h,v,d,C)}}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var u,o,f,a=n.length;for(u=0;u<a;u++)o=n[u],!!o.isActive&&(f=o.activeContacts.length,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,u){var o,f,a,t,i,s,v,d,C=e._positionDampen,m=n.length;for(o=0;o<m;o++)f=n[o],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,i=a.parentB,s=a.normal,f.separation=s.x*(i.positionImpulse.x+a.penetration.x-t.positionImpulse.x)+s.y*(i.positionImpulse.y+a.penetration.y-t.positionImpulse.y));for(o=0;o<m;o++)f=n[o],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,i=a.parentB,s=a.normal,d=(f.separation-f.slop)*u,(t.isStatic||i.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(v=C/t.totalContacts,t.positionImpulse.x+=s.x*d*v,t.positionImpulse.y+=s.y*d*v),i.isStatic||i.isSleeping||(v=C/i.totalContacts,i.positionImpulse.x-=s.x*d*v,i.positionImpulse.y-=s.y*d*v))},e.postSolvePosition=function(n){for(var u=e._positionWarming,o=n.length,f=l.translate,a=r.update,t=0;t<o;t++){var i=n[t],s=i.positionImpulse,v=s.x,d=s.y,C=i.velocity;if(i.totalContacts=0,v!==0||d!==0){for(var m=0;m<i.parts.length;m++){var c=i.parts[m];f(c.vertices,s),a(c.bounds,c.vertices,C),c.position.x+=v,c.position.y+=d}i.positionPrev.x+=v,i.positionPrev.y+=d,v*C.x+d*C.y<0?(s.x=0,s.y=0):(s.x*=u,s.y*=u)}}},e.preSolveVelocity=function(n){var u=n.length,o,f;for(o=0;o<u;o++){var a=n[o];if(!(!a.isActive||a.isSensor)){var t=a.activeContacts,i=t.length,s=a.collision,v=s.parentA,d=s.parentB,C=s.normal,m=s.tangent;for(f=0;f<i;f++){var c=t[f],h=c.vertex,p=c.normalImpulse,x=c.tangentImpulse;if(p!==0||x!==0){var y=C.x*p+m.x*x,w=C.y*p+m.y*x;v.isStatic||v.isSleeping||(v.positionPrev.x+=y*v.inverseMass,v.positionPrev.y+=w*v.inverseMass,v.anglePrev+=v.inverseInertia*((h.x-v.position.x)*w-(h.y-v.position.y)*y)),d.isStatic||d.isSleeping||(d.positionPrev.x-=y*d.inverseMass,d.positionPrev.y-=w*d.inverseMass,d.anglePrev-=d.inverseInertia*((h.x-d.position.x)*w-(h.y-d.position.y)*y))}}}}},e.solveVelocity=function(n,u){var o=u*u,f=e._restingThresh*o,a=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,i=Number.MAX_VALUE,s=n.length,v,d,C,m;for(C=0;C<s;C++){var c=n[C];if(!(!c.isActive||c.isSensor)){var h=c.collision,p=h.parentA,x=h.parentB,y=p.velocity,w=x.velocity,M=h.normal.x,S=h.normal.y,B=h.tangent.x,E=h.tangent.y,R=c.activeContacts,F=R.length,D=1/F,k=p.inverseMass+x.inverseMass,O=c.friction*c.frictionStatic*a*o;for(y.x=p.position.x-p.positionPrev.x,y.y=p.position.y-p.positionPrev.y,w.x=x.position.x-x.positionPrev.x,w.y=x.position.y-x.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,x.angularVelocity=x.angle-x.anglePrev,m=0;m<F;m++){var V=R[m],H=V.vertex,U=H.x-p.position.x,N=H.y-p.position.y,G=H.x-x.position.x,K=H.y-x.position.y,$=y.x-N*p.angularVelocity,z=y.y+U*p.angularVelocity,Q=w.x-K*x.angularVelocity,Ae=w.y+G*x.angularVelocity,ue=$-Q,ce=z-Ae,X=M*ue+S*ce,J=B*ue+E*ce,ve=c.separation+X,ae=Math.min(ve,1);ae=ve<0?0:ae;var he=ae*O;J>he||-J>he?(d=J>0?J:-J,v=c.friction*(J>0?1:-1)*o,v<-d?v=-d:v>d&&(v=d)):(v=J,d=i);var ge=U*S-N*M,xe=G*S-K*M,pe=D/(k+p.inverseInertia*ge*ge+x.inverseInertia*xe*xe),_=(1+c.restitution)*X*pe;if(v*=pe,X*X>f&&X<0)V.normalImpulse=0;else{var Ie=V.normalImpulse;V.normalImpulse+=_,V.normalImpulse=Math.min(V.normalImpulse,0),_=V.normalImpulse-Ie}if(J*J>t)V.tangentImpulse=0;else{var Be=V.tangentImpulse;V.tangentImpulse+=v,V.tangentImpulse<-d&&(V.tangentImpulse=-d),V.tangentImpulse>d&&(V.tangentImpulse=d),v=V.tangentImpulse-Be}var ee=M*_+B*v,te=S*_+E*v;p.isStatic||p.isSleeping||(p.positionPrev.x+=ee*p.inverseMass,p.positionPrev.y+=te*p.inverseMass,p.anglePrev+=(U*te-N*ee)*p.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=ee*x.inverseMass,x.positionPrev.y-=te*x.inverseMass,x.anglePrev-=(G*te-K*ee)*x.inverseInertia)}}}}})()},function(P,T,g){var e={};P.exports=e;var l=g(9),r=g(0);(function(){e.create=function(n){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,u,o){var f=n.list,a=f.length,t=n.table,i=u.length,s=n.collisionStart,v=n.collisionEnd,d=n.collisionActive,C,m,c,h;for(s.length=0,v.length=0,d.length=0,h=0;h<a;h++)f[h].confirmedActive=!1;for(h=0;h<i;h++)C=u[h],c=C.pair,c?(c.isActive?d.push(c):s.push(c),l.update(c,C,o),c.confirmedActive=!0):(c=l.create(C,o),t[c.id]=c,s.push(c),f.push(c));var p=[];for(a=f.length,h=0;h<a;h++)c=f[h],c.confirmedActive||(l.setActive(c,!1,o),v.push(c),!c.collision.bodyA.isSleeping&&!c.collision.bodyB.isSleeping&&p.push(h));for(h=0;h<p.length;h++)m=p[h]-h,c=f[m],f.splice(m,1),delete t[c.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(P,T,g){var e=P.exports=g(22);e.Axes=g(11),e.Bodies=g(12),e.Body=g(6),e.Bounds=g(1),e.Collision=g(8),e.Common=g(0),e.Composite=g(5),e.Composites=g(23),e.Constraint=g(10),e.Contact=g(17),e.Detector=g(14),e.Engine=g(18),e.Events=g(4),e.Grid=g(24),e.Mouse=g(13),e.MouseConstraint=g(25),e.Pair=g(9),e.Pairs=g(20),e.Plugin=g(15),e.Query=g(26),e.Render=g(16),e.Resolver=g(19),e.Runner=g(27),e.SAT=g(28),e.Sleeping=g(7),e.Svg=g(29),e.Vector=g(2),e.Vertices=g(3),e.World=g(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(P,T,g){var e={};P.exports=e;var l=g(15),r=g(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,u){return n=n.replace(/^Matter./,""),r.chainPathBefore(e,n,u)},e.after=function(n,u){return n=n.replace(/^Matter./,""),r.chainPathAfter(e,n,u)}})()},function(P,T,g){var e={};P.exports=e;var l=g(5),r=g(10),n=g(0),u=g(6),o=g(12),f=n.deprecated;(function(){e.stack=function(a,t,i,s,v,d,C){for(var m=l.create({label:"Stack"}),c=a,h=t,p,x=0,y=0;y<s;y++){for(var w=0,M=0;M<i;M++){var S=C(c,h,M,y,p,x);if(S){var B=S.bounds.max.y-S.bounds.min.y,E=S.bounds.max.x-S.bounds.min.x;B>w&&(w=B),u.translate(S,{x:E*.5,y:B*.5}),c=S.bounds.max.x+v,l.addBody(m,S),p=S,x+=1}else c+=v}h+=w+d,c=a}return m},e.chain=function(a,t,i,s,v,d){for(var C=a.bodies,m=1;m<C.length;m++){var c=C[m-1],h=C[m],p=c.bounds.max.y-c.bounds.min.y,x=c.bounds.max.x-c.bounds.min.x,y=h.bounds.max.y-h.bounds.min.y,w=h.bounds.max.x-h.bounds.min.x,M={bodyA:c,pointA:{x:x*t,y:p*i},bodyB:h,pointB:{x:w*s,y:y*v}},S=n.extend(M,d);l.addConstraint(a,r.create(S))}return a.label+=" Chain",a},e.mesh=function(a,t,i,s,v){var d=a.bodies,C,m,c,h,p;for(C=0;C<i;C++){for(m=1;m<t;m++)c=d[m-1+C*t],h=d[m+C*t],l.addConstraint(a,r.create(n.extend({bodyA:c,bodyB:h},v)));if(C>0)for(m=0;m<t;m++)c=d[m+(C-1)*t],h=d[m+C*t],l.addConstraint(a,r.create(n.extend({bodyA:c,bodyB:h},v))),s&&m>0&&(p=d[m-1+(C-1)*t],l.addConstraint(a,r.create(n.extend({bodyA:p,bodyB:h},v)))),s&&m<t-1&&(p=d[m+1+(C-1)*t],l.addConstraint(a,r.create(n.extend({bodyA:p,bodyB:h},v))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,i,s,v,d,C){return e.stack(a,t,i,s,v,d,function(m,c,h,p,x,y){var w=Math.min(s,Math.ceil(i/2)),M=x?x.bounds.max.x-x.bounds.min.x:0;if(!(p>w)){p=w-p;var S=p,B=i-1-p;if(!(h<S||h>B)){y===1&&u.translate(x,{x:(h+(i%2==1?1:-1))*M,y:0});var E=x?h*M:0;return C(a+E+h*v,c,h,p,x,y)}}})},e.newtonsCradle=function(a,t,i,s,v){for(var d=l.create({label:"Newtons Cradle"}),C=0;C<i;C++){var m=1.9,c=o.circle(a+C*(s*m),t+v,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=r.create({pointA:{x:a+C*(s*m),y:t},bodyB:c});l.addBody(d,c),l.addConstraint(d,h)}return d},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,i,s,v){var d=u.nextGroup(!0),C=20,m=-i*.5+C,c=i*.5-C,h=0,p=l.create({label:"Car"}),x=o.rectangle(a,t,i,s,{collisionFilter:{group:d},chamfer:{radius:s*.5},density:2e-4}),y=o.circle(a+m,t+h,v,{collisionFilter:{group:d},friction:.8}),w=o.circle(a+c,t+h,v,{collisionFilter:{group:d},friction:.8}),M=r.create({bodyB:x,pointB:{x:m,y:h},bodyA:y,stiffness:1,length:0}),S=r.create({bodyB:x,pointB:{x:c,y:h},bodyA:w,stiffness:1,length:0});return l.addBody(p,x),l.addBody(p,y),l.addBody(p,w),l.addConstraint(p,M),l.addConstraint(p,S),p},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,i,s,v,d,C,m,c,h){c=n.extend({inertia:1/0},c),h=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},h);var p=e.stack(a,t,i,s,v,d,function(x,y){return o.circle(x,y,m,c)});return e.mesh(p,i,s,C,h),p.label="Soft Body",p},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(P,T,g){var e={};P.exports=e;var l=g(9),r=g(0),n=r.deprecated;(function(){e.create=function(u){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(o,u)},e.update=function(u,o,f,a){var t,i,s,v=f.world,d=u.buckets,C,m,c=!1;for(t=0;t<o.length;t++){var h=o[t];if(!(h.isSleeping&&!a)&&!(v.bounds&&(h.bounds.max.x<v.bounds.min.x||h.bounds.min.x>v.bounds.max.x||h.bounds.max.y<v.bounds.min.y||h.bounds.min.y>v.bounds.max.y))){var p=e._getRegion(u,h);if(!h.region||p.id!==h.region.id||a){(!h.region||a)&&(h.region=p);var x=e._regionUnion(p,h.region);for(i=x.startCol;i<=x.endCol;i++)for(s=x.startRow;s<=x.endRow;s++){m=e._getBucketId(i,s),C=d[m];var y=i>=p.startCol&&i<=p.endCol&&s>=p.startRow&&s<=p.endRow,w=i>=h.region.startCol&&i<=h.region.endCol&&s>=h.region.startRow&&s<=h.region.endRow;!y&&w&&w&&C&&e._bucketRemoveBody(u,C,h),(h.region===p||y&&!w||a)&&(C||(C=e._createBucket(d,m)),e._bucketAddBody(u,C,h))}h.region=p,c=!0}}}c&&(u.pairsList=e._createActivePairsList(u))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,o){var f=Math.min(u.startCol,o.startCol),a=Math.max(u.endCol,o.endCol),t=Math.min(u.startRow,o.startRow),i=Math.max(u.endRow,o.endRow);return e._createRegion(f,a,t,i)},e._getRegion=function(u,o){var f=o.bounds,a=Math.floor(f.min.x/u.bucketWidth),t=Math.floor(f.max.x/u.bucketWidth),i=Math.floor(f.min.y/u.bucketHeight),s=Math.floor(f.max.y/u.bucketHeight);return e._createRegion(a,t,i,s)},e._createRegion=function(u,o,f,a){return{id:u+","+o+","+f+","+a,startCol:u,endCol:o,startRow:f,endRow:a}},e._getBucketId=function(u,o){return"C"+u+"R"+o},e._createBucket=function(u,o){var f=u[o]=[];return f},e._bucketAddBody=function(u,o,f){var a=u.pairs,t=l.id,i=o.length,s;for(s=0;s<i;s++){var v=o[s];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var d=t(f,v),C=a[d];C?C[2]+=1:a[d]=[f,v,1]}}o.push(f)},e._bucketRemoveBody=function(u,o,f){var a=u.pairs,t=l.id,i;o.splice(r.indexOf(o,f),1);var s=o.length;for(i=0;i<s;i++){var v=a[t(f,o[i])];v&&(v[2]-=1)}},e._createActivePairsList=function(u){var o,f=u.pairs,a=r.keys(f),t=a.length,i=[],s;for(s=0;s<t;s++)o=f[a[s]],o[2]>0?i.push(o):delete f[a[s]];return i}})()},function(P,T,g){var e={};P.exports=e;var l=g(3),r=g(7),n=g(13),u=g(4),o=g(14),f=g(10),a=g(5),t=g(0),i=g(1);(function(){e.create=function(s,v){var d=(s?s.mouse:null)||(v?v.mouse:null);d||(s&&s.render&&s.render.canvas?d=n.create(s.render.canvas):v&&v.element?d=n.create(v.element):(d=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),m={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},c=t.extend(m,v);return u.on(s,"beforeUpdate",function(){var h=a.allBodies(s.world);e.update(c,h),e._triggerEvents(c)}),c},e.update=function(s,v){var d=s.mouse,C=s.constraint,m=s.body;if(d.button===0){if(C.bodyB)r.set(C.bodyB,!1),C.pointA=d.position;else for(var c=0;c<v.length;c++)if(m=v[c],i.contains(m.bounds,d.position)&&o.canCollide(m.collisionFilter,s.collisionFilter))for(var h=m.parts.length>1?1:0;h<m.parts.length;h++){var p=m.parts[h];if(l.contains(p.vertices,d.position)){C.pointA=d.position,C.bodyB=s.body=m,C.pointB={x:d.position.x-m.position.x,y:d.position.y-m.position.y},C.angleB=m.angle,r.set(m,!1),u.trigger(s,"startdrag",{mouse:d,body:m});break}}}else C.bodyB=s.body=null,C.pointB=null,m&&u.trigger(s,"enddrag",{mouse:d,body:m})},e._triggerEvents=function(s){var v=s.mouse,d=v.sourceEvents;d.mousemove&&u.trigger(s,"mousemove",{mouse:v}),d.mousedown&&u.trigger(s,"mousedown",{mouse:v}),d.mouseup&&u.trigger(s,"mouseup",{mouse:v}),n.clearSourceEvents(v)}})()},function(P,T,g){var e={};P.exports=e;var l=g(2),r=g(8),n=g(1),u=g(12),o=g(3);(function(){e.collides=function(f,a){for(var t=[],i=a.length,s=f.bounds,v=r.collides,d=n.overlaps,C=0;C<i;C++){var m=a[C],c=m.parts.length,h=c===1?0:1;if(d(m.bounds,s))for(var p=h;p<c;p++){var x=m.parts[p];if(d(x.bounds,s)){var y=v(x,f);if(y){t.push(y);break}}}}return t},e.ray=function(f,a,t,i){i=i||1e-100;for(var s=l.angle(a,t),v=l.magnitude(l.sub(a,t)),d=(t.x+a.x)*.5,C=(t.y+a.y)*.5,m=u.rectangle(d,C,v,i,{angle:s}),c=e.collides(m,f),h=0;h<c.length;h+=1){var p=c[h];p.body=p.bodyB=p.bodyA}return c},e.region=function(f,a,t){for(var i=[],s=0;s<f.length;s++){var v=f[s],d=n.overlaps(v.bounds,a);(d&&!t||!d&&t)&&i.push(v)}return i},e.point=function(f,a){for(var t=[],i=0;i<f.length;i++){var s=f[i];if(n.contains(s.bounds,a))for(var v=s.parts.length===1?0:1;v<s.parts.length;v++){var d=s.parts[v];if(n.contains(d.bounds,a)&&o.contains(d.vertices,a)){t.push(s);break}}}return t}})()},function(P,T,g){var e={};P.exports=e;var l=g(4),r=g(18),n=g(0);(function(){var u,o;if(typeof window!="undefined"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!u){var f;u=function(a){f=setTimeout(function(){a(n.now())},1e3/60)},o=function(){clearTimeout(f)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},i=n.extend(t,a);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(i.fps*.5),i.fps=1e3/i.delta,i},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function i(s){a.frameRequestId=u(i),s&&a.enabled&&e.tick(a,t,s)}(),a},e.tick=function(a,t,i){var s=t.timing,v=1,d,C={timestamp:s.timestamp};l.trigger(a,"beforeTick",C),a.isFixed?d=a.delta:(d=i-a.timePrev||a.delta,a.timePrev=i,a.deltaHistory.push(d),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),d=Math.min.apply(null,a.deltaHistory),d=d<a.deltaMin?a.deltaMin:d,d=d>a.deltaMax?a.deltaMax:d,v=d/a.delta,a.delta=d),a.timeScalePrev!==0&&(v*=s.timeScale/a.timeScalePrev),s.timeScale===0&&(v=0),a.timeScalePrev=s.timeScale,a.correction=v,a.frameCounter+=1,i-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((i-a.counterTimestamp)/1e3),a.counterTimestamp=i,a.frameCounter=0),l.trigger(a,"tick",C),l.trigger(a,"beforeUpdate",C),r.update(t,d,v),l.trigger(a,"afterUpdate",C),l.trigger(a,"afterTick",C)},e.stop=function(a){o(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(P,T,g){var e={};P.exports=e;var l=g(8),r=g(0),n=r.deprecated;(function(){e.collides=function(u,o){return l.collides(u,o)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(P,T,g){var e={};P.exports=e,g(1);var l=g(0);(function(){e.pathToVertices=function(r,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,o,f,a,t,i,s,v,d,C,m=[],c,h,p=0,x=0,y=0;n=n||15;var w=function(S,B,E){var R=E%2==1&&E>1;if(!d||S!=d.x||B!=d.y){d&&R?(c=d.x,h=d.y):(c=0,h=0);var F={x:c+S,y:h+B};(R||!d)&&(d=F),m.push(F),x=c+S,y=h+B}},M=function(S){var B=S.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":x=S.x,y=S.y;break;case"H":x=S.x;break;case"V":y=S.y;break}w(x,y,S.pathSegType)}};for(e._svgPathToAbsolute(r),f=r.getTotalLength(),i=[],u=0;u<r.pathSegList.numberOfItems;u+=1)i.push(r.pathSegList.getItem(u));for(s=i.concat();p<f;){if(C=r.getPathSegAtLength(p),t=i[C],t!=v){for(;s.length&&s[0]!=t;)M(s.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=r.getPointAtLength(p),w(a.x,a.y,0);break}p+=n}for(u=0,o=s.length;u<o;++u)M(s[u]);return m},e._svgPathToAbsolute=function(r){for(var n,u,o,f,a,t,i=r.pathSegList,s=0,v=0,d=i.numberOfItems,C=0;C<d;++C){var m=i.getItem(C),c=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(c))"x"in m&&(s=m.x),"y"in m&&(v=m.y);else switch("x1"in m&&(o=s+m.x1),"x2"in m&&(a=s+m.x2),"y1"in m&&(f=v+m.y1),"y2"in m&&(t=v+m.y2),"x"in m&&(s+=m.x),"y"in m&&(v+=m.y),c){case"m":i.replaceItem(r.createSVGPathSegMovetoAbs(s,v),C);break;case"l":i.replaceItem(r.createSVGPathSegLinetoAbs(s,v),C);break;case"h":i.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(s),C);break;case"v":i.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),C);break;case"c":i.replaceItem(r.createSVGPathSegCurvetoCubicAbs(s,v,o,f,a,t),C);break;case"s":i.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(s,v,a,t),C);break;case"q":i.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(s,v,o,f),C);break;case"t":i.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(s,v),C);break;case"a":i.replaceItem(r.createSVGPathSegArcAbs(s,v,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),C);break;case"z":case"Z":s=n,v=u;break}(c=="M"||c=="m")&&(n=s,u=v)}}})()},function(P,T,g){var e={};P.exports=e;var l=g(5);g(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(W);var Ee={decomp:Ne,quickDecomp:b,isSimple:$e,removeCollinearPoints:ze,removeDuplicatePoints:Qe,makeCCW:ke};function Re(A,I,P){P=P||0;var T=[0,0],g,e,l,r,n,u,o;return g=A[1][1]-A[0][1],e=A[0][0]-A[1][0],l=g*A[0][0]+e*A[0][1],r=I[1][1]-I[0][1],n=I[0][0]-I[1][0],u=r*I[0][0]+n*I[0][1],o=g*n-r*e,re(o,0,P)||(T[0]=(n*l-e*u)/o,T[1]=(g*u-r*l)/o),T}function oe(A,I,P,T){var g=I[0]-A[0],e=I[1]-A[1],l=T[0]-P[0],r=T[1]-P[1];if(l*e-r*g==0)return!1;var n=(g*(P[1]-A[1])+e*(A[0]-P[0]))/(l*e-r*g),u=(l*(A[1]-P[1])+r*(P[0]-A[0]))/(r*g-l*e);return n>=0&&n<=1&&u>=0&&u<=1}function Y(A,I,P){return(I[0]-A[0])*(P[1]-A[1])-(P[0]-A[0])*(I[1]-A[1])}function ne(A,I,P){return Y(A,I,P)>0}function le(A,I,P){return Y(A,I,P)>=0}function we(A,I,P){return Y(A,I,P)<0}function j(A,I,P){return Y(A,I,P)<=0}var Le=[],Fe=[];function De(A,I,P,T){if(T){var g=Le,e=Fe;g[0]=I[0]-A[0],g[1]=I[1]-A[1],e[0]=P[0]-I[0],e[1]=P[1]-I[1];var l=g[0]*e[0]+g[1]*e[1],r=Math.sqrt(g[0]*g[0]+g[1]*g[1]),n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),u=Math.acos(l/(r*n));return u<T}else return Y(A,I,P)===0}function q(A,I){var P=I[0]-A[0],T=I[1]-A[1];return P*P+T*T}function L(A,I){var P=A.length;return A[I<0?I%P+P:I%P]}function We(A){A.length=0}function Z(A,I,P,T){for(var g=P;g<T;g++)A.push(I[g])}function ke(A){for(var I=0,P=A,T=1;T<A.length;++T)(P[T][1]<P[I][1]||P[T][1]===P[I][1]&&P[T][0]>P[I][0])&&(I=T);return ne(L(A,I-1),L(A,I),L(A,I+1))?!1:(Ve(A),!0)}function Ve(A){for(var I=[],P=A.length,T=0;T!==P;T++)I.push(A.pop());for(var T=0;T!==P;T++)A[T]=I[T]}function Ce(A,I){return we(L(A,I-1),L(A,I),L(A,I+1))}var Oe=[],He=[];function Ge(A,I,P){var T,g,e=Oe,l=He;if(le(L(A,I+1),L(A,I),L(A,P))&&j(L(A,I-1),L(A,I),L(A,P)))return!1;g=q(L(A,I),L(A,P));for(var r=0;r!==A.length;++r)if(!((r+1)%A.length===I||r===I)&&le(L(A,I),L(A,P),L(A,r+1))&&j(L(A,I),L(A,P),L(A,r))&&(e[0]=L(A,I),e[1]=L(A,P),l[0]=L(A,r),l[1]=L(A,r+1),T=Re(e,l),q(L(A,I),T)<g))return!1;return!0}function Ue(A,I,P){for(var T=0;T!==A.length;++T)if(!(T===I||T===P||(T+1)%A.length===I||(T+1)%A.length===P)&&oe(L(A,I),L(A,P),L(A,T),L(A,T+1)))return!1;return!0}function ie(A,I,P,T){var g=T||[];if(We(g),I<P)for(var e=I;e<=P;e++)g.push(A[e]);else{for(var e=0;e<=P;e++)g.push(A[e]);for(var e=I;e<A.length;e++)g.push(A[e])}return g}function fe(A){for(var I=[],P=[],T=[],g=[],e=Number.MAX_VALUE,l=0;l<A.length;++l)if(Ce(A,l)){for(var r=0;r<A.length;++r)if(Ge(A,l,r)){P=fe(ie(A,l,r,g)),T=fe(ie(A,r,l,g));for(var n=0;n<T.length;n++)P.push(T[n]);P.length<e&&(I=P,e=P.length,I.push([L(A,l),L(A,r)]))}}return I}function Ne(A){var I=fe(A);return I.length>0?Pe(A,I):[A]}function Pe(A,I){if(I.length===0)return[A];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var P=[A],T=0;T<I.length;T++)for(var g=I[T],e=0;e<P.length;e++){var l=P[e],r=Pe(l,g);if(r){P.splice(e,1),P.push(r[0],r[1]);break}}return P}else{var g=I,T=A.indexOf(g[0]),e=A.indexOf(g[1]);return T!==-1&&e!==-1?[ie(A,T,e),ie(A,e,T)]:!1}}function $e(A){var I=A,P;for(P=0;P<I.length-1;P++)for(var T=0;T<P-1;T++)if(oe(I[P],I[P+1],I[T],I[T+1]))return!1;for(P=1;P<I.length-2;P++)if(oe(I[0],I[I.length-1],I[P],I[P+1]))return!1;return!0}function Me(A,I,P,T,g){g=g||0;var e=I[1]-A[1],l=A[0]-I[0],r=e*A[0]+l*A[1],n=T[1]-P[1],u=P[0]-T[0],o=n*P[0]+u*P[1],f=e*u-n*l;return re(f,0,g)?[0,0]:[(u*r-l*o)/f,(e*o-n*r)/f]}function b(A,I,P,T,g,e,l){e=e||100,l=l||0,g=g||25,I=typeof I!="undefined"?I:[],P=P||[],T=T||[];var r=[0,0],n=[0,0],u=[0,0],o=0,f=0,a=0,t=0,i=0,s=0,v=0,d=[],C=[],m=A,c=A;if(c.length<3)return I;if(l++,l>e)return console.warn("quickDecomp: max level ("+e+") reached."),I;for(var h=0;h<A.length;++h)if(Ce(m,h)){P.push(m[h]),o=f=Number.MAX_VALUE;for(var p=0;p<A.length;++p)ne(L(m,h-1),L(m,h),L(m,p))&&j(L(m,h-1),L(m,h),L(m,p-1))&&(u=Me(L(m,h-1),L(m,h),L(m,p),L(m,p-1)),we(L(m,h+1),L(m,h),u)&&(a=q(m[h],u),a<f&&(f=a,n=u,s=p))),ne(L(m,h+1),L(m,h),L(m,p+1))&&j(L(m,h+1),L(m,h),L(m,p))&&(u=Me(L(m,h+1),L(m,h),L(m,p),L(m,p+1)),ne(L(m,h-1),L(m,h),u)&&(a=q(m[h],u),a<o&&(o=a,r=u,i=p)));if(s===(i+1)%A.length)u[0]=(n[0]+r[0])/2,u[1]=(n[1]+r[1])/2,T.push(u),h<i?(Z(d,m,h,i+1),d.push(u),C.push(u),s!==0&&Z(C,m,s,m.length),Z(C,m,0,h+1)):(h!==0&&Z(d,m,h,m.length),Z(d,m,0,i+1),d.push(u),C.push(u),Z(C,m,s,h+1));else{if(s>i&&(i+=A.length),t=Number.MAX_VALUE,i<s)return I;for(var p=s;p<=i;++p)le(L(m,h-1),L(m,h),L(m,p))&&j(L(m,h+1),L(m,h),L(m,p))&&(a=q(L(m,h),L(m,p)),a<t&&Ue(m,h,p)&&(t=a,v=p%A.length));h<v?(Z(d,m,h,v+1),v!==0&&Z(C,m,v,c.length),Z(C,m,0,h+1)):(h!==0&&Z(d,m,h,c.length),Z(d,m,0,v+1),Z(C,m,v,h+1))}return d.length<C.length?(b(d,I,P,T,g,e,l),b(C,I,P,T,g,e,l)):(b(C,I,P,T,g,e,l),b(d,I,P,T,g,e,l)),I}return I.push(A),I}function ze(A,I){for(var P=0,T=A.length-1;A.length>3&&T>=0;--T)De(L(A,T-1),L(A,T),L(A,T+1),I)&&(A.splice(T%A.length,1),P++);return P}function Qe(A,I){for(var P=A.length-1;P>=1;--P)for(var T=A[P],g=P-1;g>=0;--g)if(Ze(T,A[g],I)){A.splice(P,1);continue}}function re(A,I,P){return P=P||0,Math.abs(A-I)<=P}function Ze(A,I,P){return re(A[0],I[0],P)&&re(A[1],I[1],P)}const Ke={class:"absolute top-0 left-0 -z-1",ref:"content"},Je=ye("div",{id:"testLabel"},"Testing",-1),Xe=ye("div",{id:"drawhere"},null,-1),Ye=[Je,Xe];function je(A,I,P,T,g,e){return de(),me("div",Ke,Ye,512)}const qe={data:function(){return{debug:null,canvasProp:{wallWidth:1}}},computed:{myObjStyle(A,I){return`position:absolute;top:${A};left:${I}`}},mounted(){window.decomp=Ee;let A=window.innerWidth,I=window.innerHeight,P={enableSleeping:!0,timing:{timeScale:.5}},T={width:A,height:I,wireframes:!1,wireframeBackground:"transparent",background:"transparent",showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!0},g=W.exports.Engine.create(P),e=g.world;var l=W.exports.Render.create({element:document.querySelector("#drawhere"),engine:g,options:T}),r=W.exports.Mouse.create(document.body),n=W.exports.MouseConstraint.create(g,{mouse:r,constraint:{stiffness:.5,render:{visible:!0}}});W.exports.World.add(e,n),l.mouse=r;var u=[];W.exports.Events.on(n,"startdrag",function(x){u=x.body.parts.map(y=>y.render.fillStyle),x.body.parts=x.body.parts.map(y=>(y.render.fillStyle="#FF0000",y))}),W.exports.Events.on(n,"enddrag",function(x){x.body.parts.map((y,w)=>x.body.parts[w].render.fillStyle=u[w])});let o=W.exports.Bodies.rectangle(this.canvasProp.wallWidth,I/2,this.canvasProp.wallWidth,I,{isStatic:!0}),f=W.exports.Bodies.rectangle(A-this.canvasProp.wallWidth,I/2,this.canvasProp.wallWidth,I,{isStatic:!0}),a=W.exports.Bodies.rectangle(A/2,this.canvasProp.wallWidth,A,this.canvasProp.wallWidth,{isStatic:!0}),t=W.exports.Bodies.rectangle(A/2,I-this.canvasProp.wallWidth,A,this.canvasProp.wallWidth,{isStatic:!0});W.exports.World.add(e,[o,f,a,t]);var i=W.exports.Bodies.rectangle(A/2,I/2,A/4,16,{isStatic:!1});W.exports.Body.setAngularVelocity(i,Math.PI/18),W.exports.Body.setVelocity(i,{x:-10,y:-10});var s=W.exports.Bodies.rectangle(Math.random()*A,Math.random()*I,80,80,{isStatic:!0}),v=W.exports.Bodies.circle(Math.random()*A,Math.random()*I,40,{isStatic:!0});W.exports.Events.on(i,"sleepEnd",x=>console.log),W.exports.World.add(e,[i,s,v]);var d=W.exports.Composites.stack(A/2,I/2,1,4,0,.78,(x,y)=>W.exports.Bodies.circle(x,y,16,{dampening:1})),C=W.exports.Composites.chain(d,0,0,.1,.1,{dampening:1,stiffness:1,render:{strokeStyle:"transparent",lineWidth:0}});W.exports.Composite.add(d,W.exports.Constraint.create({pointA:{x:A/4,y:I/2},bodyB:d.bodies[3],length:1,stiffness:1,dampening:1,render:{strokeStyle:"#3f3",type:"line"}})),W.exports.World.add(e,C);var m=W.exports.Vertices.fromPath("L0 0 100 0 100 20 60 20 60 40 90 40 90 60 60 60 60 100 40 100 0 80 0 60 40 80 40 20 0 20");let c=W.exports.Common.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]),h=W.exports.Bodies.fromVertices(A/2,I/2,W.exports.Common.choose([m]),{render:{fillStyle:c,strokeStyle:"transparent",lineWidth:0}},!0),p=W.exports.Constraint.create({pointA:{x:A/2,y:I/4},bodyB:h,pointB:{x:0,y:-20},stiffness:1,damping:.99,render:{strokeStyle:c,type:"line",anchors:!0,visible:!0}});W.exports.World.add(e,[h,p]),W.exports.Events.on(l,"afterRender",x=>{let y=document.querySelector("#testLabel");y.style.position="absolute",y.style.top=`${d.bodies[0].position.y-y.clientHeight/2}px`,y.style.left=`${d.bodies[0].position.x-y.clientWidth/2}px`}),W.exports.Runner.run(g),W.exports.Render.run(l)},beforeUnmount(){W.exports.Runner.stop(),W.exports.Render.stop()}};var be=Se(qe,[["render",je]]);const rt='{"title":"Matter.js","description":"","frontmatter":{"title":"Matter.js","tags":"webExp","fullWidth":true},"relativePath":"art/web/exp/matter.md","lastUpdated":1618865483000}',_e={};function et(A,I,P,T,g,e){const l=be;return de(),me("div",null,[Te(l)])}var at=Se(_e,[["render",et]]);export{rt as __pageData,at as default};
