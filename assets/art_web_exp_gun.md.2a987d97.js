var Pt=Object.defineProperty;var gt=Object.getOwnPropertySymbols;var Jt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var bt=(R,x,$)=>x in R?Pt(R,x,{enumerable:!0,configurable:!0,writable:!0,value:$}):R[x]=$,at=(R,x)=>{for(var $ in x||(x={}))Jt.call(x,$)&&bt(R,$,x[$]);if(gt)for(var $ of gt(x))Rt.call(x,$)&&bt(R,$,x[$]);return R};import{D as Mt,N as Wt,o as Z,b as tt,F as mt,j as _t,O as kt,u as St,e as st,t as ct,g as xt,f as ht,y as At,p as Bt,T as Ht,v as Gt,x as Ft}from"./motion.8d69bf4d.js";import{c as Tt,a as et,g as Kt}from"./_commonjsHelpers.dfee5925.js";import{a as qt}from"./index.b0227ca6.js";import{_ as jt}from"./plugin-vue_export-helper.21dcd24c.js";var ut={exports:{}};(function(R){(function(){function x(d,o){return o?Tt(d):d.slice?x[a(d)]:function(i,f){d(i={exports:{}}),x[a(f)]=i.exports};function a(i){return i.split("/").slice(-1).toString().replace(".js","")}}var $=R;x(function(d){String.random=function(a,i){var f="";for(a=a||24,i=i||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a-- >0;)f+=i.charAt(Math.floor(Math.random()*i.length));return f},String.match=function(a,i){var f,l;return typeof a!="string"?!1:(typeof i=="string"&&(i={"=":i}),i=i||{},f=i["="]||i["*"]||i[">"]||i["<"],a===f?!0:l!==i["="]?!1:(f=i["*"]||i[">"],a.slice(0,(f||"").length)===f?!0:l!==i["*"]?!1:l!==i[">"]&&l!==i["<"]?a>=i[">"]&&a<=i["<"]:l!==i[">"]&&a>=i[">"]||l!==i["<"]&&a<=i["<"]))},String.hash=function(a,i){if(typeof a=="string"){if(i=i||0,!a.length)return i;for(var f=0,l=a.length,t;f<l;++f)t=a.charCodeAt(f),i=(i<<5)-i+t,i|=0;return i}};var o=Object.prototype.hasOwnProperty;Object.plain=function(a){return a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(a,i){for(var f in a)if(o.call(a,f)&&(!i||i.indexOf(f)==-1))return!1;return!0},Object.keys=Object.keys||function(a){var i=[];for(var f in a)o.call(a,f)&&i.push(f);return i},function(){var a,i=setTimeout,f=0,l=0,t=typeof setImmediate!=""+a&&setImmediate||i;i.poll=i.poll||function(y){if(1>=+new Date-f&&l++<3333){y();return}t(function(){f=+new Date,y()},l=0)}}(),function(){var a=setTimeout,i=a.turn=a.turn||function(v){f.push(v)==1&&l(c)},f=i.s=[],l=a.poll,t=0,y,c=function(){(y=f[t++])&&y(),(t==f.length||t==99)&&(f=i.s=f.slice(t),t=0),f.length&&l(c)}}(),function(){var a,i=setTimeout,f=i.turn;(i.each=i.each||function(l,t,y,c){c=c||9,function v(h,b,u){if(b=(h=(l||[]).splice(0,c)).length){for(var s=0;s<b&&a===(u=t(h[s]));s++);if(a===u){f(v);return}}y&&y(u)}()})()}()})(x,"./shim"),x(function(d){d.exports=function o(a,i,f){if(!a)return{to:o};var l,t=typeof i=="function",a=(this.tag||(this.tag={}))[a]||t&&(this.tag[a]={tag:a,to:o._={next:function(c){var v;(v=this.to)&&v.next(c)}}});if(t){var y={off:o.off||(o.off=function(){if(this.next===o._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=o._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:o._,next:i,the:a,on:this,as:f};return(y.back=a.last||a).to=y,a.last=y}return(a=a.to)&&l!==i&&a.next(i),a}})(x,"./onto"),x(function(d){x("./shim"),d.exports=function(o){return o===void 0?!1:o===null?!0:o===1/0||o!==o?!1:typeof o=="string"||typeof o=="boolean"||typeof o=="number"?!0:o&&typeof(o["#"]||0)=="string"&&Object.empty(o,["#"])?o["#"]:!1}})(x,"./valid"),x(function(d){x("./shim");function o(){var y=+new Date;return l<y?(i=0,l=y+o.drift):l=y+(i+=1)/f+o.drift}o.drift=0;var a=-1/0,i=0,f=999,l=a,t;o.is=function(y,c,v){var h=c&&y&&y._&&y._[">"]||v;if(!!h)return typeof(h=h[c])=="number"?h:a},o.ify=function(y,c,v,h,b){(y=y||{})._=y._||{},b&&(y._["#"]=b);var u=y._[">"]||(y._[">"]={});return t!==c&&c!=="_"&&(typeof v=="number"&&(u[c]=v),t!==h&&(y[c]=h)),y},d.exports=o})(x,"./state"),x(function(d){x("./shim");function o(a){var i={s:{}},f=i.s;a=a||{max:999,age:1e3*9},i.check=function(t){return f[t]?l(t):!1};var l=i.track=function(t){var y=f[t]||(f[t]={});return y.was=i.now=+new Date,i.to||(i.to=setTimeout(i.drop,a.age+9)),y};return i.drop=function(t){i.to=null,i.now=+new Date;var y=Object.keys(f);console.STAT&&console.STAT(i.now,+new Date-i.now,"dup drop keys"),setTimeout.each(y,function(c){var v=f[c];v&&(t||a.age)>i.now-v.was||delete f[c]},0,99)},i}d.exports=o})(x,"./dup"),x(function(d){x("./onto"),d.exports=function(i,f){if(!!this.on){var l=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var y=i["#"]||i,t=(this.tag||"")[y];return t?(f&&(t=this.on(y,f),clearTimeout(t.err),t.err=setTimeout(function(){t.off()},l)),!0):void 0}var y=f&&f["#"]||o(9);if(!i)return y;var c=this.on(y,i,f);return c.err=c.err||setTimeout(function(){c.off(),c.next({err:"Error: No ACK yet.",lack:!0})},l),y}};var o=String.random||function(){return Math.random().toString(36).slice(2)}})(x,"./ask"),x(function(d){function o(b){return b instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:b}):new o(b)}o.is=function(b){return b instanceof o||b&&b._&&b===b._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},x("./shim"),o.valid=x("./valid"),o.state=x("./state"),o.on=x("./onto"),o.dup=x("./dup"),o.ask=x("./ask"),function(){o.create=function(k){k.root=k.root||k,k.graph=k.graph||{},k.on=k.on||o.on,k.ask=k.ask||o.ask,k.dup=k.dup||o.dup();var T=k.$.opt(k.opt);return k.once||(k.on("in",b,k),k.on("out",b,k),k.on("put",w,k),o.on("create",k),k.on("create",k)),k.once=1,T};function b(k){if(!!k){if(k.out===b){this.to.next(k);return}var T=this,g=T.as,m=g.at||g,A=m.$,D=m.dup,U,N=k.DBG;if((U=k["#"])||(U=k["#"]=i(9)),!D.check(U)){if(D.track(U),U=k._,k._=typeof U=="function"?U:function(){},k.$&&k.$===(k.$._||"").$||(k.$=A),k["@"]&&!k.put&&n(k),!m.ask(k["@"],k))if(N&&(N.u=+new Date),k.put){u(k);return}else k.get&&o.on.get(k,A);N&&(N.uc=+new Date),T.to.next(k),N&&(N.ua=+new Date),!(k.nts||k.NTS)&&(k.out=b,m.on("out",k),N&&(N.ue=+new Date))}}}function u(k){if(!!k){var T=k._||"",g=T.root=((T.$=k.$||"")._||"").root;if(k["@"]&&T.faith&&!T.miss){k.out=b,g.on("out",k);return}T.latch=g.hatch,T.match=g.hatch=[];var m=k.put,A=T.DBG=k.DBG,D=+new Date;if(!(m["#"]&&m["."])){A&&(A.p=D),T["#"]=k["#"],T.msg=k,T.all=0,T.stun=1;var U=Object.keys(m);console.STAT&&console.STAT(D,((A||T).pk=+new Date)-D,"put sort");var N=0,C,M,B,J,E,I,W;(function G(P){if(C!=N){if(C=N,!(B=U[N])){console.STAT&&console.STAT(D,((A||T).pd=+new Date)-D,"put"),r(T);return}(J=m[B])?(W=J._)?B!==W["#"]?I=p+S(B)+"soul not same.":(E=W[">"])||(I=p+S(B)+"no state."):I=p+S(B)+"no meta.":I=p+S(B)+"no node.",M=Object.keys(J||{})}if(I){k.err=T.err=I,r(T);return}var H=0,F;for(P=P||0;P++<9&&(F=M[H++]);)if(F!=="_"){var K=J[F],z=E[F];if(c===z){I=p+S(F)+"on"+S(B)+"no state.";break}if(!l(K)){I=p+S(F)+"on"+S(B)+"bad "+typeof K+S(K);break}s(K,F,B,z,k)}if((M=M.slice(H)).length){f(G);return}++N,M=null,G(P)})()}}}o.on.put=u;function s(k,T,g,m,A){var D=A._||"",U=D.root,N=U.graph,C,M=N[g]||v,B=t(M,T,1),J=M[T],E=D.DBG;(C=console.STAT)&&(!N[g]||!J)&&(C.has=(C.has||0)+1);var I=O();if(m>I){setTimeout(function(){s(k,T,g,m,A)},(C=m-I)>_?_:C),console.STAT&&console.STAT((E||D).Hf=+new Date,C,"future");return}if(!(m<B&&!D.miss)&&!(!D.faith&&m===B&&(k===J||j(k)<=j(J))&&!D.miss)){D.stun++;var W=A["#"]+D.all++,G={toString:function(){return W},_:D};G.toJSON=G.toString,E&&(E.ph=E.ph||+new Date),U.on("put",{"#":G,"@":A["@"],put:{"#":g,".":T,":":k,">":m},_:D})}}function w(k){var T;(T=(k._||"").DBG)&&(T.pa=+new Date,T.pm=T.pm||+new Date);var g=this,m=g.as,A=m.graph,D=k._,U=k.put,N=U["#"],C=U["."],M=U[":"],B=U[">"];k["#"];var J;(J=D.msg)&&(J=J.put)&&(J=J[N])&&y(J,C,B,M,N),A[N]=y(A[N],C,B,M,N),(J=(m.next||"")[N])&&J.on("in",k),r(D),g.to.next(k)}function r(k,T){var g;if(!k.stop&&!(!k.err&&0<--k.stun)&&(k.stop=1,!!(g=k.root))){var m=k.match;m.end=1,m===g.hatch&&(!(m=k.latch)||m.end?delete g.hatch:g.hatch=m),k.hatch&&k.hatch(),setTimeout.each(k.match,function(A){A&&A()}),!(!(T=k.msg)||k.err||T.err)&&(T.out=b,k.root.on("out",T))}}function n(k){var T=k["@"]||"",g;!(g=T._)||(g.acks=(g.acks||0)+1,(g.err=k.err)&&(k["@"]=g["#"],r(g)),!g.stop&&!g.crack&&(g.crack=g.match&&g.match.push(function(){e(g)})),e(g))}function e(k){!k||!k.root||k.stun||k.acks!==k.all||k.root.on("in",{"@":k["#"],err:k.err,ok:k.err?c:{"":1}})}var p="Error: Invalid graph!",S=function(k){return" '"+(""+k).slice(0,9)+"...' "},j=JSON.stringify,_=2147483647,O=o.state}(),function(){o.on.get=function(u,s){var w=s._,r=u.get,n=r["#"],e=w.graph[n],p=r["."],S=w.next||(w.next={});S[n];var j=u._||{},_=j.DBG=u.DBG;if(_&&(_.g=+new Date),!e)return w.on("get",u);if(p){if(typeof p!="string"||c===e[p])return w.on("get",u);e=y({},p,t(e,p),e[p],n)}e&&b(u,e),w.on("get",u)};function b(u,s){var w=+new Date,r=u._||{},n=r.DBG=u.DBG,e=u["#"],p=i(9),S=Object.keys(s||"").sort(),j=((s||"")._||"")["#"];S.length;var _=u.$._.root,O=s===_.graph[j];console.STAT&&console.STAT(w,((n||r).gk=+new Date)-w,"got keys"),s&&function k(){w=+new Date;for(var T=0,g,m={},A;T<9&&(g=S[T++]);)y(m,g,t(s,g),s[g],j);S=S.slice(T),(A={})[j]=m,m=A;var D;O&&(D=function(){},D.ram=D.faith=!0),A=S.length,console.STAT&&console.STAT(w,-(w-(w=+new Date)),"got copied some"),n&&(n.ga=+new Date),_.on("in",{"@":e,"#":p,put:m,"%":A?p=i(9):c,$:_.$,_:D,DBG:n}),console.STAT&&console.STAT(w,+new Date-w,"got in"),!!A&&setTimeout.turn(k)}(),s||_.on("in",{"@":u["#"]})}o.on.get.ack=b}(),function(){o.chain.opt=function(b){b=b||{};var u=this,s=u._,w=b.peers||b;return Object.plain(b)||(b={}),Object.plain(s.opt)||(s.opt=b),typeof w=="string"&&(w=[w]),w instanceof Array&&(Object.plain(s.opt.peers)||(s.opt.peers={}),w.forEach(function(r){var n={};n.id=n.url=r,s.opt.peers[r]=s.opt.peers[r]||n})),s.opt.peers=s.opt.peers||{},a(b,function r(n){var e=this[n];if(this&&this.hasOwnProperty(n)||typeof e=="string"||Object.empty(e)){this[n]=e;return}e&&e.constructor!==Object&&!(e instanceof Array)||a(e,r)}),o.on("opt",s),s.opt.uuid=s.opt.uuid||function(n){return o.state().toString(36).replace(".","")+String.random(n||12)},u}}();var a=function(b,u){Object.keys(b).forEach(u,b)},i=String.random,f=setTimeout.turn,l=o.valid,t=o.state.is,y=o.state.ify,c,v={},h;o.log=function(){return!o.log.off&&h.log.apply(h,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(b,u,s){return(s=o.log.once)[b]=s[b]||0,s[b]++||o.log(u)},typeof window!="undefined"&&((window.GUN=window.Gun=o).window=window);try{typeof $!="undefined"&&($.exports=o)}catch{}d.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(h=console).only=function(b,u){return h.only.i&&b===h.only.i&&h.only.i++&&(h.log.apply(h,arguments)||u)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(x,"./root"),x(function(d){var o=x("./root");o.chain.back=function(f,l){var t;if(f=f||1,f===-1||f===1/0)return this._.root.$;if(f===1)return(this._.back||this._).$;var y=this,c=y._;if(typeof f=="string"&&(f=f.split(".")),f instanceof Array){var v=0,h=f.length,t=c;for(v;v<h;v++)t=(t||a)[f[v]];return i!==t?l?y:t:(t=c.back)?t.$.back(f,l):void 0}if(typeof f=="function"){for(var b,t={back:c};(t=t.back)&&i===(b=f(t,l)););return b}return typeof f=="number"?(c.back||c).$.back(f-1):this};var a={},i})(x,"./back"),x(function(d){var o=x("./root");o.chain.chain=function(r){var n=this,e=n._,p=new(r||n).constructor(n),S=p._,j;return S.root=j=e.root,S.id=++j.once,S.back=n._,S.on=o.on,S.on("in",o.on.in,S),S.on("out",o.on.out,S),p};function a(r){var n,e=this.as,p=e.back,S=e.root,j;if(r.$||(r.$=e.$),this.to.next(r),e.err){e.on("in",{put:e.put=c,$:e.$});return}if(n=r.get){if(S.pass&&(S.pass[e.id]=e),e.lex&&Object.keys(e.lex).forEach(function(_){j[_]=e.lex[_]},j=r.get=r.get||{}),n["#"]||e.soul){if(n["#"]=n["#"]||e.soul,r["#"]||(r["#"]=v(9)),p=S.$.get(n["#"])._,n=n["."]){if(b(p.put,n)&&(j=p.ask&&p.ask[n],(p.ask||(p.ask={}))[n]=p.$.get(n)._,p.on("in",{get:n,put:{"#":p.soul,".":n,":":p.put[n],">":s(S.graph[p.soul],n)}}),j))return}else{if(j=p.ask&&p.ask[""],(p.ask||(p.ask={}))[""]=p,c!==p.put&&(p.on("in",p),j))return;r.$=p.$}return S.ask(t,r),S.on("in",r)}if(n["."])return e.get?(r={get:{".":e.get},$:e.$},(p.ask||(p.ask={}))[e.get]=r.$._,p.on("out",r)):(r={get:e.lex?r.get:{},$:e.$},p.on("out",r));if((e.ask||(e.ask={}))[""]=e,e.get)return n["."]=e.get,(p.ask||(p.ask={}))[e.get]=r.$._,p.on("out",r)}return p.on("out",r)}o.on.out=a;function i(r,n){n=n||this.as;var e=n.root,p=r.$||(r.$=n.$),S=(p||"")._||y,j=r.put||"",_=j["#"],O=j["."],k=c!==j["="]?j["="]:j[":"],T=j[">"]||-1/0,g;if(c!==r.put&&(c===j["#"]||c===j["."]||c===j[":"]&&c===j["="]||c===j[">"])){if(!h(j)){if(!(_=((j||"")._||"")["#"])){console.log("chain not yet supported for",j,"...",r,n);return}return p=n.root.$.get(_),setTimeout.each(Object.keys(j).sort(),function(m){m=="_"||c===(T=s(j,m))||n.on("in",{$:p,put:{"#":_,".":m,"=":j[m],">":T},VIA:r})})}n.on("in",{$:S.back.$,put:{"#":_=S.back.soul,".":O=S.has||S.get,"=":j,">":s(S.back.put,O)},via:r});return}(r.seen||"")[n.id]||((r.seen||(r.seen=function(){}))[n.id]=n,n!==S&&(Object.keys(r).forEach(function(m){j[m]=r[m]},j={}),j.get=n.get||j.get,!n.soul&&!n.has?j.$$$=j.$$$||n.$:S.soul&&(j.$=n.$,j.$$=j.$$||S.$),r=j),l(r,n),(n.soul||r.$$)&&T>=s(e.graph[_],O)&&((j=e.$.get(_)._).put=w(j.put,O,T,k,_)),!S.soul&&T>=s(e.graph[_],O)&&(g=(e.$.get(_)._.next||"")[O])&&(g.put=k,typeof(j=h(k))=="string"&&(g.put=e.$.get(j)._.put||k)),this.to&&this.to.next(r),n.any&&setTimeout.each(Object.keys(n.any),function(m){(m=n.any[m])&&m(r)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(m){(m=n.echo[m])&&m.on("in",r)},0,99),((r.$$||"")._||S).soul&&(g=n.next)&&(g=g[O])&&(j={},Object.keys(r).forEach(function(m){j[m]=r[m]}),j.$=(r.$$||r.$).get(j.get=O),delete j.$$,delete j.$$$,g.on("in",j)),f(r,n))}o.on.in=i;function f(r,n){if(n=n||this.as||r.$._,!(r.$$&&this!==o.on)&&!(!r.put||n.soul)){var e=r.put||"",p=e["="]||e[":"],S,j=n.root,_=j.$.get(e["#"]).get(e["."])._;if(typeof(p=h(p))!="string"){this===o.on&&((_.echo||(_.echo={}))[n.id]=n);return}if(!((_.echo||(_.echo={}))[n.id]&&!(j.pass||"")[n.id])){if(S=j.pass){if(S[p+n.id])return;S[p+n.id]=1}(_.echo||(_.echo={}))[n.id]=n,n.has&&(n.link=p);var O=j.$.get(_.link=p)._;(O.echo||(O.echo={}))[_.id]=_;var S=n.ask||"";(S[""]||n.lex)&&O.on("out",{get:{"#":p}}),setTimeout.each(Object.keys(S),function(k,T){!k||!(T=S[k])||T.on("out",{get:{"#":p,".":k}})},0,99)}}}o.on.link=f;function l(r,n){var e=r.put||"",p=c!==e["="]?e["="]:e[":"],S=n.root,j,_;if(c===p){if(n.soul&&c!==n.put||(_=(r.$$||r.$||"")._||"",r["@"]&&(c!==_.put||c!==n.put)))return;(j=n.link||r.linked)&&delete(S.$.get(j)._.echo||"")[n.id],n.has&&(n.link=null),n.put=c,setTimeout.each(Object.keys(n.next||""),function(O,k){!(k=n.next[O])||(j&&delete(S.$.get(j).get(O)._.echo||"")[k.id],k.on("in",{get:O,put:c,$:k.$}))},0,99);return}n.soul||r.$$||(j=h(p),_=r.$._||"",!((j===_.link||n.has&&!_.link)&&!((S.pass||"")[n.id]&&typeof j!="string"))&&(delete(_.echo||"")[n.id],l({get:n.get,put:c,$:r.$,linked:r.linked=r.linked||_.link},n)))}o.on.unlink=l;function t(r,n){var e=this.as,p=e.$._;p.root;var S=e.get||"",j=(r.put||"")[S["#"]]||"";if(!r.put||typeof S["."]=="string"&&c===j[S["."]]){if(c!==p.put||!p.soul&&!p.has)return;p.ack=(p.ack||0)+1,p.on("in",{get:p.get,put:p.put=c,$:p.$,"@":r["@"]});return}(r._||{}).miss=1,o.on.put(r)}var y={},c,v=String.random,h=o.valid,b=function(r,n){return r&&Object.prototype.hasOwnProperty.call(r,n)},u=o.state,s=u.is,w=u.ify})(x,"./chain"),x(function(d){var o=x("./root");o.chain.get=function(c,v,h){var b,u;if(typeof c=="string"){if(c.length==0)return(b=this.chain())._.err={err:o.log("0 length key!",c)},v&&v.call(b,b._.err),b;var s=this,w=s._,r=w.next||l;(b=r[c])||(b=c&&a(c,s)),b=b&&b.$}else if(typeof c=="function"){let _=function(O,k,T){if(!_.stun&&!((N=e.pass)&&!N[p])){var g=O.$._,m=(O.$$||"")._,A=(m||g).put,D=!g.has&&!g.soul,U={},N;if((D||y===A)&&(A=y===((N=O.put)||"")["="]?y===(N||"")[":"]?N:N[":"]:N["="]),typeof(N=o.valid(A))=="string"&&(A=y===(N=e.$.get(N)._.put)?n.not?y:A:N),!(n.not&&y===A)){if(y===n.stun){if((N=e.stun)&&N.on&&(w.$.back(function(C){if(N.on(""+C.id,U={}),(U.run||0)<_.id)return U}),!U.run&&N.on(""+g.id,U={}),!U.run&&m&&N.on(""+m.id,U={}),_.id>U.run&&((!U.stun||U.stun.end)&&(U.stun=N.on("stun"),U.stun=U.stun&&U.stun.last),U.stun&&!U.stun.end))){(U.stun.add||(U.stun.add={}))[p]=function(){_(O,k,1)};return}if(y===A&&(T=0),(N=e.hatch)&&!N.end&&y===n.hatch&&!T){if(S[g.$._.id])return;S[g.$._.id]=1,N.push(function(){_(O,k,1)});return}S={}}if(e.pass){if(e.pass[p+g.id])return;e.pass[p+g.id]=1}if(n.on){n.ok.call(g.$,A,g.get,O,k||_);return}if(n.v2020){n.ok(O,k||_);return}Object.keys(O).forEach(function(C){N[C]=O[C]},N={}),O=N,O.put=A,n.ok.call(n.as,O,k||_)}}};if(v===!0)return i(this,c,v,h),this;b=this;var w=b._,n=v||{},e=w.root,p;n.at=w,n.ok=c;var S={};return _.at=w,(w.any||(w.any={}))[p=String.random(7)]=_,_.off=function(){_.stun=1,!!w.any&&delete w.any[p]},_.rid=f,_.id=n.run||++e.once,u=e.pass,(e.pass={})[p]=1,n.out=n.out||{get:{}},w.on("out",n.out),e.pass=u,b}else{if(typeof c=="number")return this.get(""+c,v,h);if(typeof(u=t(c))=="string")return this.get(u,v,h);(u=this.get.next)&&(b=u(this,c))}return b?(v&&typeof v=="function"&&b.get(v,h),b):((b=this.chain())._.err={err:o.log("Invalid get request!",c)},v&&v.call(b,b._.err),b)};function a(c,v){var h=v._,b=h.next,u=v.chain(),s=u._;return b||(b=h.next={}),b[s.get=c]=s,v===h.root.$?s.soul=c:(h.soul||h.has)&&(s.has=c),s}function i(c,v,h,b){var u=c._,s=0,w;return(w=u.soul||u.link)?v(w,b,u):u.jam?u.jam.push([v,b]):(u.jam=[[v,b]],c.get(function(n,e){if(!(y===n.put&&!u.root.opt.super&&(w=Object.keys(u.root.opt.peers).length)&&++s<=w)){e.rid(n);var p=(p=n.$)&&p._||{},S=0,j;for(w=u.jam,delete u.jam;j=w[S++];){var _=j[0];j=j[1],_&&_(p.link||p.soul||o.valid(n.put)||((n.put||{})._||{})["#"],j,n,e)}}},{out:{get:{".":!0}}}),c)}function f(c){var v=this.at||this.on;if(!c||v.soul||v.has)return this.off();if(!!(c=(c=(c=c.$||c)._||c).id)){v.map;var h;if((h=this.seen||(this.seen={}))[c])return!0;h[c]=!0}}var l={},t=o.valid,y})(x,"./get"),x(function(d){var o=x("./root");o.chain.put=function(h,b,u){var s=this,w=s._,r=w.root;u=u||{},u.root=w.root,u.run||(u.run=r.once),a(u,w.id),u.ack=u.ack||b,u.via=u.via||s,u.data=u.data||h,u.soul||(u.soul=w.soul||typeof b=="string"&&b);var n=u.state=u.state||o.state();return typeof h=="function"?(h(function(e){u.data=e,s.put(l,l,u)}),s):u.soul?(u.$=r.$.get(u.soul),u.todo=[{it:u.data,ref:u.$}],u.turn=u.turn||y,u.ran=u.ran||i,function e(){var p=u.todo,S=p.pop(),j=S.it;S.ref&&S.ref._.id;var _,O,k,T,g;if(a(u,S.ref),(T=S.todo)&&(O=T.pop(),j=j[O],T.length&&p.push(S)),O&&(p.path||(p.path=[])).push(O),!(_=c(j))&&!(g=o.is(j))){if(!Object.plain(j)){(u.ack||t).call(u,u.out={err:u.err=o.log("Invalid data: "+(j&&(T=j.constructor)&&T.name||typeof j)+" at "+(u.via.back(function(U){U.get&&T.push(U.get)},T=[])||T.join("."))+"."+(p.path||[]).join("."))}),u.ran(u);return}for(var m=u.seen||(u.seen=[]),A=m.length;A--;)if(j===(T=m[A]).it){_=j=T.link;break}}if(O&&_)S.node=v(S.node,O,n,j);else{let U=function(N,C){var M=k.link["#"];C&&(C.off(),C.rid(N));var B=M||N.soul||(T=(N.$$||N.$)._||"").soul||T.link||((T=T.put||"")._||"")["#"]||T["#"]||((T=N.put||"")&&N.$$?T["#"]:(T["="]||T[":"]||"")["#"]);if(!M&&a(u,N.$),!B&&!S.link["#"]){(S.wait||(S.wait=[])).push(function(){U(N,C)});return}B||(B=[],(N.$$||N.$).back(function(J){if(T=J.soul||J.link)return B.push(T);B.push(J.get)}),B=B.reverse().join("/")),k.link["#"]=B,!g&&(((u.graph||(u.graph={}))[B]=k.node||(k.node={_:{}}))._["#"]=B),delete u.wait[D],k.wait&&setTimeout.each(k.wait,function(J){J&&J()}),u.ran(u)};u.seen.push(k={it:j,link:{},todo:g?[]:Object.keys(j).sort().reverse(),path:(p.path||[]).slice(),up:S}),S.node=v(S.node,O,n,k.link),!g&&k.todo.length&&p.push(k);var D=u.seen.length;(u.wait||(u.wait={}))[D]="",T=(k.ref=g?j:O?S.ref.get(O):S.ref)._,(T=j&&(j._||"")["#"]||T.soul||T.link)?U({soul:T}):k.ref.get(U,{run:u.run,v2020:1,out:{get:{".":" "}}})}if(!p.length)return u.ran(u);u.turn(e)}(),s):(f(u),s)};function a(h,b){if(!!b){b=(b._||"").id||b;var u=h.root.stun||(h.root.stun={on:o.on}),s={},w;h.stun||(h.stun=u.on("stun",function(){})),(w=u.on(""+b))&&w.the.last.next(s),!(s.run>=h.run)&&u.on(""+b,function(r){if(h.stun.end){this.off(),this.to.next(r);return}r.run=r.run||h.run,r.stun=r.stun||h.stun})}}function i(h){if(h.err){i.end(h.stun,h.root);return}if(!(h.todo.length||h.end||!Object.empty(h.wait))){h.end=1;var b=h.$.back(-1)._,u=b.root,s=b.ask(function(e){u.on("ack",e),e.err&&o.log(e),++w>(h.acks||0)&&this.off(),!!h.ack&&h.ack(e,this)},h.opt),w=0,r=h.stun,n;(n=function(){!r||(i.end(r,u),setTimeout.each(Object.keys(r=r.add||""),function(e){(e=r[e])&&e()}))}).hatch=n,h.via._.on("out",{put:h.out=h.graph,opt:h.opt,"#":s,_:n})}}i.end=function(h,b){h.end=t,h.the.to===h&&h===h.the.last&&delete b.stun,h.off()};function f(h){var b=h.via._,u;h.via=h.via.back(function(s){if(s.soul||!s.get)return s.$;u=h.data,(h.data={})[s.get]=u}),(!h.via||!h.via._.soul)&&(h.via=b.root.$.get(((h.data||"")._||"")["#"]||b.$.back("opt.uuid")())),h.via.put(h.data,h.ack,h)}var l,t=function(){},y=setTimeout.turn,c=o.valid,v=o.state.ify})(x,"./put"),x(function(d){var o=x("./root");x("./chain"),x("./back"),x("./put"),x("./get"),d.exports=o})(x,"./index"),x(function(d){var o=x("./index");o.chain.on=function(f,l,t,y){var c=this,v=c._;v.root;var h;if(typeof f=="string")return l?(h=v.on(f,l,t||v,y),t&&t.$&&(t.subs||(t.subs=[])).push(h),c):v.on(f);var b=l;return(b=b===!0?{change:!0}:b||{}).not=1,b.on=1,c.get(f,b),c},o.chain.once=function(f,l){if(l=l||{},!f)return a(this);var t=this,y=t._,c=y.root;y.put;var v=String.random(7),h;return t.get(function(b,u,s,w){var r=this,n=r._,e=n.one||(n.one={});if(w.stun||e[v]==="")return;if((h=o.valid(b))===!0){p();return}if(typeof h=="string")return;clearTimeout((y.one||"")[v]),clearTimeout(e[v]),e[v]=setTimeout(p,l.wait||99);function p(){!n.has&&!n.soul&&(n={put:b,get:u}),i===(h=n.put)&&(h=((s.$$||"")._||"").put),!(typeof o.valid(h)=="string"&&(h=c.$.get(h)._.put,h===i))&&(w.stun||e[v]!==""&&(e[v]="",(y.soul||y.has)&&w.off(),f.call(r,h,n.get)))}},{on:1}),t};function a(f,l,t){return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=f.chain())._.nix=f.once(function(y,c){t._.on("in",this._)}),t._.lex=f._.lex,t}o.chain.off=function(){var f=this,l=f._,t,y=l.back;if(!!y)return l.ack=0,(t=y.next)&&t[l.get]&&delete t[l.get],(t=y.ask)&&delete t[l.get],(t=y.put)&&delete t[l.get],(t=l.soul)&&delete y.root.graph[t],(t=l.map)&&Object.keys(t).forEach(function(c,v){v=t[c],v.link&&y.root.$.get(v.link).off()}),(t=l.next)&&Object.keys(t).forEach(function(c,v){v=t[c],v.$.off()}),l.on("off",{}),f};var i})(x,"./on"),x(function(d){var o=x("./index"),a=o.chain.get.next;o.chain.get.next=function(t,y){var c;return Object.plain(y)?(c=((c=y["#"])||"")["="]||c)?t.get(c):((c=t.chain()._).lex=y,t.on("in",function(v){String.match(v.get||(v.put||"")["."],y["."]||y["#"]||y)&&c.on("in",v),this.to.next(v)}),c.$):(a||f)(t,y)},o.chain.map=function(t,y,c){var v=this,h=v._,b,u;return Object.plain(t)&&(b=t["."]?t:{".":t},t=l),t?(o.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=v.chain(),v.map().on(function(s,w,r,n){var e=(t||f).call(this,s,w,r,n);if(l!==e){if(s===e)return u._.on("in",r);if(o.is(e))return u._.on("in",e._);var p={};Object.keys(r.put).forEach(function(S){p[S]=r.put[S]},p),p["="]=e,u._.on("in",{get:w,put:p})}}),u):((u=h.each)||((h.each=u=v.chain())._.lex=b||u._.lex||h.lex,u._.nix=v.back("nix"),v.on("in",i,u._)),u)};function i(t){this.to.next(t);var y=this.as,c=t.$,v=c._,h=t.put,b;!v.soul&&!t.$$||(b=y.lex)&&!String.match(t.get||(h||"")["."],b["."]||b["#"]||b)||o.on.link(t,y)}var f=function(){},l})(x,"./map"),x(function(d){var o=x("./index");o.chain.set=function(a,i,f){var l=this,t=l.back(-1),y,c;return i=i||function(){},f=f||{},f.item=f.item||a,(y=((a||"")._||"")["#"])&&((a={})["#"]=y),typeof(c=o.valid(a))=="string"?l.get(y=c).put(a,i,f):o.is(a)?(l.put(function(v){a.get(function(h,b,u){if(!h)return i.call(l,{err:o.log('Only a node can be linked! Not "'+u.put+'"!')});(c={})[h]={"#":h},v(c)},!0)}),a):(Object.plain(a)&&(a=t.get(y=l.back("opt.uuid")()).put(a)),l.get(y||t.back("opt.uuid")(7)).put(a,i,f))}})(x,"./set"),x(function(d){x("./shim");function o(i){var f=function(){},l=i.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var t=setTimeout.turn||setTimeout,y=JSON.parseAsync||function(n,e,p){var S;try{e(S,JSON.parse(n,p))}catch(j){e(j)}},c=JSON.stringifyAsync||function(n,e,p,S){var j;try{e(j,JSON.stringify(n,p,S))}catch(_){e(_)}},v=i.dup,h=v.check,b=v.track,u=f.hear=function(n,e){if(!!n){if(l.max<=n.length)return f.say({dam:"!",err:"Message too big!"},e);f===this&&(u.d+=n.length||0,++u.c);var p=e.SH=+new Date,S=n[0],j;if(S==="["){y(n,function(_,O){if(_||!O)return f.say({dam:"!",err:"DAM JSON parse error."},e);console.STAT&&console.STAT(+new Date,O.length,"# on hear batch");var k=l.puff;(function T(){for(var g=+new Date,m=0,A;m<k&&(A=O[m++]);)u(A,e);O=O.slice(m),console.STAT&&console.STAT(g,+new Date-g,"hear loop"),s(e),!!O.length&&t(T,0)})()}),n="";return}if(S==="{"||(n["#"]||Object.plain(n))&&(j=n)){if(j)return u.one(j,e,p);y(n,function(_,O){if(_||!O)return f.say({dam:"!",err:"DAM JSON parse error."},e);u.one(O,e,p)});return}}};u.one=function(n,e,p){var S,j,_,O,k;if(n.DBG&&(n.DBG=k={DBG:n.DBG}),k&&(k.h=p),k&&(k.hp=+new Date),(S=n["#"])||(S=n["#"]=String.random(9)),!(_=h(S))&&(j=n["##"],!(j&&(_=n["@"]||n.get&&S)&&v.check(O=_+j)))){if((n._=function(){}).via=f.leap=e,(_=n["><"])&&typeof _=="string"&&_.slice(0,99).split(",").forEach(function(T){this[T]=1},n._.yo={}),_=n.dam){(_=f.hear[_])&&_(n,e,i),b(S);return}var p=+new Date;k&&(k.is=p),e.SI=S,i.on("in",f.last=n),k&&(k.hd=+new Date),console.STAT&&console.STAT(p,+new Date-p,n.get?"msg get":n.put?"msg put":"msg"),(_=b(S)).via=e,n.get&&(_.it=n),O&&b(O),f.leap=f.last=null}},u.c=u.d=0,function(){var n=0,e;f.hash=function(_,O){var k,T,g,m=+new Date;c(_.put,function A(D,U){var N=(T||(T=g=U||"")).slice(0,32768);if(k=String.hash(N,k),T=T.slice(32768),T){t(A,0);return}console.STAT&&console.STAT(m,+new Date-m,"say json+hash"),_._.$put=g,_["##"]=k,j(_,O),delete _._.$put},p)};function p(_,O){var k;return O instanceof Object?(Object.keys(O).sort().forEach(S,{to:k={},on:O}),k):O}function S(_){this.to[_]=this.on[_]}var j=f.say=function(_,O){var k;if((k=this)&&(k=k.to)&&k.next&&k.next(_),!_)return!1;var T,g,m=_["@"],A=_._||(_._=function(){}),D=_.DBG,U=+new Date;if(A.y=A.y||U,O||D&&(D.y=U),(T=_["#"])||(T=_["#"]=String.random(9)),!e&&b(T),_.put&&(_.err||(v.s[T]||"").err))return!1;if(!_["##"]&&a!==_.put&&!A.via&&m){f.hash(_,O);return}if(!O&&m&&(O=(k=v.s[m])&&(k.via||(k=k.it)&&(k=k._)&&k.via)||(k=f.last)&&m===k["#"]&&f.leap),!O&&m)return v.s[m]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!O&&f.way)return f.way(_);if(D&&(D.yh=+new Date),!(g=A.raw)){f.raw(_,O);return}if(D&&(D.yr=+new Date),!O||!O.id){if(!Object.plain(O||l.peers))return!1;var U=+new Date;l.puff;var N=l.peers,C=Object.keys(O||l.peers||{});console.STAT&&console.STAT(U,+new Date-U,"peer keys"),function J(){var E=+new Date;e=1;var I=A.raw;A.raw=g;for(var W=0,G;W<9&&(G=(C||"")[W++]);)!(G=N[G])||j(_,G);A.raw=I,e=0,C=C.slice(W),console.STAT&&console.STAT(E,+new Date-E,"say loop"),!!C.length&&(t(J,0),m&&b(m))}();return}if(!O.wire&&f.wire&&f.wire(O),T!==O.last){if(O.last=T,O===A.via||(k=A.yo)&&(k[O.url]||k[O.pid]||k[O.id]))return!1;if(console.STAT&&console.STAT(U,((D||A).yp=+new Date)-(A.y||U),"say prep"),!e&&m&&b(m),O.batch){if(O.tail=(k=O.tail||0)+g.length,O.tail<=l.pack){O.batch+=(k?",":"")+g;return}s(O)}O.batch="[";var M=+new Date;setTimeout(function(){console.STAT&&console.STAT(M,+new Date-M,"0ms TO"),s(O)},l.gap),w(g,O),console.STAT&&m===O.SI&&console.STAT(U,+new Date-O.SH,"say ack")}};f.say.c=f.say.d=0,f.raw=function(_,O){if(!_)return"";var k=_._||{},T,g;if(g=k.raw)return g;if(typeof _=="string")return _;var m=_["##"],A=_["@"];if(m&&A){if(!k.via&&h(A+m))return!1;if((g=(v.s[A]||"").it)||(g=f.last)&&A===g["#"]){if(m===g["##"])return!1;g["##"]||(g["##"]=m)}}if(!_.dam){var D=0,U=[];g=l.peers;for(var N in g){var C=g[N];if(U.push(C.url||C.pid||C.id),++D>6)break}D>1&&(_["><"]=U.join())}if(T=k.$put){g={},Object.keys(_).forEach(function(B){g[B]=_[B]}),g.put=":])([:",c(g,function(B,J){if(!B){var E=+new Date;g=J.indexOf('"put":":])([:"'),M(a,J=J.slice(0,g+6)+T+J.slice(g+14)),console.STAT&&console.STAT(E,+new Date-E,"say slice")}});return}c(_,M);function M(B,J){B||(k.raw=J,j(_,O))}}}();function s(n){var e=n.batch,p=typeof e=="string";if(p&&(e+="]"),n.batch=n.tail=null,!!e&&!(p?3>e.length:!e.length)){if(!p)try{e=e.length===1?e[0]:JSON.stringify(e)}catch(S){return l.log("DAM JSON stringify error",S)}!e||w(e,n)}}function w(n,e){try{var p=e.wire;e.say?e.say(n):p.send&&p.send(n),f.say.d+=n.length||0,++f.say.c}catch{(e.queue=e.queue||[]).push(n)}}f.hi=function(n){var e=n.wire||{};n.id?l.peers[n.url||n.id]=n:(e=n.id=n.id||String.random(9),f.say({dam:"?",pid:i.opt.pid},l.peers[e]=n),delete v.s[n.last]),n.met=n.met||+new Date,e.hied||i.on(e.hied="hi",n),e=n.queue,n.queue=[],setTimeout.each(e||[],function(p){w(p,n)},0,9)},f.bye=function(n){i.on("bye",n);var e=+new Date;e=e-(n.met||e),f.bye.time=((f.bye.time||e)+e)/2},f.hear["!"]=function(n,e){l.log("Error:",n.err)},f.hear["?"]=function(n,e){n.pid&&(e.pid||(e.pid=n.pid),n["@"])||(f.say({dam:"?",pid:l.pid,"@":n["#"]},e),delete v.s[e.last])},i.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),i.on("bye",function(n,e){n=l.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(e=n.wire)&&e.close&&e.close(),delete l.peers[n.id],n.wire=null});var r={};return i.on("bye",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)-1),!!(e=n.url)&&(r[e]=!0,setTimeout(function(){delete r[e]},l.lack||9e3))}),i.on("hi",function(n,e){this.to.next(n),(e=console.STAT)&&(e.peers=(e.peers||0)+1),!(!(e=n.url)||!r[e])&&(delete r[e],!l.super&&setTimeout.each(Object.keys(i.next),function(p){i.next[p],e={},e[p]=i.graph[p],e=String.hash(e),f.say({"##":e,get:{"#":p}},n)}))}),f}var a;try{d.exports=o}catch{}})(x,"./mesh"),x(function(d){var o=x("../index");o.Mesh=x("./mesh"),o.on("opt",function(i){if(this.to.next(i),i.once)return;var f=i.opt;if(f.WebSocket===!1)return;var l=o.window||{},t=f.WebSocket||l.WebSocket||l.webkitWebSocket||l.mozWebSocket;if(!t)return;f.WebSocket=t;var y=f.mesh=f.mesh||o.Mesh(i);y.wire||f.wire,y.wire=f.wire=c;function c(u){try{if(!u||!u.url)return w&&w(u);var s=u.url.replace(/^http/,"ws"),w=u.wire=new f.WebSocket(s);return w.onclose=function(){f.mesh.bye(u),h(u)},w.onerror=function(r){h(u)},w.onopen=function(){f.mesh.hi(u)},w.onmessage=function(r){!r||f.mesh.hear(r.data||r,u)},w}catch{}}setTimeout(function(){!f.super&&i.on("out",{dam:"hi"})},1);var v=2*999;function h(u){clearTimeout(u.defer),!(b&&u.retry<=0)&&(u.retry=(u.retry||f.retry+1||60)-(-u.tried+(u.tried=+new Date)<v*4?1:0),u.defer=setTimeout(function s(){if(b&&b.hidden)return setTimeout(s,v);c(u)},v))}var b=""+a!=typeof document&&document});var a})(x,"./websocket"),x(function(d){if(typeof Gun!="undefined"){var o=function(){},a;try{a=(Gun.window||o).localStorage}catch{}a||(Gun.log("Warning: No localStorage exists to persist data to!"),a={setItem:function(i,f){this[i]=f},removeItem:function(i){delete this[i]},getItem:function(i){return this[i]}}),Gun.on("create",function i(f){this.to.next(f);var l=f.opt;f.graph;var t=[],y,c;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{y=i[l.prefix]=i[l.prefix]||JSON.parse(a.getItem(l.prefix))||{}}catch{y=i[l.prefix]={}}f.on("get",function(h){this.to.next(h);var b=h.get,u,s,w,r;!b||!(u=b["#"])||(s=y[u]||r,s&&(w=b["."])&&!Object.plain(w)&&(s=Gun.state.ify({},w,Gun.state.is(s,w),s[w],u)),Gun.on.get.ack(h,s))}),f.on("put",function(h){this.to.next(h);var b=h.put,u=b["#"],s=b["."];y[u]=Gun.state.ify(y[u],s,b[">"],b[":"],u),h["@"]||t.push(h["#"]),!c&&(c=setTimeout(v,l.wait||1))});function v(){var h,b=t;clearTimeout(c),c=!1,t=[];try{a.setItem(l.prefix,JSON.stringify(y))}catch(u){Gun.log((h=u||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),f.on("localStorage:error",{err:h,get:l.prefix,put:y})}!h&&!Object.empty(l.peers)||setTimeout.each(b,function(u){f.on("in",{"@":u,err:h,ok:0})})}})}})(x,"./localStorage")})(),function(){var x;if(""+x!=typeof Gun){var $=function(g){console.log("Warning! Deprecated internal utility will break in next version:",g)},d=Gun;d.fn=d.fn||{is:function(g){return $("fn"),!!g&&typeof g=="function"}},d.bi=d.bi||{is:function(g){return $("bi"),g instanceof Boolean||typeof g=="boolean"}},d.num=d.num||{is:function(g){return $("num"),!a(g)&&(g-parseFloat(g)+1>=0||g===1/0||g===-1/0)}},d.text=d.text||{is:function(g){return $("text"),typeof g=="string"}},d.text.ify=d.text.ify||function(g){return $("text.ify"),d.text.is(g)?g:typeof JSON!="undefined"?JSON.stringify(g):g&&g.toString?g.toString():g},d.text.random=d.text.random||function(g,m){$("text.random");var A="";for(g=g||24,m=m||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";g>0;)A+=m.charAt(Math.floor(Math.random()*m.length)),g--;return A},d.text.match=d.text.match||function(g,m){var A,D;return $("text.match"),typeof g!="string"?!1:(typeof m=="string"&&(m={"=":m}),m=m||{},A=m["="]||m["*"]||m[">"]||m["<"],g===A?!0:D!==m["="]?!1:(A=m["*"]||m[">"]||m["<"],g.slice(0,(A||"").length)===A?!0:D!==m["*"]?!1:D!==m[">"]&&D!==m["<"]?g>=m[">"]&&g<=m["<"]:D!==m[">"]&&g>=m[">"]||D!==m["<"]&&g<=m["<"]))},d.text.hash=d.text.hash||function(g,m){if($("text.hash"),typeof g=="string"){if(m=m||0,!g.length)return m;for(var A=0,D=g.length,U;A<D;++A)U=g.charCodeAt(A),m=(m<<5)-m+U,m|=0;return m}},d.list=d.list||{is:function(g){return $("list"),g instanceof Array}},d.list.slit=d.list.slit||Array.prototype.slice,d.list.sort=d.list.sort||function(g){return $("list.sort"),function(m,A){return!m||!A?0:(m=m[g],A=A[g],m<A?-1:m>A?1:0)}},d.list.map=d.list.map||function(g,m,A){return $("list.map"),t(g,m,A)},d.list.index=1,d.obj=d.boj||{is:function(g){return $("obj"),g?g instanceof Object&&g.constructor===Object||Object.prototype.toString.call(g).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},d.obj.put=d.obj.put||function(g,m,A){return $("obj.put"),(g||{})[m]=A,g},d.obj.has=d.obj.has||function(g,m){return $("obj.has"),g&&Object.prototype.hasOwnProperty.call(g,m)},d.obj.del=d.obj.del||function(g,m){if($("obj.del"),!!g)return g[m]=null,delete g[m],g},d.obj.as=d.obj.as||function(g,m,A,D){return $("obj.as"),g[m]=g[m]||(D===A?{}:A)},d.obj.ify=d.obj.ify||function(g){if($("obj.ify"),f(g))return g;try{g=JSON.parse(g)}catch{g={}}return g},function(){var g;function m(A,D){l(this,D)&&g!==this[D]||(this[D]=A)}d.obj.to=d.obj.to||function(A,D){return $("obj.to"),D=D||{},t(A,m,D),D}}(),d.obj.copy=d.obj.copy||function(g){return $("obj.copy"),g&&JSON.parse(JSON.stringify(g))},function(){function g(m,A){var D=this.n,U;if(!(D&&(A===D||f(D)&&l(D,A)))&&U!==A)return!0}d.obj.empty=d.obj.empty||function(m,A){return $("obj.empty"),m?!t(m,g,{n:A}):!0}}(),function(){function g(D,U){if(arguments.length===2){g.r=g.r||{},g.r[D]=U;return}g.r=g.r||[],g.r.push(D)}var m=Object.keys,A;Object.keys=Object.keys||function(D){return A(D,function(U,N,C){C(N)})},d.obj.map=A=d.obj.map||function(D,U,N){$("obj.map");var C,M=0,B,J,E,I,W=typeof U=="function";if(g.r=C,m&&f(D)&&(E=m(D),I=!0),N=N||{},a(D)||E)for(B=(E||D).length;M<B;M++){var G=M+d.list.index;if(W){if(J=I?U.call(N,D[E[M]],E[M],g):U.call(N,D[M],G,g),J!==C)return J}else if(U===D[I?E[M]:M])return E?E[M]:G}else for(M in D)if(W){if(l(D,M)&&(J=N?U.call(N,D[M],M,g):U(D[M],M,g),J!==C))return J}else if(U===D[M])return M;return W?g.r:d.list.index?0:-1}}(),d.time=d.time||{},d.time.is=d.time.is||function(g){return $("time"),g?g instanceof Date:+new Date().getTime()};var o=d.fn.is,a=d.list.is,i=d.obj,f=i.is,l=i.has,t=i.map,y={};y.is=function(g){return $("val.is"),g===x?!1:g===null?!0:g===1/0?!1:b(g)||v(g)||h(g)?!0:y.link.is(g)||!1},y.link=y.rel={_:"#"},function(){y.link.is=function(m){if($("val.link.is"),m&&m[c]&&!m._&&f(m)){var A={};if(t(m,g,A),A.id)return A.id}return!1};function g(m,A){var D=this;if(D.id)return D.id=!1;if(A==c&&b(m))D.id=m;else return D.id=!1}}(),y.link.ify=function(g){return $("val.link.ify"),u({},c,g)},d.obj.has._=".";var c=y.link._,x,v=d.bi.is,h=d.num.is,b=d.text.is,i=d.obj,f=i.is,u=i.put,t=i.map;d.val=d.val||y;var s={_:"_"};s.soul=function(g,m){return $("node.soul"),g&&g._&&g._[m||e]},s.soul.ify=function(g,m){return $("node.soul.ify"),m=typeof m=="string"?{soul:m}:m||{},g=g||{},g._=g._||{},g._[e]=m.soul||g._[e]||n(),g},s.soul._=y.link._,function(){s.is=function(m,A,D){$("node.is");var U;return f(m)&&(U=s.soul(m))?!t(m,g,{as:D,cb:A,s:U,n:m}):!1};function g(m,A){if(A!==s._){if(!y.is(m))return!0;this.cb&&this.cb.call(this.as,m,A,this.n,this.s)}}}(),function(){s.ify=function(m,A,D){return $("node.ify"),A?typeof A=="string"?A={soul:A}:typeof A=="function"&&(A={map:A}):A={},A.map&&(A.node=A.map.call(D,m,x,A.node||{})),(A.node=s.soul.ify(A.node||{},A))&&t(m,g,{o:A,as:D}),A.node};function g(m,A){var D=this.o,U,N;if(D.map){U=D.map.call(this.as,m,""+A,D.node),N===U?w(D.node,A):D.node&&(D.node[A]=U);return}y.is(m)&&(D.node[A]=m)}}();var i=d.obj,f=i.is,w=i.del,t=i.map,r=d.text,n=r.random,e=s.soul._,x;d.node=d.node||s;var p=d.state;p.lex=function(){return $("state.lex"),p().toString(36).replace(".","")},p.to=function(g,m,A){$("state.to");var D=(g||{})[m];return f(D)&&(D=S(D)),p.ify(A,m,p.is(g,m),D,s.soul(g))},function(){p.map=function(m,A,D){$("state.map");var U,N=f(N=m||A)?N:null;return m=o(m=m||A)?m:null,N&&!m?(A=h(A)?A:p(),N[O]=N[O]||{},t(N,g,{o:N,s:A}),N):(D=D||f(A)?A:U,A=h(A)?A:p(),function(C,M,B,J){if(!m)return g.call({o:B,s:A},C,M),C;m.call(D||this||{},C,M,B,J),!(l(B,M)&&U===B[M])&&g.call({o:B,s:A},C,M)})};function g(m,A){O!==A&&p.ify(this.o,A,this.s)}}();var i=d.obj;i.as;var l=i.has,f=i.is,t=i.map,S=i.copy,j=d.num,h=j.is,_=d.fn,o=_.is,O=s._,x,k={};(function(){k.is=function(A,D,U,N){return $("graph.is"),!A||!f(A)||T(A)?!1:!t(A,g,{cb:D,fn:U,as:N})};function g(A,D){if(!A||D!==s.soul(A)||!s.is(A,this.fn,this.as))return!0;!this.cb||(m.n=A,m.as=this.as,this.cb.call(m.as,A,D,m))}function m(A){A&&s.is(m.n,A,m.as)}})(),function(){k.ify=function(N,C,M){$("graph.ify");var B={path:[],obj:N};return C?typeof C=="string"?C={soul:C}:typeof C=="function"&&(C.map=C):C={},typeof M=="string"&&(C.soul=C.soul||M,M=x),C.soul&&(B.link=y.link.ify(C.soul)),C.shell=(M||{}).shell,C.graph=C.graph||{},C.seen=C.seen||[],C.as=C.as||M,g(C,B),C.root=B.node,C.graph};function g(N,C){var M;return(M=U(N,C))?M:(C.env=N,C.soul=A,s.ify(C.obj,m,C)&&(C.link=C.link||y.link.ify(s.soul(C.node)),C.obj!==N.shell&&(N.graph[y.link.is(C.link)]=C.node)),C)}function m(N,C,M){var B=this,J=B.env,E,I;if(s._===C&&l(N,y.link._))return M._;if(!!(E=D(N,C,M,B,J))){if(C||(B.node=B.node||M||{},l(N,s._)&&s.soul(N)&&(B.node._=S(N._)),B.node=s.soul.ify(B.node,y.link.is(B.link)),B.link=B.link||y.link.ify(s.soul(B.node))),(I=J.map)&&(I.call(J.as||{},N,C,M,B),l(M,C))){if(N=M[C],x===N){w(M,C);return}if(!(E=D(N,C,M,B,J)))return}if(!C)return B.node;if(E===!0)return N;if(I=g(J,{obj:N,path:B.path.concat(C)}),!!I.node)return I.link}}function A(N){var C=this,M=y.link.is(C.link),B=C.env.graph;C.link=C.link||y.link.ify(N),C.link[y.link._]=N,C.node&&C.node[s._]&&(C.node[s._][y.link._]=N),l(B,M)&&(B[N]=B[M],w(B,M))}function D(N,C,M,B,J){var E;if(y.is(N))return!0;if(f(N))return 1;if(E=J.invalid)return N=E.call(J.as||{},N,C,M),D(N,C,M,B,J);J.err="Invalid value at '"+B.path.concat(C).join(".")+"'!",d.list.is(N)&&(J.err+=" Use `.set(item)` instead of an Array.")}function U(N,C){for(var M=N.seen,B=M.length,J;B--;)if(J=M[B],C.obj===J.obj)return J;M.push(C)}}(),k.node=function(g){$("graph.node");var m=s.soul(g);if(!!m)return u({},m,g)},function(){k.to=function(m,A,D){if($("graph.to"),!!m){var U={};return D=D||{seen:{}},t(m[A],g,{obj:U,graph:m,opt:D}),U}};function g(m,A){var D,U;if(s._===A){if(T(m,y.link._))return;this.obj[A]=S(m);return}if(!(D=y.link.is(m))){this.obj[A]=m;return}if(U=this.opt.seen[D]){this.obj[A]=U;return}this.obj[A]=this.opt.seen[D]=k.to(this.graph,D,this.opt)}}();var o=d.fn.is,i=d.obj,f=i.is,w=i.del,l=i.has,T=i.empty,u=i.put,t=i.map,S=i.copy,x;d.graph=d.graph||k}}()})(ut);var ot=ut.exports,zt={exports:{}};(function(R){(function(){function x(d,o){return o?Tt(d):d.slice?x[a(d)]:function(i,f){d(i={exports:{}}),x[a(f)]=i.exports};function a(i){return i.split("/").slice(-1).toString().replace(".js","")}}var $=R;x(function(d){typeof window!="undefined"&&(d.window=window);var o=d.window||d,a,i=o.SEA||{};(i.window=d.window)&&(i.window.SEA=i);try{a+""!=typeof $&&($.exports=i)}catch{}d.exports=i})(x,"./root"),x(function(d){var o=x("./root");try{o.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(x,"./https"),x(function(d){var o;if(o+""==typeof btoa){if(o+""==typeof Buffer)try{et.Buffer=x("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}et.btoa=function(a){return Buffer.from(a,"binary").toString("base64")},et.atob=function(a){return Buffer.from(a,"base64").toString("binary")}}})(x,"./base64"),x(function(d){x("./base64");function o(){}Object.assign(o,{from:Array.from}),o.prototype=Object.create(Array.prototype),o.prototype.toString=function(a,i,f){a=a||"utf8",i=i||0;const l=this.length;if(a==="hex"){const t=new Uint8Array(this);return[...Array((f&&f+1||l)-i).keys()].map(y=>t[y+i].toString(16).padStart(2,"0")).join("")}if(a==="utf8")return Array.from({length:(f||l)-i},(t,y)=>String.fromCharCode(this[y+i])).join("");if(a==="base64")return btoa(this)},d.exports=o})(x,"./array"),x(function(d){x("./base64");var o=x("./array");function a(...i){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),a.from(...i)}a.prototype=Object.create(Array.prototype),Object.assign(a,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const i=arguments[0];let f;if(typeof i=="string"){const t=arguments[1]||"utf8";if(t==="hex"){const y=i.match(/([\da-fA-F]{2})/g).map(c=>parseInt(c,16));if(!y||!y.length)throw new TypeError("Invalid first argument for type 'hex'.");f=o.from(y)}else if(t==="utf8"||t==="binary"){const y=i.length,c=new Uint16Array(y);Array.from({length:y},(v,h)=>c[h]=i.charCodeAt(h)),f=o.from(c)}else if(t==="base64"){const y=atob(i),c=y.length,v=new Uint8Array(c);Array.from({length:c},(h,b)=>v[b]=y.charCodeAt(b)),f=o.from(v)}else t==="binary"?f=o.from(i):console.info("SafeBuffer.from unknown encoding: "+t);return f}if(i.byteLength,i.byteLength?i.byteLength:i.length){let t;return i instanceof ArrayBuffer&&(t=new Uint8Array(i)),o.from(t||i)}},alloc(i,f=0){return o.from(new Uint8Array(Array.from({length:i},()=>f)))},allocUnsafe(i){return o.from(new Uint8Array(Array.from({length:i})))},concat(i){if(!Array.isArray(i))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return o.from(i.reduce((f,l)=>f.concat(Array.from(l)),[]))}}),a.prototype.from=a.from,a.prototype.toString=o.prototype.toString,d.exports=a})(x,"./buffer"),x(function(d){const o=x("./root"),a={Buffer:x("./buffer")};var i={},f;if(JSON.parseAsync=JSON.parseAsync||function(t,y,c){var v;try{y(v,JSON.parse(t,c))}catch(h){y(h)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,y,c,v){var h;try{y(h,JSON.stringify(t,c,v))}catch(b){y(b)}},a.parse=function(t,y){return new Promise(function(c,v){JSON.parseAsync(t,function(h,b){h?v(h):c(b)},y)})},a.stringify=function(t,y,c){return new Promise(function(v,h){JSON.stringifyAsync(t,function(b,u){b?h(b):v(u)},y,c)})},o.window&&(a.crypto=window.crypto||window.msCrypto,a.subtle=(a.crypto||i).subtle||(a.crypto||i).webkitSubtle,a.TextEncoder=window.TextEncoder,a.TextDecoder=window.TextDecoder,a.random=t=>a.Buffer.from(a.crypto.getRandomValues(new Uint8Array(a.Buffer.alloc(t))))),!a.TextDecoder){const{TextEncoder:t,TextDecoder:y}=x((f+""==typeof $?".":"")+"./lib/text-encoding",1);a.TextDecoder=y,a.TextEncoder=t}if(!a.crypto)try{var l=x("crypto",1);Object.assign(a,{crypto:l,random:y=>a.Buffer.from(l.randomBytes(y))});const{Crypto:t}=x("@peculiar/webcrypto",1);a.ossl=a.subtle=new t({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}d.exports=a})(x,"./shim"),x(function(d){var o=x("./root"),a=x("./shim"),i={};i.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},i.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},i.ecdh={name:"ECDH",namedCurve:"P-256"},i.jwk=function(f,l){f=f.split(".");var t=f[0],y=f[1],c={kty:"EC",crv:"P-256",x:t,y,ext:!0};return c.key_ops=l?["sign"]:["verify"],l&&(c.d=l),c},i.keyToJwk=function(f){const t=f.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:t,ext:!1,alg:"A256GCM"}},i.recall={validity:12*60*60,hook:function(f){return f}},i.check=function(f){return typeof f=="string"&&f.slice(0,4)==="SEA{"},i.parse=async function(l){try{var t=typeof l=="string";return t&&l.slice(0,4)==="SEA{"&&(l=l.slice(3)),t?await a.parse(l):l}catch{}return l},o.opt=i,d.exports=i})(x,"./settings"),x(function(d){var o=x("./shim");d.exports=async function(a,i){var f=typeof a=="string"?a:await o.stringify(a),l=await o.subtle.digest({name:i||"SHA-256"},new o.TextEncoder().encode(f));return o.Buffer.from(l)}})(x,"./sha256"),x(function(d){const o=x("./shim"),a=o.subtle,i=o.ossl?o.ossl:a,f=l=>i.digest({name:"SHA-1"},new ArrayBuffer(l));d.exports=f})(x,"./sha1"),x(function(d){var o=x("./root"),a=x("./shim"),i=x("./settings"),f=x("./sha256"),l;o.work=o.work||(async(t,y,c,v)=>{try{var h=(y||{}).epub||y;if(v=v||{},h instanceof Function&&(c=h,h=l),t=typeof t=="string"?t:await a.stringify(t),(v.name||"").toLowerCase().slice(0,3)==="sha"){var b=a.Buffer.from(await f(t,v.name),"binary").toString(v.encode||"base64");if(c)try{c(b)}catch(r){console.log(r)}return b}h=h||a.random(9);var u=await(a.ossl||a.subtle).importKey("raw",new a.TextEncoder().encode(t),{name:v.name||"PBKDF2"},!1,["deriveBits"]),s=await(a.ossl||a.subtle).deriveBits({name:v.name||"PBKDF2",iterations:v.iterations||i.pbkdf2.iter,salt:new a.TextEncoder().encode(v.salt||h),hash:v.hash||i.pbkdf2.hash},u,v.length||i.pbkdf2.ks*8);t=a.random(t.length);var w=a.Buffer.from(s,"binary").toString(v.encode||"base64");if(c)try{c(w)}catch(r){console.log(r)}return w}catch(r){if(console.log(r),o.err=r,o.throw)throw r;c&&c();return}}),d.exports=o.work})(x,"./work"),x(function(d){var o=x("./root"),a=x("./shim");x("./settings"),o.name=o.name||(async(i,f)=>{try{if(i)try{i()}catch(l){console.log(l)}return}catch(l){if(console.log(l),o.err=l,o.throw)throw l;i&&i();return}}),o.pair=o.pair||(async(i,f)=>{try{var l=a.ossl||a.subtle,t=await a.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async v=>{var h={};h.priv=(await a.subtle.exportKey("jwk",v.privateKey)).d;var b=await a.subtle.exportKey("jwk",v.publicKey);return h.pub=b.x+"."+b.y,h});try{var y=await l.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async v=>{var h={};h.epriv=(await l.exportKey("jwk",v.privateKey)).d;var b=await l.exportKey("jwk",v.publicKey);return h.epub=b.x+"."+b.y,h})}catch(v){if(o.window)throw v;if(v=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw v}y=y||{};var c={pub:t.pub,priv:t.priv,epub:y.epub,epriv:y.epriv};if(i)try{i(c)}catch(v){console.log(v)}return c}catch(v){if(console.log(v),o.err=v,o.throw)throw v;i&&i();return}}),d.exports=o.pair})(x,"./pair"),x(function(d){var o=x("./root"),a=x("./shim"),i=x("./settings"),f=x("./sha256"),l;o.sign=o.sign||(async(t,y,c,v)=>{try{if(v=v||{},!(y||v).priv){if(!o.I)throw"No signing key.";y=await o.I(null,{what:t,how:"sign",why:v.why})}if(l===t)throw"`undefined` not allowed.";var h=await i.parse(t),b=v.check=v.check||h;if(o.verify&&(o.opt.check(b)||b&&b.s&&b.m)&&l!==await o.verify(b,y)){var e=await i.parse(b);if(v.raw||(e="SEA"+await a.stringify(e)),c)try{c(e)}catch(S){console.log(S)}return e}var u=y.pub,s=y.priv,w=i.jwk(u,s),r=await f(h),n=await(a.ossl||a.subtle).importKey("jwk",w,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(p=>(a.ossl||a.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},p,new Uint8Array(r))),e={m:h,s:a.Buffer.from(n,"binary").toString(v.encode||"base64")};if(v.raw||(e="SEA"+await a.stringify(e)),c)try{c(e)}catch(p){console.log(p)}return e}catch(p){if(console.log(p),o.err=p,o.throw)throw p;c&&c();return}}),d.exports=o.sign})(x,"./sign"),x(function(d){var o=x("./root"),a=x("./shim"),i=x("./settings"),f=x("./sha256"),l;o.verify=o.verify||(async(c,v,h,b)=>{try{var u=await i.parse(c);if(v===!1){var s=await i.parse(u.m);if(h)try{h(s)}catch(O){console.log(O)}return s}b=b||{};var w=v.pub||v,r=o.opt.slow_leak?await o.opt.slow_leak(w):await(a.ossl||a.subtle).importKey("jwk",i.jwk(w),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await f(u.m),e,p,S,j;try{if(e=a.Buffer.from(u.s,b.encode||"base64"),p=new Uint8Array(e),S=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,p,new Uint8Array(n)),!S)throw"Signature did not match."}catch{if(o.opt.fallback)return await o.opt.fall_verify(c,v,h,b)}var _=S?await i.parse(u.m):l;if(h)try{h(_)}catch(O){console.log(O)}return _}catch(O){if(console.log(O),o.err=O,o.throw)throw O;h&&h();return}}),d.exports=o.verify;var t={};o.opt.slow_leak=c=>{if(t[c])return t[c];var v=i.jwk(c);return t[c]=(a.ossl||a.subtle).importKey("jwk",v,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),t[c]};var y=o.opt;o.opt.fall_verify=async function(c,v,h,b,u){if(u===o.opt.fallback)throw"Signature did not match";u=u||1;var s=c||"";c=o.opt.unpack(c)||c;var w=await i.parse(c),r=v.pub||v,n=await o.opt.slow_leak(r),e=u<=o.opt.fallback?a.Buffer.from(await a.subtle.digest({name:"SHA-256"},new a.TextEncoder().encode(await i.parse(w.m)))):await f(w.m),p,S,j;try{if(p=a.Buffer.from(w.s,b.encode||"base64"),S=new Uint8Array(p),j=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(e)),!j)throw"Signature did not match."}catch{try{p=a.Buffer.from(w.s,"utf8"),S=new Uint8Array(p),j=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(e))}catch{if(!j)throw"Signature did not match."}}var _=j?await i.parse(w.m):l;if(y.fall_soul=s["#"],y.fall_key=s["."],y.fall_val=c,y.fall_state=s[">"],h)try{h(_)}catch(O){console.log(O)}return _},o.opt.fallback=2})(x,"./verify"),x(function(d){var o=x("./shim"),a=x("./settings"),i=x("./sha256");const f=async(l,t,y)=>{const c=l+(t||o.random(8)).toString("utf8"),v=o.Buffer.from(await i(c),"binary"),h=a.keyToJwk(v);return await o.subtle.importKey("jwk",h,{name:"AES-GCM"},!1,["encrypt","decrypt"])};d.exports=f})(x,"./aeskey"),x(function(d){var o=x("./root"),a=x("./shim");x("./settings");var i=x("./aeskey"),f;o.encrypt=o.encrypt||(async(l,t,y,c)=>{try{c=c||{};var v=(t||c).epriv||t;if(f===l)throw"`undefined` not allowed.";if(!v){if(!o.I)throw"No encryption key.";t=await o.I(null,{what:l,how:"encrypt",why:c.why}),v=t.epriv||t}var h=typeof l=="string"?l:await a.stringify(l),b={s:a.random(9),iv:a.random(15)},u=await i(v,b.s,c).then(w=>a.subtle.encrypt({name:c.name||"AES-GCM",iv:new Uint8Array(b.iv)},w,new a.TextEncoder().encode(h))),s={ct:a.Buffer.from(u,"binary").toString(c.encode||"base64"),iv:b.iv.toString(c.encode||"base64"),s:b.s.toString(c.encode||"base64")};if(c.raw||(s="SEA"+await a.stringify(s)),y)try{y(s)}catch(w){console.log(w)}return s}catch(w){if(console.log(w),o.err=w,o.throw)throw w;y&&y();return}}),d.exports=o.encrypt})(x,"./encrypt"),x(function(d){var o=x("./root"),a=x("./shim"),i=x("./settings"),f=x("./aeskey");o.decrypt=o.decrypt||(async(l,t,y,c)=>{try{c=c||{};var v=(t||c).epriv||t;if(!v){if(!o.I)throw"No decryption key.";t=await o.I(null,{what:l,how:"decrypt",why:c.why}),v=t.epriv||t}var h=await i.parse(l),b,u,s;try{b=a.Buffer.from(h.s,c.encode||"base64"),u=a.Buffer.from(h.iv,c.encode||"base64"),s=a.Buffer.from(h.ct,c.encode||"base64");var w=await f(v,b,c).then(n=>a.subtle.decrypt({name:c.name||"AES-GCM",iv:new Uint8Array(u),tagLength:128},n,new Uint8Array(s)))}catch{if(c.encode==="utf8")throw"Could not decrypt";if(o.opt.fallback)return c.encode="utf8",await o.decrypt(l,t,y,c)}var r=await i.parse(new a.TextDecoder("utf8").decode(w));if(y)try{y(r)}catch(n){console.log(n)}return r}catch(n){if(console.log(n),o.err=n,o.throw)throw n;y&&y();return}}),d.exports=o.decrypt})(x,"./decrypt"),x(function(d){var o=x("./root"),a=x("./shim");x("./settings"),o.secret=o.secret||(async(f,l,t,y)=>{try{if(y=y||{},!l||!l.epriv||!l.epub){if(!o.I)throw"No secret mix.";l=await o.I(null,{what:f,how:"secret",why:y.why})}var c=f.epub||f,v=l.epub,h=l.epriv,b=a.ossl||a.subtle,u=i(c),s=Object.assign({public:await b.importKey(...u,!0,[])},{name:"ECDH",namedCurve:"P-256"}),w=i(v,h),r=await b.importKey(...w,!1,["deriveBits"]).then(async e=>{var p=await b.deriveBits(s,e,256),S=new Uint8Array(p),j=await b.importKey("raw",S,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return b.exportKey("jwk",j).then(({k:_})=>_)}),n=r;if(t)try{t(n)}catch(e){console.log(e)}return n}catch(e){if(console.log(e),o.err=e,o.throw)throw e;t&&t();return}});var i=(f,l)=>{var[t,y]=f.split("."),c=l?{d:l}:{};return["jwk",Object.assign(c,{x:t,y,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};d.exports=o.secret})(x,"./secret"),x(function(d){var o=x("./root");o.certify=o.certify||(async(a,i={},f,l,t={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),a=(()=>{var n=[];if(a){if((typeof a=="string"||Array.isArray(a))&&a.indexOf("*")>-1)return"*";if(typeof a=="string")return a;if(Array.isArray(a)){if(a.length===1&&a[0])return typeof a[0]=="object"&&a[0].pub?a[0].pub:typeof a[0]=="string"?a[0]:null;a.map(e=>{typeof e=="string"?n.push(e):typeof e=="object"&&e.pub&&n.push(e.pub)})}return typeof a=="object"&&a.pub?a.pub:n.length>0?n:null}})(),!a)return console.log("No certificant found.");const c=t.expiry&&(typeof t.expiry=="number"||typeof t.expiry=="string")?parseFloat(t.expiry):null,v=(i||{}).read?i.read:null,h=(i||{}).write?i.write:typeof i=="string"||Array.isArray(i)||i["+"]||i["#"]||i["."]||i["="]||i["*"]||i[">"]||i["<"]?i:null,b=(t||{}).block||(t||{}).blacklist||(t||{}).ban||{},u=b.read&&(typeof b.read=="string"||(b.read||{})["#"])?b.read:null,s=typeof b=="string"?b:b.write&&(typeof b.write=="string"||b.write["#"])?b.write:null;if(!v&&!h)return console.log("No policy found.");const w=JSON.stringify(at(at(at(at(at({c:a},c?{e:c}:{}),v?{r:v}:{}),h?{w:h}:{}),u?{rb:u}:{}),s?{wb:s}:{}));var y=await o.sign(w,f,null,{raw:1});if(t.raw||(y="SEA"+JSON.stringify(y)),l)try{l(y)}catch(n){console.log(n)}return y}catch(c){if(o.err=c,o.throw)throw c;l&&l();return}}),d.exports=o.certify})(x,"./certify"),x(function(d){var o=x("./shim"),a=x("./root");a.work=x("./work"),a.sign=x("./sign"),a.verify=x("./verify"),a.encrypt=x("./encrypt"),a.decrypt=x("./decrypt"),a.certify=x("./certify"),a.random=a.random||o.random,a.Buffer=a.Buffer||x("./buffer"),a.keyid=a.keyid||(async i=>{try{const f=o.Buffer.concat(i.replace(/-/g,"+").replace(/_/g,"/").split(".").map(c=>o.Buffer.from(c,"base64"))),l=o.Buffer.concat([o.Buffer.from([153,f.length/256,f.length%256]),f]),t=await sha1hash(l),y=o.Buffer.from(t,"binary");return y.toString("hex",y.length-8)}catch(f){throw console.log(f),f}}),((a.window||{}).GUN||{}).SEA=a,d.exports=a})(x,"./sea"),x(function(d){var o=x("./sea"),a,i;o.window?a=o.window.GUN||{chain:{}}:a=x((i+""==typeof $?".":"")+"./gun",1),o.GUN=a;function f(t){this._={$:this}}f.prototype=function(){function t(){}return t.prototype=a.chain,new t}(),f.prototype.constructor=f,a.chain.user=function(t){var y=this,c=y.back(-1),v;if(t)return t=o.opt.pub((t._||"")["#"])||t,c.get("~"+t);if(v=c.back("user"))return v;var c=c._,h=c,b=h.opt.uuid||l;return(h=(v=h.user=y.chain(new f))._).opt={},h.opt.uuid=function(u){var s=b(),w=c.user;return!w||!(w=w.is)||!(w=w.pub)||(s="~"+w+"/"+s,u&&u.call&&u(null,s)),s},v};function l(){return a.state().toString(36).replace(".","")}a.User=f,f.GUN=a,f.SEA=a.SEA=o,d.exports=f})(x,"./user"),x(function(d){var o,a=""+o!=typeof window?window.Gun||{chain:{}}:x((""+o==typeof $?".":"")+"./gun",1);a.chain.then=function(i,f){var l=this,t=new Promise(function(y,c){l.once(y,f)});return i?t.then(i):t}})(x,"./then"),x(function(d){var o=x("./user"),a=o.SEA,i=o.GUN,f=function(){};o.prototype.create=function(...l){var t=typeof l[0]=="object"&&(l[0].pub||l[0].epub)?l[0]:typeof l[1]=="object"&&(l[1].pub||l[1].epub)?l[1]:null,y=t&&(t.pub||t.epub)?t.pub:typeof l[0]=="string"?l[0]:null,c=t&&(t.pub||t.epub)?t:y&&typeof l[1]=="string"?l[1]:null,v=l.filter(n=>typeof n=="function")[0]||null,h=l&&l.length>1&&typeof l[l.length-1]=="object"?l[l.length-1]:{},b=this,u=b._,s=b.back(-1);if(v=v||f,h=h||{},h.check!==!1){var w;if(y||(w="No user."),(c||"").length<8&&(w="Password too short!"),w)return v({err:i.log(w)}),b}if(u.ing)return(v||f)({err:i.log("User is already being created or authenticated!"),wait:!0}),b;u.ing=!0;var r={};return r.a=function(n){if(r.pubs=n,n&&!h.already){var e={err:i.log("User already created!")};u.ing=!1,(v||f)(e),b.leave();return}r.salt=String.random(64),a.work(c,r.salt,r.b)},r.b=function(n){r.proof=n,t?r.c(t):a.pair(r.c)},r.c=function(n){var e;r.pair=n||{},(e=u.root.user)&&(e._.sea=n,e.is={pub:n.pub,epub:n.epub,alias:y}),r.data={pub:n.pub},r.d()},r.d=function(){r.data.alias=y,r.e()},r.e=function(){r.data.epub=r.pair.epub,a.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},r.proof,r.f,{raw:1})},r.f=function(n){r.data.auth=JSON.stringify({ek:n,s:r.salt}),r.g(r.data.auth)},r.g=function(n){var e;r.data.auth=r.data.auth||n,s.get(e="~"+r.pair.pub).put(r.data).on(r.h);var p={};p[e]={"#":e},s.get("~@"+y).put(p).get(e).on(r.i)},r.h=function(n,e,p,S){S.off(),r.h.ok=1,r.i()},r.i=function(n,e,p,S){S&&(r.i.ok=1,S.off()),!(!r.h.ok||!r.i.ok)&&(u.ing=!1,v({ok:0,pub:r.pair.pub}),f===v&&(t?b.auth(t):b.auth(y,c)))},s.get("~@"+y).once(r.a),b},o.prototype.leave=function(l,t){var y=this,c=y.back(-1)._.user;if(c&&(delete c.is,delete c._.is,delete c._.sea),a.window)try{var v={};v=window.sessionStorage,delete v.recall,delete v.pair}catch{}return y}})(x,"./create"),x(function(d){var o=x("./user"),a=o.SEA,i=o.GUN,f=function(){};o.prototype.auth=function(...t){var y=typeof t[0]=="object"&&(t[0].pub||t[0].epub)?t[0]:typeof t[1]=="object"&&(t[1].pub||t[1].epub)?t[1]:null,c=!y&&typeof t[0]=="string"?t[0]:null,v=c&&typeof t[1]=="string"?t[1]:null,h=t.filter(e=>typeof e=="function")[0]||null,b=t&&t.length>1&&typeof t[t.length-1]=="object"?t[t.length-1]:{},u=this,s=u._,w=u.back(-1);if(s.ing)return(h||f)({err:i.log("User is already being created or authenticated!"),wait:!0}),u;s.ing=!0;var r={},n;return r.a=function(e){if(!e)return r.b();if(!e.pub){var p=[];return Object.keys(e).forEach(function(S){S!="_"&&p.push(e[S])}),r.b(p)}if(r.name)return r.f(e);r.c((r.data=e).auth)},r.b=function(e){var p=(r.list=(r.list||[]).concat(e||[])).shift();if(n===p)return r.name?r.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):r.err("Wrong user or password.");w.get(p).once(r.a)},r.c=function(e){if(n===e)return r.b();if(typeof e=="string")return r.c(l(e));a.work(v,(r.auth=e).s,r.d,r.enc)},r.d=function(e){a.decrypt(r.auth.ek,e,r.e,r.enc)},r.e=function(e){if(n===e)return r.enc?(r.enc=null,r.b()):(r.enc={encode:"utf8"},r.c(r.auth));r.half=e,r.f(r.data)},r.f=function(e){var p=r.half||{},S=r.data||{};r.g(r.lol={pub:e.pub||S.pub,epub:e.epub||S.epub,priv:e.priv||p.priv,epriv:e.epriv||p.epriv})},r.g=function(e){if(!e||!e.pub||!e.epub)return r.b();r.pair=e;var p=w._.user,S=p._;S.tag;var j=S.opt;S=p._=w.get("~"+e.pub)._,S.opt=j,p.is={pub:e.pub,epub:e.epub,alias:c||e.pub},S.sea=r.pair,s.ing=!1;try{v&&n==(l(s.root.graph["~"+e.pub].auth)||"")[":"]&&(b.shuffle=b.change=v)}catch{}if(b.change?r.z():(h||f)(S),a.window&&(u.back("user")._.opt||b).remember)try{var _={};_=window.sessionStorage,_.recall=!0,_.pair=JSON.stringify(e)}catch{}try{w._.tag.auth?w._.on("auth",S):setTimeout(function(){w._.on("auth",S)},1)}catch(O){i.log("Your 'auth' callback crashed with:",O)}},r.z=function(){r.salt=String.random(64),a.work(b.change,r.salt,r.y)},r.y=function(e){a.encrypt({priv:r.pair.priv,epriv:r.pair.epriv},e,r.x,{raw:1})},r.x=function(e){r.w(JSON.stringify({ek:e,s:r.salt}))},r.w=function(e){if(b.shuffle){console.log("migrate core account from UTF8 & shuffle");var p={};Object.keys(r.data).forEach(function(S){p[S]=r.data[S]}),delete p._,p.auth=e,w.get("~"+r.pair.pub).put(p)}w.get("~"+r.pair.pub).get("auth").put(e,h||f)},r.err=function(e){var p={err:i.log(e||"User cannot be found!")};s.ing=!1,(h||f)(p)},r.plugin=function(e){if(!(r.name=e))return r.err();var p=[e];e[0]!=="~"&&(p[1]="~"+e,p[2]="~@"+e),r.b(p)},y?r.g(y):c?w.get("~@"+c).once(r.a):!c&&!v&&a.name(r.plugin),u};function l(t){if(typeof t!="string")return t;try{t=JSON.parse(t)}catch{t={}}return t}})(x,"./auth"),x(function(d){var o=x("./user"),a=o.SEA;o.GUN,o.prototype.recall=function(i,f){var l=this,t=l.back(-1);if(i=i||{},i&&i.sessionStorage){if(a.window)try{var y={};y=window.sessionStorage,y&&(t._.opt.remember=!0,(l.back("user")._.opt||i).remember=!0,(y.recall||y.pair)&&t.user().auth(JSON.parse(y.pair),f))}catch{}return l}return l}})(x,"./recall"),x(function(d){var o=x("./user"),a=o.SEA,i=o.GUN,f=function(){};o.prototype.pair=function(){var l=this,t;try{t=new Proxy({DANGER:"\u2620"},{get:function(y,c,v){if(!(!l.is||!(l._||"").sea))return l._.sea[c]}})}catch{}return t},o.prototype.delete=async function(l,t,y){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var c=this;c.back(-1);var v=c.back("user");try{v.auth(l,t,function(h){var b=(v.is||{}).pub;v.map().once(function(){this.put(null)}),v.leave(),(y||f)({ok:0})})}catch(h){i.log("User.delete failed! Error:",h)}return c},o.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const l=this.back(-1);try{return await authRecall(l),l._.user._}catch{const y="No session!";throw i.log(y),{err:y}}},o.prototype.trust=async function(l){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),i.is(l)&&l.get("pub").get((t,y)=>{console.log(t,y)}),l.get("trust").get(path).put(theirPubkey)},o.prototype.grant=function(l,t){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),v=c._.sea,h="";return y.back(function(b){b.is||(h+=b.get||"")}),async function(){var b,u=await c.get("grant").get(v.pub).get(h).then();u=await a.decrypt(u,v),u||(u=a.random(16).toString(),b=await a.encrypt(u,v),c.get("grant").get(v.pub).get(h).put(b));var s=l.get("pub").then(),w=l.get("epub").then();s=await s,w=await w;var r=await a.secret(w,v);b=await a.encrypt(u,r),c.get("grant").get(s).get(h).put(b,t)}(),y},o.prototype.secret=function(l,t){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var y=this,c=y.back(-1).user(),v=c.pair(),h="";return y.back(function(b){b.is||(h+=b.get||"")}),async function(){var b,u=await c.get("trust").get(v.pub).get(h).then();u=await a.decrypt(u,v),u||(u=a.random(16).toString(),b=await a.encrypt(u,v),c.get("trust").get(v.pub).get(h).put(b)),b=await a.encrypt(l,u),y.put(b,t)}(),y},d.exports=o})(x,"./share"),x(function(d){var o=x("./sea"),a=x("./settings"),i=function(){},f,l=""+f!=typeof window?window.Gun||{on:i}:x((""+f==typeof $?".":"")+"./gun",1);l.on("opt",function(u){u.sea||(u.sea={own:{}},u.on("put",t,u)),this.to.next(u)});function t(u){var s=this,w=s.as,r=u.put,n=r["#"],e=r["."],p=r[":"],S=r[">"],j=u["#"],_;if(!(!n||!e)){if((u._||"").faith&&(w.opt||"").faith&&typeof u._=="function"){o.opt.pack(r,function(k){o.verify(k,!1,function(T){r["="]=o.opt.unpack(T),s.to.next(u)})});return}var O=function(k){w.on("in",{"@":j,err:u.err=k})};if((u._||"").DBG&&((u._||"").DBG.c=+new Date),0<=n.indexOf("<?")&&(_=parseFloat(n.split("<?")[1]||""),_&&S<l.state()-_*1e3)){(_=u._)&&_.stun&&_.stun--;return}if(n==="~@"){t.alias(s,u,p,e,n,w,O);return}if(n.slice(0,2)==="~@"){t.pubs(s,u,p,e,n,w,O);return}if(_=o.opt.pub(n)){t.pub(s,u,p,e,n,w,O,w.user||"",_);return}if(0<=n.indexOf("#")){t.hash(s,u,p,e,n,w,O);return}t.any(s,u,p,e,n,w,O,w.user||"")}}t.hash=function(u,s,w,r,n,e,p){o.work(w,null,function(S){if(S&&S===r.split("#").slice(-1)[0])return u.to.next(s);p("Data hash not same as hash!")},{name:"SHA-256"})},t.alias=function(u,s,w,r,n,e,p){if(!w)return p("Data must exist!");if("~@"+r===c(w))return u.to.next(s);p("Alias not same!")},t.pubs=function(u,s,w,r,n,e,p){if(!w)return p("Alias must exist!");if(r===c(w))return u.to.next(s);p("Alias not same!")},t.pub=async function(u,s,w,r,n,e,p,S,j){var _;const O=await a.parse(w)||{},k=(T,g,m)=>{if(T.m&&T.s&&g&&j)return o.verify(T,j,A=>{if(f!==A&&f!==A.e&&s.put[">"]&&s.put[">"]>parseFloat(A.e))return p("Certificate expired.");if(f!==A&&A.c&&A.w&&(A.c===g||A.c.indexOf("*")>-1)){let U=n.indexOf("/")>-1?n.replace(n.substring(0,n.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const N=Array.isArray(A.w)?A.w:typeof A.w=="object"||typeof A.w=="string"?[A.w]:[];for(const C of N)if(String.match(U,C["#"])&&String.match(r,C["."])||!C["."]&&String.match(U,C["#"])||!C["#"]&&String.match(r,C["."])||String.match(U?U+"/"+r:r,C["#"]||C)){if(C["+"]&&C["+"].indexOf("*")>-1&&U&&U.indexOf(g)==-1&&r.indexOf(g)==-1)return p(`Path "${U}" or key "${r}" must contain string "${g}".`);if(A.wb&&(typeof A.wb=="string"||(A.wb||{})["#"])){var D=u.as.root.$.back(-1);return typeof A.wb=="string"&&A.wb.slice(0,1)!=="~"&&(D=D.get("~"+j)),D.get(A.wb).get(g).once(M=>M&&(M===1||M===!0)?p(`Certificant ${g} blocked.`):m(A))}return m(A)}return p("Certificate verification fail.")}})};if(r==="pub"&&"~"+j===n)return w===j?u.to.next(s):p("Account not same!");if((_=S.is)&&_.pub&&!O["*"]&&!O["+"]&&(j===_.pub||j!==_.pub&&((s._.msg||{}).opt||{}).cert)){o.opt.pack(s.put,T=>{o.sign(T,S._.sea,async function(g){if(f===g)return p(o.err||"Signature fail.");if(s.put[":"]={":":_=o.opt.unpack(g.m),"~":g.s},s.put["="]=_,j===S.is.pub){(_=c(w))&&((e.sea.own[_]=e.sea.own[_]||{})[j]=1),JSON.stringifyAsync(s.put[":"],function(m,A){return m?p(m||"Stringify error."):(s.put[":"]=A,u.to.next(s))});return}if(j!==S.is.pub&&((s._.msg||{}).opt||{}).cert){const m=await a.parse(s._.msg.opt.cert);m&&m.m&&m.s&&k(m,S.is.pub,A=>{s.put[":"]["+"]=m,s.put[":"]["*"]=S.is.pub,JSON.stringifyAsync(s.put[":"],function(D,U){return D?p(D||"Stringify error."):(s.put[":"]=U,u.to.next(s))})})}},{raw:1})});return}o.opt.pack(s.put,T=>{o.verify(T,O["*"]||j,function(g){var m;if(g=o.opt.unpack(g),f===g)return p("Unverified data.");if((m=c(g))&&j===o.opt.pub(m)&&((e.sea.own[m]=e.sea.own[m]||{})[j]=1),O["+"]&&O["+"].m&&O["+"].s&&O["*"])k(O["+"],O["*"],A=>(s.put["="]=g,u.to.next(s)));else return s.put["="]=g,u.to.next(s)})})},t.any=function(u,s,w,r,n,e,p,S){if(e.opt.secure)return p("Soul missing public key at '"+r+"'.");e.on("secure",function(j){if(this.off(),!e.opt.secure)return u.to.next(j);p("Data cannot be changed.")}).on.on("secure",s)};var y=l.valid,c=function(u,s){return typeof(s=y(u))=="string"&&s};(l.state||"").ify;var v=/[^\w_-]/;o.opt.pub=function(u){if(!!u&&(u=u.split("~"),!(!u||!(u=u[1]))&&(u=u.split(v).slice(0,2),!(!u||u.length!=2)&&(u[0]||"")[0]!=="@")))return u=u.slice(0,2).join("."),u},o.opt.stringy=function(u){},o.opt.pack=function(u,s,w,r,n){var e,p;if(o.opt.check(u))return s(u);u&&u["#"]&&u["."]&&u[">"]&&(e=u[":"],p=1),JSON.parseAsync(p?e:u,function(S,j){var _=f!==(j||"")[":"]&&(j||"")["~"];if(!_){s(u);return}s({m:{"#":n||u["#"],".":w||u["."],":":(j||"")[":"],">":u[">"]||l.state.is(r,w)},s:_})})};var h=o.opt;o.opt.unpack=function(u,s,w){var r;if(f!==u){if(u&&f!==(r=u[":"]))return r;if(s=s||h.fall_key,!w&&h.fall_val&&(w={},w[s]=h.fall_val),!(!s||!w)){if(u===w[s]||!o.opt.check(w[s]))return u;var n=w&&w._&&w._["#"]||h.fall_soul,e=l.state.is(w,s)||h.fall_state;if(u&&u.length===4&&n===u[0]&&s===u[1]&&b(e)===b(u[3]))return u[2];if(e<o.opt.shuffle_attack)return u}}},o.opt.shuffle_attack=15463296e5;var b=Math.floor})(x,"./index")})()})(zt);var Ot=typeof window!="undefined"?window.Gun:ut.exports;Ot.chain.promise=function(R){var x=this,R=R||function($){return $};return new Promise(function($,d){x.once(function(o,a){$({put:o,get:a,gun:this})})}).then(R)};Ot.chain.then=function(R){var x=this,$=new Promise((d,o)=>{x.once(function(a,i){d(a,i)})});return R?$.then(R):$};var $t={exports:{}};(function(){function R(){var a=function(i,f,l){if(a.unit=0,!l&&d!==f&&(a.last=""+i<a.last?a.last:""+i,delete(a.$||{})[o]),l=l||a.$||(a.$={}),!i&&Object.keys(l).length)return l;i=""+i;for(var t=0,y=i.length-1,c=i[t],v,h;!(v=l[c])&&t<y;)c+=i[++t];if(v)if(t==y){if(d===f)return d===(h=v[""])?v:(a.unit=1)&&h;v[""]=f}else return d!==f&&delete v[o],a(i.slice(++t),f,v||(v={}));else{if(!x(l,function(b,u){var s=0,w="";if((u||"").length)for(;u[s]==i[s];)w+=u[s++];if(w){if(d===f)return s<=y?void 0:((h||(h={}))[u.slice(s)]=b,b);var r={};if(r[u.slice(s)]=b,s=i.slice(s),s===""?r[""]=f:(r[s]={})[""]=f,l[w]=r,R.debug&&""+w=="undefined"){console.log(0,w);debugger}return delete l[u],!0}})){if(d===f)return;if((l[c]||(l[c]={}))[""]=f,R.debug&&""+c=="undefined"){console.log(1,c);debugger}}if(d===f)return h}};return a}if(R.map=function a(i,f,l,t){t=t||[];var y=typeof i=="function"?i.$||{}:i;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!y){if(typeof y=="string"){if(R.debug)throw["BUG:",i,f,l,t];return}var c=(y[o]||$).sort||(y[o]=function _(){return _.sort=Object.keys(y).sort(),_}()).sort,v;l=l===!0?{branch:!0}:l||{},(v=l.reverse)&&(c=c.slice(0).reverse());for(var h=l.start,b=l.end,u="\uFFFF",s=0,w=c.length;s<w;s++){var r=c[s],n=y[r],e,p,S;if(!(!n||r===""||o===r)&&(p=t.slice(0),p.push(r),S=p.join(""),!(d!==h&&S<(h||"").slice(0,S.length))&&!(d!==b&&(b||u)<S))){if(v&&(e=a(n,f,l,p),d!==e))return e;if(d!==(e=n[""])){var j=1;if(d!==h&&S<(h||"")&&(j=0),d!==b&&S>(b||u)&&(j=0),j&&(e=f(e,S,r,t),d!==e))return e}else if(l.branch&&(e=f(d,S,r,t),d!==e))return e;if(t=p,!v&&(e=a(n,f,l,t),d!==e))return e;t.pop()}}}},typeof window!="undefined")window.Radix=R;else try{$t.exports=R}catch{}var x=R.object=function(a,i,f){for(var l in a)if(!!a.hasOwnProperty(l)&&(f=i(a[l],l))!==d)return f},$={},d,o=String.fromCharCode(24)})();var Dt={exports:{}},Lt={exports:{}};(function(R){(function(){var x={},$,d=setTimeout.turn||typeof setImmediate!=""+$&&setImmediate||setTimeout;x.parseAsync=function(a,i,f,l){if(typeof a!="string"){try{i($,JSON.parse(a))}catch(c){i(c)}return}var t={i:0,text:a,done:i,l:a.length,up:[]};l=l||1024*32,y();function y(){for(var c=t.text,v=t.i,h=t.l,b=0,u=t.w,s,w;b++<l;){var r=c[v++];if(v>h){t.end=!0;break}if(u)v=c.indexOf('"',v-1),r=c[v],w=c[v-1]=="\\",s=s||w,r=='"'&&!w&&(u=$,w=t.s,t.a?(w=c.slice(t.sl,v),(s||1+w.indexOf("\\u"))&&(w=JSON.parse('"'+w+'"')),t.at instanceof Array?t.at.push(t.s=w):(t.at||(t.end=b=l,w=$),(t.at||{})[t.s]=t.s=w)):(t.s=c.slice(t.sl,v),(s||1+t.s.indexOf("\\u"))&&(t.s=JSON.parse('"'+t.s+'"'))),t.a=s=$),++v;else switch(r){case'"':t.sl=v,u=!0;break;case":":t.ai=v,t.a=!0;break;case",":(t.a||t.at instanceof Array)&&(w=c.slice(t.ai,v-1))&&$!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):t.at[t.s]=w),t.a=$,t.at instanceof Array&&(t.a=!0,t.ai=v);break;case"{":t.up.push(t.at||(t.at={})),t.at instanceof Array?t.at.push(t.at={}):$!==(w=t.s)&&(t.at[w]=t.at={}),t.a=$;break;case"}":t.a&&(w=c.slice(t.ai,v-1))&&$!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):(t.at||(t.end=b=l,w=$),(t.at||{})[t.s]=w)),t.a=$,t.at=t.up.pop();break;case"[":$!==(w=t.s)?(t.up.push(t.at),t.at[w]=t.at=[]):t.at||t.up.push(t.at=[]),t.a=!0,t.ai=v;break;case"]":t.a&&(w=c.slice(t.ai,v-1))&&$!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):t.at[t.s]=w),t.a=$,t.at=t.up.pop();break}}if(t.s=$,t.i=v,t.w=u,t.end){if(w=t.at,$===w)try{w=JSON.parse(a)}catch(n){return t.done(n)}t.done($,w)}else d(y)}};function o(a){var i=parseFloat(a);if(!isNaN(i))return i;if(a=a.trim(),a=="true")return!0;if(a=="false")return!1;if(a=="null")return null}x.stringifyAsync=function(a,i,f,l,t){t=t||{},t.text=t.text||"",t.up=[t.at={d:a}],t.done=i,t.i=0;var y=0;c();function c(){var v=t.at,h=v.d,b="",u;switch(v.i&&v.i-v.j>0&&(b+=","),$!==(u=v.k)&&(b+=JSON.stringify(u)+":"),typeof h){case"boolean":b+=""+h;break;case"string":b+=JSON.stringify(h);break;case"number":b+=h;break;case"object":if(!h){b+="null";break}if(h instanceof Array){b+="[",v={i:-1,as:h,up:v,j:0},v.l=h.length,t.up.push(t.at=v);break}if(typeof(h||"").toJSON!="function"){b+="{",v={i:-1,ok:Object.keys(h).sort(),as:h,up:v,j:0},v.l=v.ok.length,t.up.push(t.at=v);break}if(u=h.toJSON()){b+=u;break}case"function":if(v.as instanceof Array){b+="null";break}default:b="",v.j++}for(t.text+=b;1+v.i>=v.l;)t.text+=v.ok?"}":"]",v=t.at=v.up;if(++v.i<v.l){if((u=v.ok)?v.d=v.as[v.k=u[v.i]]:v.d=v.as[v.i],++y<9)return c();y=0,d(c);return}t.done($,t.text)}},typeof window!=""+$&&(window.YSON=x);try{""+$!="object"&&(R.exports=x)}catch{}typeof JSON!=""+$&&(JSON.parseAsync=x.parseAsync,JSON.stringifyAsync=x.stringifyAsync)})()})(Lt);(function(){function R(d){d=d||{},d.log=d.log||console.log,d.file=String(d.file||"radata");var o=(R.has||(R.has={}))[d.file];if(o)return o;d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.until=d.until||d.wait||250,d.batch=d.batch||10*1e3,d.chunk=d.chunk||1024*1024*1,d.code=d.code||{},d.code.from=d.code.from||"!",d.jsonify=!0;function a(s){return encodeURIComponent(s).replace(/\*/g,"%2A")}function i(s){return t!==s&&(!s||typeof s!="object")}var f=""+t==typeof setImmediate?setTimeout:setImmediate,l=setTimeout.turn||f,t,y=$.object,c=0;if(!d.store)return d.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!d.store.put)return d.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!d.store.get)return d.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");!d.store.list;var v=JSON.parseAsync||function(s,w,r){var n;try{w(n,JSON.parse(s,r))}catch(e){w(e)}},h=function(s,w,r,n,e){if(typeof w=="function"){var p=r||{};r=w,h.read(s,r,p,e||n);return}h.save(s,w,r,n,e)};h.save=function(s,w,r,n,e){var p={key:s},S,j;p.find=function(_){var O;if(p.file=_||(_=d.code.from),e&&(e=e[_]=e[_]||{}),e&&(e.sf=e.sf||+new Date),O=h.disk[_]){p.mix(t,O);return}h.parse(_,p.mix,t,e)},p.mix=function(_,O){if(e&&(e.sml=+new Date),e&&(e.sm=e.sm||+new Date),p.err=_||p.err){r(_);return}var k=p.file=(O||"").file||p.file,T;if(!O&&k!==d.code.from){h.find.bad(k),h.save(s,w,r,n);return}if((O=h.disk[k]||(h.disk[k]=O||$())).file||(O.file=k),d.compare&&(w=d.compare(O(s),w,s,k),t===w)){r(_,-1);return}if((p.disk=O)(s,w),n&&((T=(T=O.tags||(O.tags={}))[n]||(T[n]=h.tags[n]||(h.tags[n]={})))[k]||(T[k]=h.one[n]||(h.one[n]=r)),r=null),e&&(e.st=e.st||+new Date),O.Q){r&&O.Q.push(r);return}O.Q=r?[r]:[],O.to=setTimeout(p.write,d.until)},p.write=function(){e&&(e.sto=e.sto||+new Date);var _=S=p.file,O=p.disk;j=p.q=O.Q,p.tags=O.tags,delete O.Q,delete h.disk[_],delete O.tags,h.write(_,O,p.ack,t,e)},p.ack=function(_,O){e&&(e.sa=e.sa||+new Date),e&&(e.sal=j.length);var k,T;for(var g in h.tags)if(!!h.tags.hasOwnProperty(g)){var m=h.tags[g];if(!((T=h.disk[S])&&(T=T.tags)&&T[m])){k=m[S],delete m[S];var A;for(var D in m)if(m.hasOwnProperty(D)){A=!0;break}A||(delete h.tags[m],k&&k(_,O))}}!j&&(j="");for(var U=j.length,N=0,C=+new Date;N<U;N++)(k=j[N])&&k(_,O);console.STAT&&console.STAT(C,+new Date-C,"rad acks",a(p.file)),console.STAT&&console.STAT(C,j.length,"rad acks #",a(p.file))},r||(r=function(_,O){}),h.find(s,p.find)},h.disk={},h.one={},h.tags={};var b=0;h.write=function(s,w,r,n,e){if(!w){r("No radix!");return}n=typeof n=="object"?n:{force:n};var p=function(){},S,j;if(p.text="",p.file=s=w.file||(w.file=s),!s){r("What file?");return}if(p.write=function(){var _=w.raw=p.text;h.disk[s=w.file||p.file||s]=w;var O=+new Date;e&&(e.wd=O),h.find.add(s,function(T){if(e&&(e.wa=+new Date),T){r(T);return}d.store.put(a(s),_,function(m,A){e&&(e.wp=+new Date),console.STAT&&console.STAT(O,c=+new Date-O,"wrote disk",JSON.stringify(s),++b,"total all writes."),r(m,A||1),w.Q||delete h.disk[s]})})},p.split=function(){var _=+new Date;e&&(e.wf=_),p.text="",p.count||(p.count=0,$.map(w,function(){p.count++})),e&&(e.wfc=p.count),p.limit=Math.ceil(p.count/2);var O=p.count;return p.count=0,e&&(e.wf1=+new Date),p.sub=$(),$.map(w,p.slice,{reverse:1}),e&&(e.wf2=+new Date),h.write(p.end,p.sub,p.both,n),e&&(e.wf3=+new Date),p.hub=$(),$.map(w,p.stop),e&&(e.wf4=+new Date),h.write(w.file,p.hub,p.both,n),e&&(e.wf5=+new Date),console.STAT&&console.STAT(_,+new Date-_,"rad split",a(w.file),O),!0},p.slice=function(_,O){if(p.sub(p.end=O,_),p.limit<=++p.count)return!0},p.stop=function(_,O){if(O>=p.end)return!0;p.hub(O,_)},p.both=function(_,O){if(e&&(e.wfd=+new Date),j){r(_||j);return}if(S){r(_,O);return}S=!0,j=_},p.each=function(_,O,k,T){if(t!==_&&p.count++,d.max<=(_||"").length)return r("Data too big!"),!0;var g=R.encode(T.length)+"#"+R.encode(k)+(t===_?"":":"+R.encode(_))+`
`;if(d.chunk<p.text.length+g.length&&1<p.count&&!n.force)return p.split();p.text+=g},d.jsonify){h.write.jsonify(p,w,r,n,e);return}$.map(w,p.each,!0)||p.write()},h.write.jsonify=function(s,w,r,n,e){var p,S=+new Date;e&&(e.w=S);try{p=JSON.stringify(w.$)}catch{r("Cannot radisk!");return}if(e&&(e.ws=+new Date),console.STAT&&console.STAT(S,+new Date-S,"rad stringified JSON"),d.chunk<p.length&&!n.force){var j=0;if($.map(w,function(){if(j++)return!0}),j>1)return s.split()}s.text=p,s.write()},h.range=function(s,w){if(!(!s||!w)){if(t===w.start&&t===w.end||i(s))return s;var r=$();return $.map(s,function(n,e){r(e,n)},w),r("")}},function(){h.read=function(s,w,r,n){r=r||{};var e={key:s};e.find=function(p){var S;if(e.file=p||(p=d.code.from),n&&(n=n[p]=n[p]||{}),n&&(n.rf=n.rf||+new Date),S=h.disk[e.file=p]){e.check(t,S);return}h.parse(p,e.check,t,n)},e.get=function(p,S,j){if(n&&(n.rgl=+new Date),n&&(n.rg=n.rg||+new Date),e.err=p||e.err){w(p);return}var _=e.file=(S||"").file||e.file;if(!S&&_!==d.code.from){h.find.bad(_),h.read(s,w,r);return}if(S=h.disk[_]||(h.disk[_]=S),!S){w(_===d.code.from?t:"No file!");return}S.file||(S.file=_);var O=h.range(S(s),r);if(n&&(n.rr=+new Date),r.unit=S.unit,r.chunks=(r.chunks||0)+1,r.parsed=(r.parsed||0)+((j||"").parsed||r.chunks*d.chunk),r.more=1,r.next=t,$.map(h.list,function(m,A){if(!(!m||_===A))return r.next=A,1},r.reverse?{reverse:1,end:_}:{start:_}),n&&(n.rl=+new Date),r.next||(r.more=0),r.next&&(!r.reverse&&(s<r.next&&r.next.indexOf(s)!=0||t!==r.end&&(r.end||"\uFFFF")<r.next)&&(r.more=0),r.reverse&&(s>r.next&&s.indexOf(r.next)!=0||t!==r.start&&(r.start||"")>r.next&&_<=r.start)&&(r.more=0)),!r.more){w(e.err,O,r);return}if(O&&w(e.err,O,r),!(r.parsed>=r.limit)){var k=+new Date;n&&(n.rm=k);var T=r.next;f(function(){console.STAT&&console.STAT(k,+new Date-k,"rad more"),h.parse(T,e.check)},0)}},e.check=function(p,S,j){if(e.get(p,S,j),!(!S||S.check)){S.check=1;var _=+new Date;(j||(j={})).file||(j.file=e.file),$.map(S,function(O,k){h.find(k,function(T){if((T||(T=d.code.from))!==j.file){var g=(""+Math.random()).slice(-3);l(function(){h.save(k,O,function m(A,D){if(A){h.save(k,O,m);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",g,a(k),a(j.file),a(T))})},0)}})}),console.STAT&&console.STAT(_,+new Date-_,"rad check")}},h.find(s||(r.reverse?r.end||"":r.start||""),e.find)}}(),function(){var s=0,w={},r=String.fromCharCode(31);h.parse=function(n,e,p,S){var j;if(!n)return e();if(j=w[n]){j.push(e);return}j=w[n]=[e];var _=function(){},O={file:n};(_.disk=$()).file=n,_.read=function(T,g){if(S&&(S.rpg=+new Date),console.STAT&&console.STAT(k,+new Date-k,"read disk",JSON.stringify(n),++s,"total all parses."),(_.err=T)||(_.not=!g)){delete w[n],_.map(j,_.ack);return}if(typeof g!="string"){try{d.max<=g.length?_.err="Chunk too big!":g=g.toString()}catch(m){_.err=m}if(_.err){delete w[n],_.map(j,_.ack);return}}if(O.parsed=g.length,S&&(S.rpl=O.parsed),S&&(S.rpa=j.length),k=+new Date,!(d.jsonify||g[0]==="{")){_.radec(T,g);return}v(g,function(m,A){if(!m){delete w[n],_.disk.$=A,console.STAT&&(c=+new Date-k)>9&&console.STAT(k,c,"rad parsed JSON"),S&&(S.rpd=+new Date),_.map(j,_.ack);return}if(g[0]==="{"){delete w[n],_.err="JSON error!",_.map(j,_.ack);return}_.radec(m,g)})},_.map=function(){if(!(!j||!j.length)){for(var T=+new Date,g=_.err,m=_.not?t:_.disk,A=0,D;A<9&&(D=j[A++]);)D(g,m,O);console.STAT&&console.STAT(T,+new Date-T,"rad packs",a(n)),console.STAT&&console.STAT(T,A,"rad packs #",a(n)),!!(j=j.slice(A)).length&&l(_.map,0)}},_.ack=function(T){if(!!T){if(_.err||_.not){T(_.err,t,O);return}T(t,_.disk,O)}},_.radec=function(T,g){delete w[n],k=+new Date;var m=_.split(g),A=[],D,U,N;if(!m||m[1]!==0){_.err="File '"+n+"' does not have root radix! ",_.map(j,_.ack);return}for(;m;)U=N=t,D=m[1],m=_.split(m[2])||"",m[0]=="#"&&(U=m[1],A=A.slice(0,D),D<=A.length&&A.push(U)),m=_.split(m[2])||"",m[0]!=`
`&&((m[0]=="="||m[0]==":")&&(N=m[1]),t!==U&&t!==N&&_.disk(A.join(""),N),m=_.split(m[2]));console.STAT&&console.STAT(k,+new Date-k,"parsed RAD"),_.map(j,_.ack)},_.split=function(T){if(!!T){var g=[],m={},A=-1,D="";if(A=T.indexOf(r),!!T[A])return D=T.slice(0,A),g[0]=D,g[1]=R.decode(T.slice(A),m),g[2]=T.slice(A+m.i),g}},h.disk&&(p||(p=(h.disk[n]||"").raw));var k=+new Date;if(S&&(S.rp=k),p)return l(function(){_.read(t,p)},0);d.store.get(a(n),_.read)}}(),function(){var s,w=String.fromCharCode(28),r;h.find=function(p,S){if(!s){if(r){r.push([p,S]);return}r=[[p,S]],h.parse(w,n);return}$.map(h.list=s,function(j,_){if(!!j)return S(_)||!0},{reverse:1,end:p})||S(d.code.from)},h.find.add=function(p,S){var j=s(p);if(j||p===w){S(t,1);return}s(p,1),S.found=(S.found||0)+1,h.write(w,s,function(_,O){if(_){S(_);return}S.found=(S.found||0)-1,S.found===0&&S(t,1)},!0)},h.find.bad=function(p,S){s(p,0),h.write(w,s,S||u)};function n(p,S){if(p){d.log("list",p),setTimeout(function(){h.parse(w,n)},1e3);return}if(S){e(S);return}if(s=s||S||$(),!d.store.list){e(s);return}d.store.list(function(j){if(!j){e(s);return}h.find.add(j,u)})}function e(p,S){s=s||p,s.file=w,S=r,r=null,y(S,function(j){h.find(j[0],j[1])})}}();try{!x.window&&require("./radmigtmp")(h)}catch{}var u=function(){},t;return R.has[d.file]=h,h}if(function(){var d=String.fromCharCode(31);R.encode=function(o,a,i){i=i||d;var f=i,l;if(typeof o=="string"){for(var t=o.indexOf(i);t!=-1;)f+=i,t=o.indexOf(i,t+1);return f+'"'+o+i}else{if(o&&o["#"]&&Object.keys(o).length==1)return f+"#"+l+f;if(typeof o=="number")return f+"+"+(o||0)+f;if(o===null)return f+" "+f;if(o===!0)return f+"+"+f;if(o===!1)return f+"-"+f}},R.decode=function(o,a,i){i=i||d;var f="",l=-1,t=0,y,c;if(i===o[0]){for(;i===o[++l];)++t;for(c=o[y=t]||!0;--t>=0;)l=o.indexOf(i,l+1);if(l==-1&&(l=o.length),f=o.slice(y+1,l),a&&(a.i=l+1),c==='"')return f;if(c==="#")return{"#":f};if(c==="+")return f.length===0?!0:parseFloat(f);if(c===" ")return null;if(c==="-")return!1}}}(),typeof window!="undefined"){var x=window.Gun,$=window.Radix;window.Radisk=R}else{var x=ut.exports,$=$t.exports;try{Dt.exports=R}catch{}}R.Radix=$})();var nt=typeof window!="undefined"?window.Gun:ut.exports;nt.on("create",function(R){nt.TESTING&&(R.opt.file="radatatest"),this.to.next(R);var x=R.opt,$;if(!(x.rad===!1||x.radisk===!1)&&!($+""!=typeof process&&""+(process.env||"").RAD=="false")){var d=nt.window&&nt.window.Radisk||Dt.exports,o=d.Radix,a=d(x),i=String.fromCharCode(27),f=0;R.on("put",function(t){if(this.to.next(t),!(t._||"").rad){var y=t["#"],c=t.put,v=c["#"],h=c["."],b=c[":"],u=c[">"],s=(t._||"").DBG;s&&(s.sp=s.sp||+new Date);var w=(t._||"").RPS||((t._||"").RPS=+new Date);a(v+i+h,{":":b,">":u},function(r,n){if(s&&(s.spd=s.spd||+new Date),console.STAT&&console.STAT(w,+new Date-w,"put"),r){R.on("in",{"@":y,err:r,DBG:s});return}R.on("in",{"@":y,ok:n,DBG:s})},!1,s&&(s.r=s.r||{})),s&&(s.sps=s.sps||+new Date)}}),R.on("get",function(t){this.to.next(t);var y=t._||"",c=y.DBG=t.DBG;c&&(c.sg=+new Date);var v=t["#"],h=t.get,b=t.get["#"],u=t.get["."]||"",s={},w,r,n,e;if(typeof b=="string"?r=b:b&&($!==(n=b["*"])&&(s.limit=e=1),$!==b[">"]&&(s.start=b[">"]),$!==b["<"]&&(s.end=b["<"]),r=e?""+n:n||b["="],e=null),r&&!s.limit&&(typeof u=="string"?r=r+i+(s.atom=u):u&&($!==u[">"]&&(s.start=u[">"],s.limit=1),$!==u["<"]&&(s.end=u["<"],s.limit=1),$!==(n=u["*"])&&(s.limit=e=1),r&&(r=r+i+(e?""+(n||""):n||(s.atom=u["="]||""))))),((n=h["%"])||s.limit)&&(s.limit=n<=(s.pack||1e3*100)?n:1),(u["-"]||(b||{})["-"]||h["-"])&&(s.reverse=!0),(n=(R.next||"")[b])&&n.put){if(s.atom){if(n=(n.next||"")[s.atom],n&&n.rad)return}else if(n&&n.rad)return}var p=nt.state(),S=+new Date,j=0;c&&(c.sgm=S),a(r||"",function(O,k,T){c&&(c.sgr=+new Date),c&&(c.sgi=T);try{x.store.stats.get.time[l%50]=+new Date-S,++l,x.store.stats.get.count++,O&&(x.store.stats.get.err=O)}catch{}console.STAT&&console.STAT(S,+new Date-S,"got",JSON.stringify(r)),S=+new Date,T=T||"";var g,m;if(T.unit&&k&&$!==(g=k[":"])&&$!==(m=k[">"])){var A=r.split(i),D=A[0],U=A[1];(w=w||{})[D]=nt.state.ify(w[D],U,m,g,D),R.$.get(D).get(U)._.rad=p}else k&&(typeof k!="string"&&(s.atom?k=$:o.map(k,_,s)),!w&&k&&_(k,""),!s.atom&&!u&typeof b=="string"&&!s.limit&&!s.more&&(R.$.get(b)._.rad=p));c&&(c.sgp=+new Date),console.STAT&&(f=+new Date-S)>9&&(console.STAT(S,f,"got prep time"),console.STAT(S,j,"got prep #")),j=0,S=+new Date;var N=function(){};N.faith=!0,N.rad=h,R.on("in",{"@":v,put:w,"%":T.more?1:$,err:O||$,_:N,DBG:c}),console.STAT&&(f=+new Date-S)>9&&console.STAT(S,f,"got emit",Object.keys(w||{}).length),w=$},s,c&&(c.r=c.r||{})),c&&(c.sgd=+new Date),console.STAT&&(f=+new Date-S)>9&&console.STAT(S,f,"get call");function _(O,k,T,g){if(j++,!!O){k=(r+k).split(i);var m=k.slice(0,1)[0];if(k=k.slice(-1)[0],s.limit&&s.limit<=s.count)return!0;var A,D,U=m,N=k;if(typeof O!="string"){A=O[":"],D=O[">"],(w=w||{})[U]=nt.state.ify(w[U],N,D,A,U),s.count=(s.count||0)+((A||"").length||9);return}s.count=(s.count||0)+O.length;var C=O.lastIndexOf(">"),M=d.decode(O.slice(C+1),null,i);O=d.decode(O.slice(0,C),null,i),(w=w||{})[m]=nt.state.ify(w[m],k,M,O,m)}}}),nt.valid,(x.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}});var Vt={exports:{}};(function(){function R($){$=$||{},$.file=String($.file||"radata");var d=R[$.file],o=null,a;if(d)return console.log("Warning: reusing same IndexedDB store and options as 1st."),R[$.file];d=R[$.file]=function(){};try{$.indexedDB=$.indexedDB||R.indexedDB||indexedDB}catch{}try{if(!$.indexedDB||location.protocol=="file:"){var i=d.d||(d.d={});return d.put=function(f,l,t){i[f]=l,setTimeout(function(){t(null,1)},250)},d.get=function(f,l){setTimeout(function(){l(null,i[f]||a)},5)},console.log("Warning: No indexedDB exists to persist data to!"),d}}catch{}return d.start=function(){var f=indexedDB.open($.file,1);f.onupgradeneeded=function(l){l.target.result.createObjectStore($.file)},f.onsuccess=function(){o=f.result},f.onerror=function(l){console.log(l||1)}},d.start(),d.put=function(f,l,t){if(!o){setTimeout(function(){d.put(f,l,t)},1);return}var y=o.transaction([$.file],"readwrite"),c=y.objectStore($.file),v=c.put(l,""+f);v.onsuccess=c.onsuccess=y.onsuccess=function(){t(null,1)},v.onabort=c.onabort=y.onabort=function(h){t(h||"put.tx.abort")},v.onerror=c.onerror=y.onerror=function(h){t(h||"put.tx.error")}},d.get=function(f,l){if(!o){setTimeout(function(){d.get(f,l)},9);return}var t=o.transaction([$.file],"readonly"),y=t.objectStore($.file),c=y.get(""+f);c.onsuccess=function(){l(null,c.result)},c.onabort=function(v){l(v||4)},c.onerror=function(v){l(v||5)}},setInterval(function(){o&&o.close(),o=null,d.start()},1e3*15),d}if(typeof window!="undefined")(R.window=window).RindexedDB=R,R.indexedDB=window.indexedDB;else try{Vt.exports=R}catch{}try{var x=R.window.Gun||require("../gun");x.on("create",function($){this.to.next($),$.opt.store=$.opt.store||R($.opt)})}catch{}})();(function(){var R=typeof window!="undefined"?window.Gun:ut.exports;R.on("create",function(x){})})();const Qt={peers:["https://gun-manhattan.herokuapp.com/gun"]},yt=ot({peers:Qt.peers,localStorage:!1});var Ct;const Xt=(Ct=ot.node)==null?void 0:Ct.soul;var It;const Yt=(It=ot.node)==null?void 0:It.is;ot.state;var Ut;(Ut=ot==null?void 0:ot.text)==null||Ut.random;function wt(R){if(!!R)return R.substring(R.lastIndexOf("/")+1)}var Et={};(function(R){var x=et&&et.__extends||function(){var J=function(E,I){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,G){W.__proto__=G}||function(W,G){for(var P in G)Object.prototype.hasOwnProperty.call(G,P)&&(W[P]=G[P])},J(E,I)};return function(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");J(E,I);function W(){this.constructor=E}E.prototype=I===null?Object.create(I):(W.prototype=I.prototype,new W)}}(),$=et&&et.__classPrivateFieldSet||function(J,E,I){if(!E.has(J))throw new TypeError("attempted to set private field on non-instance");return E.set(J,I),I},d=et&&et.__classPrivateFieldGet||function(J,E){if(!E.has(J))throw new TypeError("attempted to get private field on non-instance");return E.get(J)},o,a,i,f,l,t,y,c,v,h,b,u,s,w,r,n,e,p,S,j,_,O;R.__esModule=!0,R.default=void 0;var k=function(J){var E=131,I=137,W=0;J+="x";for(var G=Math.floor(9007199254740991/I),P=0;P<J.length;P++)W>G&&(W=Math.floor(W/I)),W=W*E+J.charCodeAt(P);return W},T="0123456789abcdef".split(""),g=[-2147483648,8388608,32768,128],m=[24,16,8,0],A=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],D=[],U=function(){function J(E,I){E===void 0&&(E=!1),I===void 0&&(I=!1),o.set(this,void 0),a.set(this,void 0),i.set(this,void 0),f.set(this,void 0),l.set(this,void 0),t.set(this,void 0),y.set(this,void 0),c.set(this,void 0),v.set(this,void 0),h.set(this,void 0),b.set(this,void 0),u.set(this,void 0),s.set(this,void 0),w.set(this,void 0),r.set(this,void 0),n.set(this,void 0),e.set(this,0),p.set(this,void 0),this.init(E,I)}return J.prototype.init=function(E,I){I?(D[0]=D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0,$(this,a,D)):$(this,a,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),E?($(this,t,3238371032),$(this,y,914150663),$(this,c,812702999),$(this,v,4144912697),$(this,h,4290775857),$(this,b,1750603025),$(this,u,1694076839),$(this,s,3204075428)):($(this,t,1779033703),$(this,y,3144134277),$(this,c,1013904242),$(this,v,2773480762),$(this,h,1359893119),$(this,b,2600822924),$(this,u,528734635),$(this,s,1541459225)),$(this,o,$(this,p,$(this,i,$(this,r,0)))),$(this,f,$(this,w,!1)),$(this,l,!0),$(this,n,E)},J.prototype.update=function(E){if(d(this,f))return this;var I;E instanceof ArrayBuffer?I=new Uint8Array(E):I=E;for(var W=0,G=I.length,P=d(this,a);W<G;){var H=void 0;if(d(this,w)&&($(this,w,!1),P[0]=d(this,o),P[16]=P[1]=P[2]=P[3]=P[4]=P[5]=P[6]=P[7]=P[8]=P[9]=P[10]=P[11]=P[12]=P[13]=P[14]=P[15]=0),typeof I!="string")for(H=d(this,p);W<G&&H<64;++W)P[H>>2]|=I[W]<<m[H++&3];else for(H=d(this,p);W<G&&H<64;++W){var F=I.charCodeAt(W);F<128?P[H>>2]|=F<<m[H++&3]:F<2048?(P[H>>2]|=(192|F>>6)<<m[H++&3],P[H>>2]|=(128|F&63)<<m[H++&3]):F<55296||F>=57344?(P[H>>2]|=(224|F>>12)<<m[H++&3],P[H>>2]|=(128|F>>6&63)<<m[H++&3],P[H>>2]|=(128|F&63)<<m[H++&3]):(F=65536+((F&1023)<<10|I.charCodeAt(++W)&1023),P[H>>2]|=(240|F>>18)<<m[H++&3],P[H>>2]|=(128|F>>12&63)<<m[H++&3],P[H>>2]|=(128|F>>6&63)<<m[H++&3],P[H>>2]|=(128|F&63)<<m[H++&3])}$(this,e,H),$(this,i,d(this,i)+(H-d(this,p))),H>=64?($(this,o,P[16]),$(this,p,H-64),this.hash(),$(this,w,!0)):$(this,p,H)}return d(this,i)>4294967295&&($(this,r,d(this,r)+(d(this,i)/4294967296<<0)),$(this,i,d(this,i)%4294967296)),this},J.prototype.finalize=function(){if(!d(this,f)){$(this,f,!0);var E=d(this,a),I=d(this,e);E[16]=d(this,o),E[I>>2]|=g[I&3],$(this,o,E[16]),I>=56&&(d(this,w)||this.hash(),E[0]=d(this,o),E[16]=E[1]=E[2]=E[3]=E[4]=E[5]=E[6]=E[7]=E[8]=E[9]=E[10]=E[11]=E[12]=E[13]=E[14]=E[15]=0),E[14]=d(this,r)<<3|d(this,i)>>>29,E[15]=d(this,i)<<3,this.hash()}},J.prototype.hash=function(){for(var E=d(this,t),I=d(this,y),W=d(this,c),G=d(this,v),P=d(this,h),H=d(this,b),F=d(this,u),K=d(this,s),z=d(this,a),V,L,Q,q,X,rt,ft,dt,vt,lt,it=16;it<64;++it)q=z[it-15],V=(q>>>7|q<<25)^(q>>>18|q<<14)^q>>>3,q=z[it-2],L=(q>>>17|q<<15)^(q>>>19|q<<13)^q>>>10,z[it]=z[it-16]+V+z[it-7]+L<<0;lt=I&W;for(var Y=0;Y<64;Y+=4)d(this,l)?(d(this,n)?(ft=300032,q=z[0]-1413257819,K=q-150054599<<0,G=q+24177077<<0):(ft=704751109,q=z[0]-210244248,K=q-1521486534<<0,G=q+143694565<<0),$(this,l,!1)):(V=(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10),L=(P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7),ft=E&I,Q=ft^E&W^lt,rt=P&H^~P&F,q=K+L+rt+A[Y]+z[Y],X=V+Q,K=G+q<<0,G=q+X<<0),V=(G>>>2|G<<30)^(G>>>13|G<<19)^(G>>>22|G<<10),L=(K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7),dt=G&E,Q=dt^G&I^ft,rt=K&P^~K&H,q=F+L+rt+A[Y+1]+z[Y+1],X=V+Q,F=W+q<<0,W=q+X<<0,V=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),L=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),vt=W&G,Q=vt^W&E^dt,rt=F&K^~F&P,q=H+L+rt+A[Y+2]+z[Y+2],X=V+Q,H=I+q<<0,I=q+X<<0,V=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),L=(H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7),lt=I&W,Q=lt^I&G^vt,rt=H&F^~H&K,q=P+L+rt+A[Y+3]+z[Y+3],X=V+Q,P=E+q<<0,E=q+X<<0;$(this,t,d(this,t)+E<<0),$(this,y,d(this,y)+I<<0),$(this,c,d(this,c)+W<<0),$(this,v,d(this,v)+G<<0),$(this,h,d(this,h)+P<<0),$(this,b,d(this,b)+H<<0),$(this,u,d(this,u)+F<<0),$(this,s,d(this,s)+K<<0)},J.prototype.hex=function(){this.finalize();var E=d(this,t),I=d(this,y),W=d(this,c),G=d(this,v),P=d(this,h),H=d(this,b),F=d(this,u),K=d(this,s),z=T[E>>28&15]+T[E>>24&15]+T[E>>20&15]+T[E>>16&15]+T[E>>12&15]+T[E>>8&15]+T[E>>4&15]+T[E&15]+T[I>>28&15]+T[I>>24&15]+T[I>>20&15]+T[I>>16&15]+T[I>>12&15]+T[I>>8&15]+T[I>>4&15]+T[I&15]+T[W>>28&15]+T[W>>24&15]+T[W>>20&15]+T[W>>16&15]+T[W>>12&15]+T[W>>8&15]+T[W>>4&15]+T[W&15]+T[G>>28&15]+T[G>>24&15]+T[G>>20&15]+T[G>>16&15]+T[G>>12&15]+T[G>>8&15]+T[G>>4&15]+T[G&15]+T[P>>28&15]+T[P>>24&15]+T[P>>20&15]+T[P>>16&15]+T[P>>12&15]+T[P>>8&15]+T[P>>4&15]+T[P&15]+T[H>>28&15]+T[H>>24&15]+T[H>>20&15]+T[H>>16&15]+T[H>>12&15]+T[H>>8&15]+T[H>>4&15]+T[H&15]+T[F>>28&15]+T[F>>24&15]+T[F>>20&15]+T[F>>16&15]+T[F>>12&15]+T[F>>8&15]+T[F>>4&15]+T[F&15];return d(this,n)||(z+=T[K>>28&15]+T[K>>24&15]+T[K>>20&15]+T[K>>16&15]+T[K>>12&15]+T[K>>8&15]+T[K>>4&15]+T[K&15]),z},J.prototype.toString=function(){return this.hex()},J.prototype.digest=function(){this.finalize();var E=d(this,t),I=d(this,y),W=d(this,c),G=d(this,v),P=d(this,h),H=d(this,b),F=d(this,u),K=d(this,s),z=[E>>24&255,E>>16&255,E>>8&255,E&255,I>>24&255,I>>16&255,I>>8&255,I&255,W>>24&255,W>>16&255,W>>8&255,W&255,G>>24&255,G>>16&255,G>>8&255,G&255,P>>24&255,P>>16&255,P>>8&255,P&255,H>>24&255,H>>16&255,H>>8&255,H&255,F>>24&255,F>>16&255,F>>8&255,F&255];return d(this,n)||z.push(K>>24&255,K>>16&255,K>>8&255,K&255),z},J.prototype.array=function(){return this.digest()},J.prototype.arrayBuffer=function(){this.finalize();var E=new ArrayBuffer(d(this,n)?28:32),I=new DataView(E);return I.setUint32(0,d(this,t)),I.setUint32(4,d(this,y)),I.setUint32(8,d(this,c)),I.setUint32(12,d(this,v)),I.setUint32(16,d(this,h)),I.setUint32(20,d(this,b)),I.setUint32(24,d(this,u)),d(this,n)||I.setUint32(28,d(this,s)),E},J}();o=new WeakMap,a=new WeakMap,i=new WeakMap,f=new WeakMap,l=new WeakMap,t=new WeakMap,y=new WeakMap,c=new WeakMap,v=new WeakMap,h=new WeakMap,b=new WeakMap,u=new WeakMap,s=new WeakMap,w=new WeakMap,r=new WeakMap,n=new WeakMap,e=new WeakMap,p=new WeakMap,function(J){x(E,J);function E(I,W,G){W===void 0&&(W=!1),G===void 0&&(G=!1);var P=J.call(this,W,G)||this;S.set(P,void 0),j.set(P,void 0),_.set(P,void 0),O.set(P,void 0);var H;if(typeof I=="string"){for(var F=[],K=I.length,z=0,V=0;V<K;++V){var L=I.charCodeAt(V);L<128?F[z++]=L:L<2048?(F[z++]=192|L>>6,F[z++]=128|L&63):L<55296||L>=57344?(F[z++]=224|L>>12,F[z++]=128|L>>6&63,F[z++]=128|L&63):(L=65536+((L&1023)<<10|I.charCodeAt(++V)&1023),F[z++]=240|L>>18,F[z++]=128|L>>12&63,F[z++]=128|L>>6&63,F[z++]=128|L&63)}H=F}else I instanceof ArrayBuffer?H=new Uint8Array(I):H=I;H.length>64&&(H=new U(W,!0).update(H).array());for(var Q=[],q=[],V=0;V<64;++V){var X=H[V]||0;Q[V]=92^X,q[V]=54^X}return P.update(q),$(P,_,Q),$(P,S,!0),$(P,j,W),$(P,O,G),P}return E.prototype.finalize=function(){if(J.prototype.finalize.call(this),d(this,S)){$(this,S,!1);var I=this.array();J.prototype.init.call(this,d(this,j),d(this,O)),this.update(d(this,_)),this.update(I),J.prototype.finalize.call(this)}},E}(U),S=new WeakMap,j=new WeakMap,_=new WeakMap,O=new WeakMap;function N(J){var E=new U;return E.update(J),parseInt(E.hex().substring(0,8),16)}var C=function(J){var E="#";return J.forEach(function(I){I<16&&(E+=0),E+=I.toString(16)}),E},M=function(J,E,I){J/=360;var W=I<.5?I*(1+E):I+E-I*E,G=2*I-W;return[J+1/3,J,J-1/3].map(function(P){return P<0&&P++,P>1&&P--,P<1/6?P=G+(W-G)*6*P:P<.5?P=W:P<2/3?P=G+(W-G)*6*(2/3-P):P=G,Math.round(P*255)})},B=function(){function J(E){E===void 0&&(E={});var I=[E.lightness,E.saturation].map(function(P){return P=P!==void 0?P:[.35,.5,.65],Array.isArray(P)?P.concat():[P]}),W=I[0],G=I[1];this.L=W,this.S=G,typeof E.hue=="number"&&(E.hue={min:E.hue,max:E.hue}),typeof E.hue=="object"&&!Array.isArray(E.hue)&&(E.hue=[E.hue]),typeof E.hue=="undefined"&&(E.hue=[]),this.hueRanges=E.hue.map(function(P){return{min:typeof P.min=="undefined"?0:P.min,max:typeof P.max=="undefined"?360:P.max}}),this.hash=N,typeof E.hash=="function"&&(this.hash=E.hash),E.hash==="bkdr"&&(this.hash=k)}return J.prototype.hsl=function(E){var I,W,G,P=this.hash(E),H=727;if(this.hueRanges.length){var F=this.hueRanges[P%this.hueRanges.length];I=P/this.hueRanges.length%H*(F.max-F.min)/H+F.min}else I=P%359;return P=Math.ceil(P/360),W=this.S[P%this.S.length],P=Math.ceil(P/this.S.length),G=this.L[P%this.L.length],[I,W,G]},J.prototype.rgb=function(E){var I=this.hsl(E);return M.apply(this,I)},J.prototype.hex=function(E){var I=this.rgb(E);return C(I)},J}();R.default=B})(Et);var pt=Kt(Et);const Zt=qt(),te={light:new pt({saturation:[.05,.08,.12],lightness:[.85,.87,.9]}),dark:new pt({saturation:[.02,.05,.08],lightness:[.18,.2,.3]})};new pt({saturation:[.3,.4,.5],lightness:[.7,.8,.9]}),new pt({saturation:[.3,.4,.5],lightness:[.2,.3,.4]});function Nt(R){let x=te[Zt.value?"dark":"light"];return Yt(R)?x.hex(wt(Xt(R))):(R==null?void 0:R.key)?x.hex(wt(R.key)):typeof R=="string"?x.hex(wt(R)):"hsla(0,100%,100%,0.2)"}const ee=["onClick"],ne={class:"item"},re={key:0},ie={class:"id"},oe={class:"title"},ae={class:"content"},ue={setup(R){const x=Mt({}),$=setInterval(()=>{x.value=yt._.graph},500);return Wt(()=>{clearInterval($)}),(d,o)=>(Z(),tt("article",null,[(Z(!0),tt(mt,null,_t(x.value,(a,i)=>(Z(),tt("div",{class:"record",style:kt({backgroundColor:St(Nt)(i)}),key:i},[st("div",{class:"key",onClick:f=>a.show=!a.show},[i[0]=="~"?(Z(),tt("div",{key:0,class:"user",style:kt({backgroundColor:St(Nt)(i.slice(1,88))})},ct(i.slice(1,6))+"...",5)):xt("",!0),st("div",ne,ct(i[0]=="~"?i.slice(88):i),1)],8,ee),ht(Ht,{name:"fade"},{default:At(()=>[a.show?(Z(),tt("section",re,[st("div",ie,ct(i),1),(Z(!0),tt(mt,null,_t(a,(f,l)=>Bt((Z(),tt("div",{class:"prop",key:l},[st("div",oe,ct(l),1),st("div",ae,ct(f),1)])),[[Gt,l!="_"&&l!="show"]])),128))])):xt("",!0)]),_:2},1024)],4))),128))]))}};var fe=jt(ue,[["__scopeId","data-v-537c10d6"]]);const se={setup(R){return yt.get("time").get("now").set(Date.now()),yt.get("time").get("now").map().on((x,$)=>{console.log(x,$)}),(x,$)=>(Z(),tt("p",null,"GUN"))}},we='{"title":"GUN js","description":"","frontmatter":{"title":"GUN js","subtitle":"gun presence experiment","tags":"webExp"},"relativePath":"art/web/exp/gun.md","lastUpdated":1631217769000}',ce={};function le(R,x,$,d,o,a){const i=se,f=fe,l=Ft("client-only");return Z(),tt("div",null,[ht(l,null,{default:At(()=>[ht(i),ht(f)]),_:1})])}var ge=jt(ce,[["render",le]]);export{we as __pageData,ge as default};
